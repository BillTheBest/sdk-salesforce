/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.ajax=function(e){function t(t,n,o){e.log.error(o)}function n(t,n,o,i){t.setRequestHeader("ManyWhoTenant",n),o&&t.setRequestHeader("Authorization",o),e.settings.event(i+".beforeSend")&&e.settings.event(i+".beforeSend").call(this,t)}function o(o,i,s,a,r,l,u,p,c,d){return s.listFilter=s.listFilter||{},s.listFilter.search=u||null,s.listFilter.limit=l,null!=l&&void 0!=l||(s.listFilter.limit=e.settings.global("paging.files")),p&&(s.listFilter.orderByPropertyDeveloperName=p,s.listFilter.orderByDirectionType=c),d>0&&(s.listFilter.offset=(d-1)*s.listFilter.limit),$.ajax({url:e.settings.global("platform.uri")+o,type:"POST",dataType:"json",contentType:"application/json",processData:!0,data:JSON.stringify(s),beforeSend:function(e){n.call(this,e,a,r,i)}}).done(e.settings.event(i+".done")).fail(t).fail(e.settings.event(i+".fail"))}return{login:function(o,i,s,a,r,l,u){e.log.info("Logging into Flow State: \n    Id: "+l);var p={username:i,password:s,token:null,sessionToken:a,sessionUrl:r,loginUrl:o};return $.ajax({url:e.settings.global("platform.uri")+"/api/run/1/authentication/"+l,type:"POST",dataType:"json",contentType:"application/json",processData:!0,data:JSON.stringify(p),beforeSend:function(e){n.call(this,e,u,null,"login")}}).done(e.settings.event("login.done")).fail(t).fail(e.settings.event("login.fail"))},builderLogin:function(o){return e.log.info("Logging into Draw API"),$.ajax({url:e.settings.global("platform.uri")+"/api/draw/1/authentication",type:"POST",dataType:"json",contentType:"application/json",processData:!0,data:JSON.stringify(o),beforeSend:function(t){n.call(this,t,e.settings.global("adminTenantId"),null,"builderLogin")}}).done(e.settings.event("builderLogin.done")).fail(t).fail(e.settings.event("builderLogin.fail"))},initialize:function(o,i,s){return e.log.info("Initializing Flow: \n    Id: "+o.flowId.id+"\n    Version Id: "+o.flowId.versionId),$.ajax({url:e.settings.global("platform.uri")+"/api/run/1",type:"POST",dataType:"json",contentType:"application/json",processData:!0,data:JSON.stringify(o),beforeSend:function(e){n.call(this,e,i,s,"initialization")}}).done(e.settings.event("initialization.done")).fail(t).fail(e.settings.event("initialization.fail"))},flowOut:function(o,i,s,a){return $.ajax({url:e.settings.global("platform.uri")+"/api/run/1/state/out/"+o+"/"+s,type:"POST",dataType:"json",contentType:"application/json",beforeSend:function(e){n.call(this,e,i,a,"flowOut")}}).done(e.settings.event("flowOut.done")).fail(t).fail(e.settings.event("flowOut.fail"))},join:function(o,i,s){return e.log.info("Joining State: "+o),$.ajax({url:e.settings.global("platform.uri")+"/api/run/1/state/"+o,type:"GET",contentType:"application/json",processData:!0,beforeSend:function(e){n.call(this,e,i,s,"join")}}).done(e.settings.event("join.done")).fail(t).fail(e.settings.event("join.fail"))},invoke:function(o,i,s){return e.log.info("Invoking State: "+o.stateId),$.ajax({url:e.settings.global("platform.uri")+"/api/run/1/state/"+o.stateId,type:"POST",dataType:"json",contentType:"application/json",processData:!0,data:JSON.stringify(o),beforeSend:function(e){n.call(this,e,i,s,"invoke")}}).done(e.settings.event("invoke.done")).fail(t).fail(e.settings.event("invoke.fail"))},getNavigation:function(o,i,s,a,r){return $.ajax({url:e.settings.global("platform.uri")+"/api/run/1/navigation/"+o,type:"POST",dataType:"json",contentType:"application/json",processData:!0,data:JSON.stringify({stateId:o,stateToken:i,navigationElementId:s}),beforeSend:function(e){n.call(this,e,a,r,"navigation")}}).done(e.settings.event("navigation.done")).fail(t).fail(e.settings.event("navigation.fail"))},getValueReferences:function(o,i){return $.ajax({url:e.settings.global("platform.uri")+"/api/draw/1/element/value/reference/",type:"GET",dataType:"json",contentType:"application/json",beforeSend:function(e){n.call(this,e,o,i,"getStateData")}}).done(e.settings.event("getValueReferences.done")).fail(t).fail(e.settings.event("getValueReferences.fail"))},getStateData:function(o,i,s){return $.ajax({url:e.settings.global("platform.uri")+"/api/admin/1/states/"+o,type:"GET",dataType:"json",contentType:"application/json",beforeSend:function(e){n.call(this,e,i,s,"getStateData")}}).done(e.settings.event("getStateData.done")).fail(t).fail(e.settings.event("getStateData.fail"))},getFlowByName:function(o,i,s){return $.ajax({url:e.settings.global("platform.uri")+"/api/run/1/flow/name/"+o,type:"GET",dataType:"json",contentType:"application/json",beforeSend:function(e){n.call(this,e,i,"","getFlowByName")}}).done(e.settings.event("getFlowByName.done")).fail(t).fail(e.settings.event("getFlowByName.fail"))},dispatchObjectDataRequest:function(t,n,i,s,a,r,l,u){return e.log.info("Dispatching object data request"),o("/api/service/1/data","objectData",t,n,i,s,a,r,l,u)},dispatchFileDataRequest:function(t,n,i,s,a,r,l,u){return e.log.info("Dispatching object data request"),o("/api/service/1/file","fileData",t,n,i,s,a,r,l,u)},uploadFile:function(t,o,i,s){var a=$.Deferred();return $.ajax({url:e.settings.global("platform.uri")+"/api/service/1/file/content",type:"POST",data:t,dataType:!1,contentType:!1,processData:!1,success:a.resolve,error:a.reject,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",s,!1),e},beforeSend:function(e){n.call(this,e,o,i,"fileData")}})},uploadSocialFile:function(t,o,i,s,a){var r=$.Deferred();return $.ajax({url:e.settings.global("platform.uri")+"/api/social/1/stream/"+o+"/file",type:"POST",data:t,dataType:!1,contentType:!1,processData:!1,success:r.resolve,error:r.reject,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",a,!1),e},beforeSend:function(e){n.call(this,e,i,s,"fileData")}})},sessionAuthentication:function(o,i,s,a){return e.log.info("Authenticating using session ID"),$.ajax({url:e.settings.global("platform.uri")+"/api/run/1/authentication/"+i,type:"POST",dataType:"json",contentType:"application/json",processData:!0,data:JSON.stringify(s),beforeSend:function(e){n.call(this,e,o,a,"sessionAuthentication")}}).done(e.settings.event("sessionAuthentication.done")).fail(t).fail(e.settings.event("sessionAuthentication.fail"))},ping:function(o,i,s,a){return e.log.info("Pinging for changes"),$.ajax({url:e.settings.global("platform.uri")+"/api/run/1/state/"+i+"/ping/"+s,type:"GET",beforeSend:function(e){n.call(this,e,o,a,"ping")}}).fail(t)},getExecutionLog:function(o,i,s,a){return e.log.info("Getting Execution Log"),$.ajax({url:e.settings.global("platform.uri")+"/api/log/"+i+"/"+s,type:"GET",beforeSend:function(e){n.call(this,e,o,a,"log")}}).done(e.settings.event("log.done")).fail(t).fail(e.settings.event("log.fail"))},getSocialMe:function(o,i,s,a){return e.log.info("Getting Social User, Me"),$.ajax({url:e.settings.global("platform.uri")+"/api/social/1/stream/"+i+"/user/me",type:"GET",beforeSend:function(e){n.call(this,e,o,a,"social"),e.setRequestHeader("ManyWhoState",s)}}).done(e.settings.event("social.done")).fail(t).fail(e.settings.event("social.fail"))},getSocialFollowers:function(o,i,s,a){return e.log.info("Getting Social Followers"),$.ajax({url:e.settings.global("platform.uri")+"/api/social/1/stream/"+i+"/follower",type:"GET",beforeSend:function(e){n.call(this,e,o,a,"social"),e.setRequestHeader("ManyWhoState",s)}}).done(e.settings.event("social.done")).fail(t).fail(e.settings.event("social.fail"))},getSocialMessages:function(o,i,s,a,r,l){return e.log.info("Getting Social Messages"),$.ajax({url:e.settings.global("platform.uri")+"/api/social/1/stream/"+i+"?page="+a+"&pageSize="+r,type:"GET",beforeSend:function(e){n.call(this,e,o,l,"social"),e.setRequestHeader("ManyWhoState",s)}}).done(e.settings.event("social.done")).fail(t).fail(e.settings.event("social.fail"))},sendSocialMessage:function(o,i,s,a,r){return e.log.info("Sending Social Message"),$.ajax({url:e.settings.global("platform.uri")+"/api/social/1/stream/"+i+"/message",type:"POST",dataType:"json",contentType:"application/json",processData:!0,data:JSON.stringify(a),beforeSend:function(e){n.call(this,e,o,r,"social"),e.setRequestHeader("ManyWhoState",s)}}).done(e.settings.event("social.done")).fail(t).fail(e.settings.event("social.fail"))},follow:function(o,i,s,a,r){return e.log.info("Following Social Message"),$.ajax({url:e.settings.global("platform.uri")+"/api/social/1/stream/"+i+"?follow="+a.toString(),type:"POST",dataType:"json",contentType:"application/json",processData:!0,beforeSend:function(e){n.call(this,e,o,r,"social"),e.setRequestHeader("ManyWhoState",s)}}).done(e.settings.event("social.done")).fail(t).fail(e.settings.event("social.fail"))},getSocialUsers:function(o,i,s,a,r){return e.log.info("Following Social Message"),$.ajax({url:e.settings.global("platform.uri")+"/api/social/1/stream/"+i+"/user?name="+a,type:"GET",dataType:"json",contentType:"application/json",processData:!0,beforeSend:function(e){n.call(this,e,o,r,"social"),e.setRequestHeader("ManyWhoState",s)}}).done(e.settings.event("social.done")).fail(t).fail(e.settings.event("social.fail"))}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.authorization=function(e){return{setAuthenticationToken:function(t,n){e.state.setAuthenticationToken(t,n)},isAuthorized:function(t,n){return!(null!=t.authorizationContext&&null!=t.authorizationContext.directoryId&&e.utils.isNullOrWhitespace(e.state.getAuthenticationToken(n)))},invokeAuthorization:function(t,n,o){if(null!=t.authorizationContext&&null!=t.authorizationContext.directoryId){if(e.utils.isEqual(t.authorizationContext.authenticationType,"oauth2",!0))return void(window.location=t.authorizationContext.loginUrl);if(e.utils.isEqual(t.authorizationContext.authenticationType,"saml",!0))return void(window.location=t.authorizationContext.loginUrl);e.state.setLogin({isVisible:!0,directoryId:t.authorizationContext.directoryId,directoryName:t.authorizationContext.directoryName,loginUrl:t.authorizationContext.loginUrl,stateId:t.stateId,callback:o},n)}},authorizeBySession:function(t,n,o){var i=e.json.generateSessionRequest(e.state.getSessionData(n).id,e.state.getSessionData(n).url,t),s=e.state.getState(n);e.callbacks.register(n,o),e.ajax.sessionAuthentication(e.utils.extractTenantId(n),s.id,i).then(function(t){e.state.setAuthenticationToken(t,n),e.callbacks.execute(n,"done",null,null,[t])})}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.callbacks=function(e){var t={};return{register:function(n,o){var i=e.utils.getLookUpKey(n);t[i]=t[i]||[],o.flowKey||(o.flowKey=n),t[i].push(o)},execute:function(n,o,i,s,a){var r=e.utils.getLookUpKey(n);t[r]&&t[r].filter(function(t){return!(o&&!e.utils.isEqual(t.type,o,!0))&&(!(i&&!e.utils.isEqual(t.name,i,!0))&&!(!e.utils.isEqual(o,"done",!0)&&s&&!e.utils.isEqual(t.mapElement,s,!0)))}).forEach(function(e){e.execute.apply(void 0,[e].concat(e.args||[],a)),t[r]&&!e.repeat&&t[r].splice(t[r].indexOf(e),1)})},remove:function(n){var o=e.utils.getLookUpKey(n);t[o]=null}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.collaboration=function(e){function t(t,n,o){var i=e.utils.extractStateId(t);h&&f[i].isEnabled&&(o=o||{},o.stateId=i,o.id=h.id,o.owner=h.id,h.connected?h.emit(n,o):h.on("connect",h.emit.bind(h,n,o)))}function n(){for(stateId in f)h.emit("left",{user:f[stateId].user,stateId:stateId})}function o(t){f[t.stateId]&&(e.log.info(t.user+" has joined "+t.stateId+". Users in Flow: "+t.users),e.model.addNotification(f[t.stateId].flowKey,{message:t.user+" has joined. Users currently in Flow: "+t.users,position:"right",type:"success",timeout:"2000",dismissible:!1}))}function i(t){f[t.stateId]&&(e.log.info(t.user+" has left "+t.stateId+". Users in Flow: "+t.users),e.model.addNotification(f[t.stateId].flowKey,{message:t.user+" has left. Users in Flow: "+t.users,position:"right",type:"danger",timeout:"2000",dismissible:!1}))}function s(t){e.log.info("change to: "+t.component+" in "+t.stateId),e.state.setComponent(t.component,t.values,f[t.stateId].flowKey,!1),e.engine.render(f[t.stateId].flowKey)}function a(t){e.log.info("re-joining "+t.stateId);var n=f[t.stateId].flowKey,o=e.utils.extractTenantId(n),i=e.utils.extractFlowId(n),s=e.utils.extractFlowVersionId(n),a=e.utils.extractStateId(n),r=e.utils.extractElement(n);e.engine.join(o,i,s,r,a,e.state.getAuthenticationToken(n),e.settings.flow(null,n)).then(function(){h.emit("getValues",t)})}function r(t){e.log.info("joining subflow "+t.subStateId);var n=e.utils.extractElement(t.parentFlowKey),o=e.utils.extractTenantId(t.parentFlowKey);e.state.setComponentLoading(n,null,t.parentFlowKey),e.engine.render(t.parentFlowKey),e.utils.removeFlow(t.parentFlowKey);var i=e.utils.extractStateId(t.subFlowKey);e.engine.join(o,null,null,n,i,null,e.settings.flow(null,t.parentFlowKey))}function l(t){e.log.info("returning to parent "+t.parentStateId);var n=e.utils.extractTenantId(t.subFlowKey),o=e.utils.extractElement(t.subFlowKey);e.state.setComponentLoading(o,null,t.subFlowKey),e.engine.render(t.subFlowKey),e.utils.removeFlow(t.subFlowKey),e.engine.join(n,null,null,o,t.parentStateId,e.state.getAuthenticationToken(t.subFlowKey),e.settings.flow(null,t.subFlowKey))}function u(t){e.log.info("syncing "+t.stateId),e.engine.sync(f[t.stateId].flowKey)}function p(t){var n=t.subStateId||t.stateId;e.log.info("get values from: "+t.owner+" in "+n),h.emit("setValues",{stateId:n,id:t.id,components:e.state.getComponents(f[n].flowKey)})}function c(t){e.log.info("setting values in "+t.stateId),e.state.setComponents(t.components,f[t.stateId].flowKey),e.engine.render(f[t.stateId].flowKey)}function d(t){e.log.info("syncing feed in "+t.stateId),e.social.refreshMessages(f[t.stateId].flowKey)}var h=null,f={};return{initialize:function(t,m){var g=e.utils.extractStateId(m);!h&&t&&(h=io.connect(e.settings.global("collaboration.uri"),{transports:["websocket"]}),h.on("disconnect",n),h.on("joined",o),h.on("left",i),h.on("change",s),h.on("move",a),h.on("flowOut",r),h.on("returnToParent",l),h.on("sync",u),h.on("getValues",p),h.on("setValues",c),h.on("syncFeed",d),window.addEventListener("beforeunload",function(e){n()})),!f[g]&&t&&(f[g]={isEnabled:!0,flowKey:m})},isInitialized:function(t){return f.hasOwnProperty(e.utils.extractStateId(t))},enable:function(t){f[e.utils.extractStateId(t)].isEnabled=!0,h||this.initialize(!0,t)},disable:function(t){f[e.utils.extractStateId(t)].isEnabled=!1},join:function(n,o){var i=e.utils.extractStateId(o);h&&f[i].isEnabled&&(f[i].user=n,t(o,"join",{user:n}),h.connected?this.getValues(o):h.on("connect",this.getValues.bind(null,o)))},leave:function(t,n){var o=e.utils.extractStateId(n);h.emit("left",{user:t,stateId:o})},push:function(e,n,o){t(o,"change",{component:e,values:n})},sync:function(e){t(e,"sync")},move:function(e){t(e,"move")},flowOut:function(e,n,o){t(e,"flowOut",{subStateId:n,parentFlowKey:e,subFlowKey:o})},returnToParent:function(n,o){t(n,"returnToParent",{subFlowKey:n,parentStateId:o,stateId:e.utils.extractStateId(n)})},getValues:function(t){h.emit("getValues",{stateId:e.utils.extractStateId(t),id:h.id})},syncFeed:function(e){t(e,"syncFeed")},remove:function(t){var n=e.utils.extractStateId(t);null==f[n],delete f[n]}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.component=function(e){function t(e){return"containerType"in e?e.containerType:"componentType"in e?e.componentType:null}var n={},o={};return{mixins:{},contentTypes:{string:"CONTENTSTRING",number:"CONTENTNUMBER","boolean":"CONTENTBOOLEAN",password:"CONTENTPASSWORD",datetime:"CONTENTDATETIME",content:"CONTENTCONTENT",object:"CONTENTOBJECT",list:"CONTENTLIST"},register:function(e,t,i){n[e.toLowerCase()]=t,i&&i.forEach(function(t){o[t.toLowerCase()]=e.toLowerCase()})},registerContainer:function(e,t){n["mw-"+e.toLowerCase()]=t,o[e.toLowerCase()]="mw-container"},get:function(i){var s=t(i).toLowerCase();if(o[s]&&(s=o[s]),n.hasOwnProperty(s))return n[s];throw e.log.error("Component of type: "+s+" could not be found"),"Component of type: "+s+" could not be found"},getByName:function(e){return e&&o[e.toLowerCase()]&&(e=o[e.toLowerCase()]),n[e.toLowerCase()]},getChildComponents:function(e,t,n){return e.sort(function(e,t){return e.order-t.order}).map(function(e){var o=this.get(e);return React.createElement(o,{id:e.id,parentId:t,flowKey:n,key:e.id})},this)},getOutcomes:function(e,t){return e.sort(function(e,t){return e.order-t.order}).map(function(e){return React.createElement(n.outcome,{id:e.id,flowKey:t,key:e.id})})},handleEvent:function(t,n,o,i){n.hasEvents&&(e.engine.sync(o).then(function(){e.engine.render(o)}).then(i),e.collaboration.sync(o)),t.forceUpdate()},getSelectedRows:function(t,n){var o=[];return n&&n.forEach(function(n){e.utils.isNullOrWhitespace(n)||(o=o.concat(t.objectData.filter(function(t){return e.utils.isEqual(t.externalId,n,!0)}).map(function(e){return e.isSelected=!0,e})))}),o},getDisplayColumns:function(t){var n=null;return t&&(n=t.filter(function(e){return e.isDisplayValue})),n&&0!=n.length||e.log.error("No display columns found"),n},appendFlowContainer:function(t){var n=e.utils.getLookUpKey(t),o=document.getElementById(n),i=e.utils.extractElement(t),s="mw-bs flow-container";if(e.utils.isEqual(i,"modal",!0)&&(s+=" modal-container"),o||e.utils.isEqual(i,"modal-standalone",!0))e.utils.isEqual(i,"modal-standalone",!0)&&(o=document.querySelector(e.settings.global("containerSelector",t,"#manywho")));else{var a=document.querySelector(e.settings.global("containerSelector",t,"#manywho"));o=document.createElement("div"),o.setAttribute("id",n),o.className=s,o.style.minHeight=a.clientHeight+"px",a.appendChild(o)}return o},focusInput:function(t){if(e.settings.flow("autofocusinput",t)&&window.innerWidth>768){var n=document.querySelector(".main .mw-input input, .main .mw-content input, .main .mw-textarea textarea, .modal-container .mw-input input, .modal-container .mw-content input, .modal-container .mw-textarea textarea");n&&(n.focus(),e.utils.isEqual(n.type,"text",!0)&&n.setSelectionRange(n.value.length,n.value.length))}},scrollToTop:function(t){var n=e.utils.getLookUpKey(t),o=document.getElementById(n);o&&window.scroll(0,o.offsetTop)}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
 permissions and limitations under the License.
*/
ReactDOM=window.ReactDOM||window.React,manywho.engine=function(e){function t(t,n){if(t){var o=e.utils.convertToArray(t).filter(function(e){return null!=e.objectDataRequest||null!=e.fileDataRequest});return $.when.apply($,o.map(function(t){if(t.isVisible){var o=e.settings.global("paging."+t.componentType),i=parseInt(t.attributes.paginationSize);return isNaN(i)||(o=i),t.fileDataRequest?e.engine.fileDataRequest(t.id,t.fileDataRequest,n,o):e.engine.objectDataRequest(t.id,t.objectDataRequest,n,o)}}))}}function n(t,n){return e.authorization.isAuthorized(t,n)?t:$.Deferred().reject(t).promise()}function o(t,n,o){null!=e.state.getSessionData(n)?e.authorization.authorizeBySession(t.authorizationContext.loginUrl,n,o):e.authorization.invokeAuthorization(t,n,o)}function i(t,n,o,i){if(o)return e.ajax.getNavigation(e.utils.extractStateId(t),n,o,e.utils.extractTenantId(t)).then(function(n){n&&e.model.parseNavigationResponse(o,n,t,i)});var s=new $.Deferred;return s.resolve(),s}function s(t,n){return e.ajax.getExecutionLog(e.utils.extractTenantId(t),e.utils.extractFlowId(t),e.utils.extractStateId(t),n).then(function(n){n&&e.model.setExecutionLog(t,n)})}function a(t,n){!n||n.responseText||0!==n.status&&500!==n.status&&504!==n.status?n&&e.model.addNotification(t,{message:n.responseText,position:"center",type:"danger",timeout:"0",dismissible:!0}):e.model.addNotification(t,{message:e.settings.global("errorMessage",t),position:"center",type:"danger",timeout:"0",dismissible:!0})}function r(t){var n=document.querySelector(e.settings.global("containerSelector",null,"#manywho"));n.classList.add("mw-bs");var o=document.createElement("div");return o.className="alert alert-danger initialize-error",o.innerText=t.statusText,n.insertBefore(o,n.children[0]),t}function l(l,u,p,c,d,h,f){var m,g=this,y=l.flowKey,v=y?e.utils.extractStateId(y):null,b=null,w=e.json.generateInitializationRequest({id:p,versionId:c},v,h.annotations,h.inputs,e.settings.global("playerUrl"),e.settings.global("joinUrl"),h.mode,h.reportingMode);return e.state.setOptions(h,y),y&&(e.state.setComponentLoading(e.utils.extractElement(y),{message:e.settings.global("localization.initializing")},y),g.render(y),f=f||e.state.getAuthenticationToken(y)),e.ajax.initialize(w,u,f).then(function(t){return localStorage.setItem("oauth-"+t.stateId,JSON.stringify({tenantId:u,flowId:p,flowVersionId:c,container:d,options:h})),y=e.utils.getFlowKey(u,p,c,t.stateId,d),null!=h.callbacks&&h.callbacks.length>0&&h.callbacks.forEach(function(t){e.callbacks.register(y,t)}),b=t.currentStreamId,l.flowKey=y,e.model.initializeModel(y),e.settings.initializeFlow(h,y),e.state.setState(t.stateId,t.stateToken,t.currentMapElementId,y),e.state.setAuthenticationToken(f,y),null!=h.authentication&&null!=h.authentication.sessionId&&e.state.setSessionData(h.authentication.sessionId,h.authentication.sessionUrl,y),t.navigationElementReferences&&t.navigationElementReferences.length>0&&e.model.setSelectedNavigation(t.navigationElementReferences[0].id,y),e.utils.isNullOrWhitespace(h.navigationElementId)||e.model.setSelectedNavigation(h.navigationElementId,y),e.component.appendFlowContainer(y),e.state.setComponentLoading(e.utils.extractElement(y),{message:e.settings.global("localization.initializing")},y),g.render(y),n(t,y)},r).then(function(t){var n=e.json.generateInvokeRequest(e.state.getState(y),"FORWARD",null,null,m,e.settings.flow("annotations",y),e.state.getLocation(y),e.settings.flow("mode",y));return e.ajax.invoke(n,e.utils.extractTenantId(y),e.state.getAuthenticationToken(y))},function(e){o(e,y,l)}).then(function(t){localStorage.removeItem("oauth-"+t.stateId),g.parseResponse(t,e.model.parseEngineResponse,y),e.state.setState(t.stateId,t.stateToken,t.currentMapElementId,y),e.collaboration.initialize(e.settings.flow("collaboration.isEnabled",y),y),e.collaboration.join("Another user",y),e.state.setLocation(y);var n=[],o=e.model.getSelectedNavigation(y);return e.utils.isNullOrWhitespace(o)||n.push(i(y,t.stateToken,o,t.currentMapElementId)),e.settings.isDebugEnabled(y)&&n.push(s(y,f)),b&&e.social.initialize(y,t.currentStreamId),e.utils.isEqual(t.invokeType,"DONE",!0)&&e.callbacks.execute(y,t.invokeType,null,t.currentMapElementId,[t]),$.whenAll(n)},function(e){a(y,e)}).always(function(){g.render(y),t(e.model.getComponents(y),y)}).always(function(){e.state.setComponentLoading(e.utils.extractElement(y),null,y),g.render(y)}).then(function(){return y})}function u(a,l){var u=this,l=l||a.flowKey,p=e.state.getAuthenticationToken(l),c=e.state.getState(l),d=!1;return e.state.setComponentLoading(e.utils.extractElement(l),{message:e.settings.global("localization.joining")},l),u.render(l),e.ajax.join(c.id,e.utils.extractTenantId(l),p).then(function(e){return n(e,l)},r).then(function(t){d=!0,localStorage.removeItem("oauth-"+t.stateId),e.model.initializeModel(l),u.parseResponse(t,e.model.parseEngineResponse,l),e.state.setState(t.stateId,t.stateToken,t.currentMapElementId,l),e.collaboration.isInitialized(l)||(e.collaboration.initialize(e.settings.flow("collaboration.isEnabled",l),l),e.collaboration.join("Another user",l)),e.state.setLocation(l);var n=[];return t.navigationElementReferences&&t.navigationElementReferences.length>0&&(e.model.setSelectedNavigation(t.navigationElementReferences[0].id,l),n.push(i(l,t.stateToken,t.navigationElementReferences[0].id,t.currentMapElementId))),e.settings.isDebugEnabled(l)&&n.push(s(l,p)),t.currentStreamId&&e.social.initialize(l,t.currentStreamId),$.whenAll(n)},function(e){o(e,l,a)}).always(function(){return u.render(l),t(e.model.getComponents(l),l)}).always(function(){d&&(e.state.setComponentLoading(e.utils.extractElement(l),null,l),u.render(l))}).then(function(){return l})}function p(o,r,l){var u=this,l=o.flowKey||l,p=e.state.getAuthenticationToken(l),c=null,d=null,h=r.mapElementInvokeRequest.selectedOutcomeId;return h&&(d=e.model.getOutcome(r.mapElementInvokeRequest.selectedOutcomeId,l)),e.settings.global("history",l)&&e.model.setHistorySelectedOutcome(r.mapElementInvokeRequest.selectedOutcomeId,r.invokeType,l),e.ajax.invoke(r,e.utils.extractTenantId(l),p).then(function(e){return n(e,l)},function(e){a(l,e)}).then(function(t){return c=t,u.parseResponse(t,e.model.parseEngineResponse,l),e.state.setState(t.stateId,t.stateToken,t.currentMapElementId,l),e.state.setLocation(l),t.mapElementInvokeResponses[0].outcomeResponses&&(d=t.mapElementInvokeResponses[0].outcomeResponses.filter(function(e){return e.id==h})[0]),!e.collaboration.isInitialized(l)||d&&d.isOut||e.collaboration.move(l),t},function(t){t&&e.authorization.invokeAuthorization(t,l,o)}).then(function(t){var n=e.model.getSelectedNavigation(l),o=[];return e.utils.isNullOrWhitespace(n)||o.push(i(l,c.stateToken,n)),e.settings.isDebugEnabled(l)&&o.push(s(l,p)),$.whenAll(o)}).always(function(){(d&&!d.isOut||!d)&&u.render(l),e.component.focusInput(l),e.component.scrollToTop(l)}).always(function(){e.state.setComponentLoading(e.utils.extractElement(l),null,l),(d&&!d.isOut||!d)&&u.render(l)}).always(function(){return t(e.model.getComponents(l),l)}).then(function(){c&&(e.callbacks.execute(l,c.invokeType,null,c.currentMapElementId,[c]),c=null)})}return{initialize:function(t,n,o,i,s,a,r,u){if(r=r||{},u=!!u&&"true"===u.toLowerCase(),a&&(a=decodeURI(a)),!(t||s&&(n||o)))return void e.log.error("tenantId & stateId, or tenatntId & flowId & flowVersionId must be specified");r.theme&&e.theming.apply(r.theme);var p=localStorage.getItem("oauth-"+s),c=s?!e.utils.isNullOrWhitespace(p)&&JSON.parse(p):null;return c||(c={tenantId:t,flowId:n,flowVersionId:o,container:i,options:r}),!s||u?l.call(this,{execute:l.bind(this),args:[c.tenantId,c.flowId,c.flowVersionId,c.container,c.options,a||null],name:"initialize",type:"done"},c.tenantId,c.flowId,c.flowVersionId,c.container,c.options,a):void this.join(c.tenantId,c.flowId,c.flowVersionId,c.container,s,a,c.options)},move:function(t,n){t&&!t.isOut&&(e.state.setComponentLoading(e.utils.extractElement(n),{message:e.settings.global("localization.executing")},n),this.render(n));var o=e.json.generateInvokeRequest(e.state.getState(n),"FORWARD",t.id,null,e.state.getPageComponentInputResponseRequests(n),e.model.getDefaultNavigationId(n),null,e.settings.flow("annotations",n),e.state.getLocation(n),e.settings.flow("mode",n));return p.call(this,{execute:p,context:this,args:[o,n],name:"invoke",type:"done"},o,n)},flowOut:function(t,n){var o=e.utils.extractTenantId(n),i=e.state.getAuthenticationToken(n);return e.ajax.flowOut(e.utils.extractStateId(n),o,t.id,i).then(function(t){var s=e.settings.getGlobals(n),a=e.utils.getFlowKey(o,null,null,t.stateId,e.utils.extractElement(n));e.collaboration.flowOut(n,t.stateId,a),e.utils.removeFlow(n),e.engine.join(o,null,null,"main",t.stateId,i,s)})},returnToParent:function(t,n){var o=e.utils.extractTenantId(t),i=e.state.getAuthenticationToken(t),s=e.settings.getGlobals(t);e.state.setComponentLoading(e.utils.extractElement(t),null,t),this.render(t),e.collaboration.returnToParent(t,n),e.utils.removeFlow(t),e.engine.join(o,null,null,"main",n,i,s)},sync:function(n){var o=e.json.generateInvokeRequest(e.state.getState(n),"SYNC",null,null,e.state.getPageComponentInputResponseRequests(n),null,e.settings.flow("annotations",n),e.state.getLocation(n),e.settings.flow("mode",n)),i=this;return e.state.setComponentLoading(e.utils.extractElement(n),{message:e.settings.global("localization.syncing")},n),this.render(n),e.ajax.invoke(o,e.utils.extractTenantId(n),e.state.getAuthenticationToken(n)).then(function(o){return e.utils.isEqual(o.invokeType,"wait",!0)?void setTimeout(function(){i.sync(n)},100):(i.parseResponse(o,e.model.parseEngineSyncResponse,n),t(e.model.getComponents(n),n))})},navigate:function(t,n,o,i){e.state.setComponentLoading("main",{message:e.settings.global("localization.navigating")},i),this.render(i);var s=e.json.generateNavigateRequest(e.state.getState(i),t,n,o,e.state.getPageComponentInputResponseRequests(i),e.settings.flow("annotations",i),e.state.getLocation(i));p.call(this,{execute:p,context:this,args:[s,i],name:"invoke",type:"done"},s,i)},join:function(t,n,o,i,s,a,r){var l=e.utils.getFlowKey(t,n,o,s,i);return r&&null!=r.authentication&&null!=r.authentication.sessionId&&e.state.setSessionData(r.authentication.sessionId,r.authentication.sessionUrl,l),r&&null!=r.callbacks&&r.callbacks.length>0&&r.callbacks.forEach(function(t){e.callbacks.register(l,t)}),e.model.initializeModel(l),e.settings.initializeFlow(r,l),e.state.setAuthenticationToken(a,l),e.state.setState(s,null,null,l),e.state.setOptions(r,l),e.component.appendFlowContainer(l),localStorage.setItem("oauth-"+s,JSON.stringify({tenantId:t,flowId:n,flowVersionId:o,container:i,options:r})),u.call(this,{execute:u.bind(this),args:[l],name:"invoke",type:"done"},l)},objectDataRequest:function(t,n,o,i,s,a,r,l){var u=this;return e.state.setComponentLoading(t,{message:e.settings.global("localization.loading")},o),u.render(o),e.ajax.dispatchObjectDataRequest(n,e.utils.extractTenantId(o),e.state.getAuthenticationToken(o),i,s,a,r,l).then(function(n){var i=e.model.getComponent(t,o);i.objectData=n.objectData,i.objectDataRequest.hasMoreResults=n.hasMoreResults,e.state.setComponentError(t,null,o)}).fail(function(n,i,s){e.state.setComponentError(t,s,o)}).always(function(){e.state.setComponentLoading(t,null,o),u.render(o)})},fileDataRequest:function(t,n,o,i,s,a,r,l){var u=this;return e.state.setComponentLoading(t,{message:e.settings.global("localization.loading")},o),u.render(o),e.ajax.dispatchFileDataRequest(n,e.utils.extractTenantId(o),e.state.getAuthenticationToken(o),i,s,a,r,l).then(function(n){var i=e.model.getComponent(t,o);i.objectData=n.objectData,i.fileDataRequest.hasMoreResults=n.hasMoreResults}).fail(function(n,i,s){e.state.setComponentError(t,s,o)}).always(function(){e.state.setComponentLoading(t,null,o),u.render(o)})},toggleDebug:function(t){e.settings.isDebugEnabled(t,!e.settings.isDebugEnabled(t)),this.render(t)},parseResponse:function(t,n,o){n.call(e.model,t,o),e.state.setState(t.stateId,t.stateToken,t.currentMapElementId,o),e.state.refreshComponents(e.model.getComponents(o),o),e.settings.flow("replaceUrl",o)&&e.utils.replaceBrowserUrl(t),(e.utils.isEqual(t.invokeType,"wait",!0)||e.utils.isEqual(t.invokeType,"status",!0))&&e.engine.ping(o)},ping:function(t){if(e.utils.isEqual(e.model.getInvokeType(t),"wait",!0)||e.utils.isEqual(e.model.getInvokeType(t),"status",!0)){var n=e.state.getState(t),o=this;e.ajax.ping(e.utils.extractTenantId(t),n.id,n.token,e.state.getAuthenticationToken(t)).then(function(i){if(i){var s=e.settings.getGlobals(t);o.join(e.utils.extractTenantId(t),e.utils.extractFlowId(t),e.utils.extractFlowVersionId(t),e.utils.extractElement(t),n.id,e.state.getAuthenticationToken(t),s)}else setTimeout(function(){o.ping(t)},1e4)})}},render:function(t){var n=e.utils.getLookUpKey(t),o=document.getElementById(n);e.utils.isEqual(e.utils.extractElement(t),"modal-standalone",!0)&&(o=document.querySelector(e.settings.global("containerSelector",t,"#manywho")));var i=e.state.getLogin(t);i?ReactDOM.render(React.createElement(e.component.getByName("mw-login"),{flowKey:t,api:"run",callback:i.callback,stateId:i.stateId,directoryName:i.directoryName,loginUrl:i.loginUrl}),o):ReactDOM.render(React.createElement(e.component.getByName(e.utils.extractElement(t)),{flowKey:t,container:o}),o)}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.json=function(e){return{generateFlowInputs:function(e){return e&&!Array.isArray(e)&&(e=[e]),e.map(function(e){for(var t in e)return e[t].objectData?{contentType:e[t].objectData.length>1?"ContentList":"ContentObject",contentValue:null,developerName:t,objectData:[e[t].objectData],typeElementDeveloperName:e[t].typeElementDeveloperName||null}:e[t].contentType&&e[t].developerName?e[t]:{contentType:"Content"+(typeof e[t]).charAt(0).toUpperCase()+(typeof e[t]).substring(1).toLowerCase()||"ContentString",contentValue:e[t],developerName:t,objectData:null,typeElementDeveloperName:null}})},generateInitializationRequest:function(e,t,n,o,i,s,a,r){return{flowId:{id:e.id,versionId:e.versionid||e.versionId||null},stateId:t||null,annotations:n||null,inputs:o||null,playerUrl:i||null,joinPlayerUrl:s||null,mode:a||"",reportingMode:r||""}},generateInvokeRequest:function(e,t,n,o,i,s,a,r,l,u){return{stateId:e.id,stateToken:e.token,currentMapElementId:e.currentMapElementId,invokeType:t,annotations:r||null,geoLocation:l||null,mapElementInvokeRequest:{pageRequest:{pageComponentInputResponses:i||null},selectedOutcomeId:n||null},mode:u||"",selectedMapElementId:o||null,navigationElementId:s||null,selectedNavigationElementId:a||null}},generateNavigateRequest:function(e,t,n,o,i,s,a){return{stateId:e.id,stateToken:e.token,currentMapElementId:e.currentMapElementId,invokeType:"NAVIGATE",navigationElementId:t,selectedMapElementId:o,selectedNavigationItemId:n,annotations:s||null,geoLocation:a||null,mapElementInvokeRequest:{pageRequest:{pageComponentInputResponses:i||null},selectedOutcomeId:null}}},generateSessionRequest:function(e,t,n,o,i,s){return{sessionToken:e,sessionUrl:t,loginUrl:n,username:o||null,password:i||null,token:s||null}}}}(manywho),/*!
 Copyright 2015 ManyWho, Inc.
 Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
 file except in compliance with the License.
 You may obtain a copy of the License at: http://manywho.com/sharedsource
 Unless required by applicable law or agreed to in writing, software distributed under
 the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the specific language governing
 permissions and limitations under the License.
 */
manywho.log=function(e,t){return log.noConflict()}(manywho,jQuery),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){function t(e,t){return e.contentValue&&(t.innerHTML=e.contentValue,e.contentValue=t.textContent,t.textContent=""),e.objectData&&e.objectData.forEach(function(e){e.properties&&(e.properties=e.properties.map(function(e){return e.contentValue&&(t.innerHTML=e.contentValue,e.contentValue=t.textContent,t.textContent=""),e}))}),e}function n(t,n,o){e.log.info("Updating item: "+n.id);var i=e.utils.get(t,n.id,o);return null!=i?(n.hasOwnProperty("contentType")&&null==n.contentType&&(n.contentType=e.component.contentTypes.string),e.utils.extend({},[n,i])):n}function o(e,t,n,i){if(i=i||"pageContainerResponses",null!=e)for(var s=0;s<e.length;s++){var a=e[s];t&&(a.parent=t.id,t.childCount=e.length),n.push(a),o(a[i],a,n,i)}return n}function i(t,n){var o={};return t&&t.forEach(function(t){var s=n.filter(function(n){return e.utils.isEqual(n.navigationItemId,t.id,!0)})[0];o[t.id]=e.utils.extend({},[t,s]),null!=t.navigationItems&&(o[t.id].items=i(t.navigationItems,n))},this),o}function s(e){var t=Object.keys(r[e].containers).map(function(t){return r[e].containers[t]}),n=Object.keys(r[e].components).map(function(t){return r[e].components[t]}),o=Object.keys(r[e].outcomes).map(function(t){return r[e].outcomes[t]});t.filter(function(e){return!e.parent}).forEach(function(e){a(e,t,n,o)})}function a(t,n,o,i){var s=n.filter(function(e){return e.parent==t.id});s.forEach(function(e){a(e,n,o,i)});var r=o.filter(function(e){return e.pageContainerId==t.id&&e.isVisible}),l=i.filter(function(e){return e.pageContainerId==t.id});s=s.filter(function(e){return e.isVisible}),0===r.length&&0===l.length&&0===s.length&&e.utils.isNullOrWhitespace(t.label)&&(t.isVisible=!1)}var r={};e.model={parseEngineResponse:function(t,n){var o=e.utils.getLookUpKey(n);if(r[o].containers={},r[o].components={},r[o].outcomes={},r[o].label=null,r[o].notifications=[],r[o].stateValues=[],r[o].preCommitStateValues=[],r[o].rootFaults=[],t&&(r[o].parentStateId=t.parentStateId),t&&t.mapElementInvokeResponses){if(r[o].invokeType=t.invokeType,r[o].waitMessage=t.notAuthorizedMessage||t.waitMessage,r[o].vote=t.voteResponse||null,t.mapElementInvokeResponses[0].pageResponse&&(r[o].label=t.mapElementInvokeResponses[0].pageResponse.label,e.model.setAttributes(n,t.mapElementInvokeResponses[0].pageResponse.attributes||null),this.setContainers(n,t.mapElementInvokeResponses[0].pageResponse.pageContainerResponses,t.mapElementInvokeResponses[0].pageResponse.pageContainerDataResponses),this.setComponents(n,t.mapElementInvokeResponses[0].pageResponse.pageComponentResponses,t.mapElementInvokeResponses[0].pageResponse.pageComponentDataResponses)),t.mapElementInvokeResponses[0].outcomeResponses&&t.mapElementInvokeResponses[0].outcomeResponses.forEach(function(e){r[o].outcomes[e.id.toLowerCase()]=e},this),s(o),t.mapElementInvokeResponses[0].rootFaults){r[o].rootFaults=[],r[o].notifications=r[o].notifications||[];for(faultName in t.mapElementInvokeResponses[0].rootFaults){var i=null;try{i=JSON.parse(t.mapElementInvokeResponses[0].rootFaults[faultName])}catch(a){i={message:t.mapElementInvokeResponses[0].rootFaults[faultName]}}i.name=faultName,r[o].rootFaults.push(i),r[o].notifications.push({message:i.message,position:"center",type:"danger",timeout:"0",dismissible:!0})}e.state.setComponentLoading(e.utils.extractElement(n),null,n)}switch(e.settings.global("history",n)&&e.utils.isEqual(t.invokeType,"FORWARD",!0)&&e.model.setHistory(t,n),r[o].preCommitStateValues=t.preCommitStateValues,r[o].stateValues=t.stateValues,t.invokeType.toLowerCase()){case"wait":e.state.setComponentLoading("main",{message:t.waitMessage},n)}}else e.utils.isEqual(t.invokeType,"not_allowed",!0)&&r[o].notifications.push({message:"You are not authorized to access this content. Please contact your administrator for more details.",position:"center",type:"danger",timeout:"0",dismissible:!1})},parseEngineSyncResponse:function(t,n){var o=e.utils.getLookUpKey(n);t.invokeType&&(r[o].invokeType=t.invokeType),t.mapElementInvokeResponses&&(t.mapElementInvokeResponses[0].pageResponse.pageContainerDataResponses.forEach(function(t){r[o].containers[t.pageContainerId]=e.utils.extend(r[o].containers[t.pageContainerId],t)},this),t.mapElementInvokeResponses[0].pageResponse.pageComponentDataResponses.forEach(function(t){r[o].components[t.pageComponentId]=e.utils.extend(r[o].components[t.pageComponentId],t)},this),s(o))},parseNavigationResponse:function(t,n,o,s){var a=e.utils.getLookUpKey(o);r[a].navigation={},r[a].navigation[t]={culture:n.culture,developerName:n.developerName,label:n.label,tags:n.tags},r[a].navigation[t].items=i(n.navigationItemResponses,n.navigationItemDataResponses),r[a].navigation[t].isVisible=n.isVisible,r[a].navigation[t].isEnabled=n.isEnabled;var l=null;for(itemId in r[a].navigation[t].items)if(r[a].navigation[t].items[itemId].isCurrent){selected=r[a].navigation[t].items[itemId];break}if(null==l&&s)for(itemId in r[a].navigation[t].items)if(e.utils.isEqual(r[a].navigation[t].items[itemId].locationMapElementId,s)){r[a].navigation[t].items[itemId].isCurrent=!0;break}var u=this.getParentStateId(o);u&&(r[a].navigation[t].returnToParent=React.createElement(e.component.getByName("returnToParent"),{flowKey:o,parentStateId:u}))},getLabel:function(t){var n=e.utils.getLookUpKey(t);return r[n].label},getChildren:function(t,n){var o=e.utils.getLookUpKey(n);if(void 0===r[o]||void 0===r[o].containers)return[];if("root"==t)return e.utils.getAll(r[o].containers,null,"parent");var i=[],s=r[o].containers[t];return null!=s&&(i=i.concat(e.utils.getAll(r[o].containers,t,"parent")),i=i.concat(e.utils.getAll(r[o].components,t,"pageContainerId"))),i.sort(function(e,t){return e.order-t.order}),i},getContainer:function(t,n){var o=e.utils.getLookUpKey(n);return r[o].containers[t]},getComponent:function(t,n){var o=e.utils.getLookUpKey(n);return r[o].components[t]},getComponentByName:function(t,n){var o=e.utils.getLookUpKey(n),i=r[o].components;if(i)for(var s in i)if(e.utils.isEqual(t,i[s].developerName,!0))return i[s];return null},getComponents:function(t){var n=e.utils.getLookUpKey(t);return r[n].components},getOutcome:function(t,n){var o=e.utils.getLookUpKey(n);if(r[o].outcomes)return r[o].outcomes[t.toLowerCase()]},getOutcomes:function(t,n){var o=e.utils.getLookUpKey(n);if(void 0===r[o]||void 0===r[o].outcomes)return[];var i=e.utils.convertToArray(r[o].outcomes)||[];return i.filter(function(n){return!e.utils.isNullOrWhitespace(t)&&e.utils.isEqual(n.pageObjectBindingId,t,!0)||(e.utils.isNullOrWhitespace(t)||e.utils.isEqual(t,"root",!0))&&e.utils.isNullOrWhitespace(n.pageObjectBindingId)})},getNotifications:function(t,n){var o=e.utils.getLookUpKey(t);return r[o].notifications?r[o].notifications.filter(function(t){return e.utils.isEqual(t.position,n,!0)}):[]},removeNotification:function(t,n){var o=e.utils.getLookUpKey(t);if(r[o]){var i=r[o].notifications.indexOf(n);r[o].notifications.splice(i,1),e.engine.render(t)}},addNotification:function(t,n){var o=e.utils.getLookUpKey(t);r[o]&&(r[o].notifications=r[o].notifications||[],r[o].notifications.push(n),e.engine.render(t))},getSelectedNavigation:function(t){var n=e.utils.getLookUpKey(t);return r[n].selectedNavigation},setSelectedNavigation:function(t,n){var o=e.utils.getLookUpKey(n);r[o].selectedNavigation=t},getNavigation:function(t,n){var o=e.utils.getLookUpKey(n);if(t)return r[o].navigation[t]},getDefaultNavigationId:function(t){var n=e.utils.getLookUpKey(t);if(r[n].navigation)return Object.keys(r[n].navigation)[0]},getItem:function(e,t){var n=this.getContainer(e,t);return null!=n?n:(n=this.getComponent(e,t),null!=n?n:(n=this.getOutcome(e,t),null!=n?n:(n=this.getNavigation(e,t),null!=n?n:void 0)))},getInvokeType:function(t){var n=e.utils.getLookUpKey(t);return r[n].invokeType},getWaitMessage:function(t){var n=e.utils.getLookUpKey(t);return r[n].waitMessage},setComponentInputResponseRequest:function(e,t,n){this.componentInputResponseRequests[e].contentValue=t,this.componentInputResponseRequests[e].objectData=n},getPreCommitStateValues:function(t){var n=e.utils.getLookUpKey(t);return r[n].preCommitStateValues},getStateValues:function(t){var n=e.utils.getLookUpKey(t);return r[n].stateValues},getExecutionLog:function(t){var n=e.utils.getLookUpKey(t);return r[n].executionLog},setExecutionLog:function(t,n){var o=e.utils.getLookUpKey(t);r[o].executionLog=n},getHistory:function(t){var n=e.utils.getLookUpKey(t);return r[n].history||(r[n].history=[]),r[n].history},setHistory:function(t,n){var o=e.utils.getLookUpKey(n);r[o].history||(r[o].history=[]),r[o].lastInvoke||(r[o].lastInvoke="FORWARD");var i=r[o].history.length;if(e.utils.isEqual(r[o].lastInvoke,"FORWARD",!0)){if(t.mapElementInvokeResponses[0].outcomeResponses)var s=t.mapElementInvokeResponses[0].outcomeResponses.map(function(e){return{name:e.developerName,id:e.id,label:e.label,order:e.order}});r[o].history[i]=e.utils.extend(r[o].history[i]||{},[{name:t.mapElementInvokeResponses[0].developerName,id:t.mapElementInvokeResponses[0].mapElementId,label:t.mapElementInvokeResponses[0].pageResponse.label,content:t.mapElementInvokeResponses[0].pageResponse.pageComponentDataResponses[0].content||"",outcomes:s}])}},setHistorySelectedOutcome:function(t,n,o){var i=e.utils.getLookUpKey(o);if(r[i].lastInvoke=n,t){r[i].history||(r[i].history=[]);var s=r[i].history.length-1;r[i].history[s]||(r[i].history[s]={}),r[i].history[s].selectedOutcome=t}},popLastHistory:function(t){var n=e.utils.getLookUpKey(t);r[n].history.pop()},popHistory:function(t,n){for(var o=e.utils.getLookUpKey(n),i=r[o].history.length,s=i;s>0;s--){var a=r[o].history[s-1];if(a.id==t)break;r[o].history.pop()}},isContainer:function(t){return!e.utils.isNullOrWhitespace(t.containerType)},initializeModel:function(t){var n=e.utils.getLookUpKey(t);r[n]||(r[n]={})},getContentValue:function(e,t){if(null!=e){var n=null;return e.filter(function(e){e.developerName==t&&(n=e.contentValue)}),n}},getObjectData:function(e,t){if(null!=e){var n=null;return e.filter(function(e){e.developerName==t&&(n=e.objectData)}),n}},getAttributes:function(t){var n=e.utils.getLookUpKey(t);return r[n].attributes},getParentStateId:function(t){var n=e.utils.getLookUpKey(t);return r[n].parentStateId},deleteFlowModel:function(t){var n=e.utils.getLookUpKey(t);r[n]=null,delete r[n]},getRootFaults:function(t){var n=e.utils.getLookUpKey(t);return r[n].rootFaults||[]},setContainers:function(t,i,s,a){var l=e.utils.getLookUpKey(t);if(a=a||"pageContainerResponses",i){r[l].containers={};var u=o(i,null,[],a);u.forEach(function(t){r[l].containers[t.id]=t,s&&e.utils.contains(s,t.id,"pageContainerId")&&(r[l].containers[t.id]=n(s,t,"pageContainerId"))},this)}},setComponents:function(o,i,s){var a=e.utils.getLookUpKey(o);if(i){r[a].components={};var l=document.createElement("textarea");i.forEach(function(o){o.attributes=o.attributes||{},r[a].components[o.id]=o,r[a].containers[o.pageContainerId].childCount||(r[a].containers[o.pageContainerId].childCount=0),r[a].containers[o.pageContainerId].childCount++,s&&e.utils.contains(s,o.id,"pageComponentId")&&(r[a].components[o.id]=n(s,o,"pageComponentId")),r[a].components[o.id]=t(r[a].components[o.id],l)},this)}},setAttributes:function(t,n){var o=e.utils.getLookUpKey(t);r[o].attributes=n}}}(manywho=manywho||{}),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.settings=function(e,t){var n={localization:{initializing:"",executing:"",loading:"",navigating:"",syncing:"",joining:"Joining",sending:"Sending",returnToParent:"Return To Parent",noResults:"No Results",status:null},paging:{table:10,files:10,select:250,tiles:20},collaboration:{uri:"https://realtime.manywho.com"},platform:{uri:""},navigation:{isFixed:!0,isWizard:!1},files:{downloadUriPropertyId:"6611067a-7c86-4696-8845-3cdc79c73289",downloadUriPropertyName:"Download Uri"},richText:{url:"https://cdn.tinymce.com/4/tinymce.min.js",fontSize:"14px",plugins:["advlist autolink link lists link image charmap print hr anchor spellchecker","searchreplace visualblocks fullscreen wordcount code insertdatetime","media table directionality emoticons contextmenu paste textcolor"],toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link mwimage"},errorMessage:"Whoops, something went wrong inside ManyWho - if this keeps happening, contact us at support@manywho.com",outcomes:{display:null,isFixed:!1},shortcuts:{progressOnEnter:!0},isFullWidth:!1,collapsible:{"default":{enabled:!1,collapsed:!1,group:null}},history:!1,containerSelector:"#manywho",syncOnUnload:!0,toggle:{shape:"round",background:null}},o={},i={url:"/css/themes"},s={initialization:{},invoke:{},sync:{},navigation:{},join:{},flowOut:{},login:{},log:{},objectData:{},fileData:{},getFlowByName:{},sessionAuthentication:{},social:{},ping:{}};return{initialize:function(t,o){n=e.utils.extend(n,t,!0),s=e.utils.extend(s,o,!0)},initializeFlow:function(i,s){var a=e.utils.getLookUpKey(s);o[a]=t.extend(!0,{},n,i)},global:function(t,i,s){var a=e.utils.getLookUpKey(i),r=e.utils.getValueByPath(n,t.toLowerCase());if(i){var l=e.utils.getValueByPath(o[a]||{},t.toLowerCase());if("undefined"!=typeof l)return l;if("undefined"!=typeof r)return r;if("undefined"!=typeof s)return s}return r},getGlobals:function(t){var i=e.utils.getLookUpKey(t);return e.utils.extend(n,o[i],!0)},flow:function(t,n){var i=e.utils.getLookUpKey(n);return e.utils.isNullOrWhitespace(t)?o[i]:e.utils.getValueByPath(o[i]||{},t.toLowerCase())},event:function(t){return e.utils.getValueByPath(s,t.toLowerCase())},theme:function(t){return e.utils.getValueByPath(i,t.toLowerCase())},isDebugEnabled:function(t,n){var i=e.utils.getLookUpKey(t);return"undefined"==typeof n?e.utils.isEqual(this.flow("mode",t),"Debug",!0)||e.utils.isEqual(this.flow("mode",t),"Debug_StepThrough",!0):void(n?o[i].mode="Debug":o[i].mode="")},remove:function(t){var n=e.utils.getLookUpKey(t);null==o[n],delete o[n]}}}(manywho,jQuery),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.social=function(e){var t={};return{initialize:function(n,o){var i=e.utils.getLookUpKey(n);e.state.setComponentLoading("feed",{message:e.settings.global("localization.loading")},n);var s=e.utils.extractTenantId(n),a=e.utils.extractStateId(n),r=e.state.getAuthenticationToken(n);return t[i]={id:o},e.ajax.getSocialMe(s,o,a,r).then(function(n){return t[i].me=n,e.ajax.getSocialFollowers(s,o,a,r)}).then(function(n){return t[i].followers=n,e.ajax.getSocialMessages(s,o,a,1,10,r)}).then(function(o){t[i].messages=o,e.state.setComponentLoading("feed",null,n),e.engine.render(n)})},getStream:function(n){var o=e.utils.getLookUpKey(n);return t[o]},refreshMessages:function(n){var o=e.utils.getLookUpKey(n);e.state.setComponentLoading("feed",{message:e.settings.global("localization.loading")},n),e.engine.render(n);var i=e.utils.extractTenantId(n),s=e.utils.extractStateId(n),a=e.state.getAuthenticationToken(n),r=t[o].id;return e.ajax.getSocialMessages(i,r,s,1,10,a).then(function(i){t[o].messages=i,e.state.setComponentLoading("feed",null,n),e.engine.render(n)})},getMessages:function(n){var o=e.utils.getLookUpKey(n);e.state.setComponentLoading("feed",{message:e.settings.global("localization.loading")},n),e.engine.render(n);var i=e.utils.extractTenantId(n),s=e.utils.extractStateId(n),a=e.state.getAuthenticationToken(n),r=t[o].id;return e.ajax.getSocialMessages(i,r,s,t[o].messages.nextPage,10,a).then(function(i){t[o].messages.messages=t[o].messages.messages.concat(i.messages),t[o].messages.nextPage=i.nextPage,e.state.setComponentLoading("feed",null,n),e.engine.render(n)})},sendMessage:function(n,o,i,s,a){if(!e.utils.isNullOrWhitespace(o)){var r=e.utils.getLookUpKey(n),l=e.utils.extractTenantId(n),u=e.utils.extractStateId(n),p=e.state.getAuthenticationToken(n),c=t[r],d={mentionedWhos:e.utils.convertToArray(s),messageText:o,senderId:c.me.id,uploadedFiles:a};return i&&(d.repliedTo=i),d.messageText=d.messageText.replace(/@\[[A-za-z0-9 ]*\]/gi,function(e){return e.substring(2,e.length-1)}),e.state.setComponentLoading("feed",{message:e.settings.global("localization.sending")},n),e.engine.render(n),e.ajax.sendSocialMessage(l,c.id,u,d,p).then(function(t){if(i){var o=c.messages.messages.filter(function(e){return e.id==i})[0];o.comments=o.comments||[],o.comments.push(t)}else c.messages.messages=c.messages.messages||[],c.messages.messages.unshift(t);e.collaboration.syncFeed(n),e.state.setComponentLoading("feed",null,n),e.engine.render(n)})}},toggleFollow:function(n){var o=e.utils.getLookUpKey(n),i=e.utils.extractTenantId(n),s=e.utils.extractStateId(n),a=e.state.getAuthenticationToken(n),r=t[o];return e.state.setComponentLoading("feed",{message:e.settings.global("localization.loading")},n),e.engine.render(n),e.ajax.follow(i,r.id,s,!r.me.isFollower,a).then(function(t){return r.me.isFollower=!r.me.isFollower,e.ajax.getSocialFollowers(i,r.id,s,a)}).then(function(i){t[o].followers=i,e.state.setComponentLoading("feed",null,n),e.engine.render(n)})},getUsers:function(n,o){var i=e.utils.getLookUpKey(n),s=e.utils.extractTenantId(n),a=e.utils.extractStateId(n),r=e.state.getAuthenticationToken(n),l=t[i];return e.ajax.getSocialUsers(s,l.id,a,o,r)},attachFiles:function(n,o,i){var s=e.utils.getLookUpKey(n),a=e.utils.extractTenantId(n),r=e.state.getAuthenticationToken(n),l=t[s];return e.ajax.uploadSocialFile(o,l.id,a,r,i)},remove:function(n){var o=e.utils.getLookUpKey(n);t[o]&&(null==t[o],delete t[o])}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.state=function(e){function t(t){if(t.objectDataRequest&&t.objectData&&1==t.objectData.length){for(prop in t.objectData[0].properties)if(!e.utils.isNullOrWhitespace(t.objectData[0].properties[prop].contentValue))return!1}else if(t.objectData)return!1;return!0}var n={},o={},i={},s={},a={},r={},l={},u=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;return{refreshComponents:function(o,i){var s=e.utils.getLookUpKey(i);n[s]={};for(id in o){var a=null;o[id].objectData&&!t(o[id])&&(a=o[id].objectData.filter(function(e){return e.isSelected})),n[s][id]={contentValue:o[id].contentValue||null,objectData:a||null}}},getLocation:function(t){var n=e.utils.getLookUpKey(t);return a[n]},setLocation:function(t){if("geolocation"in navigator&&e.settings.global("trackLocation",t,!1)){var n=e.utils.getLookUpKey(t);navigator.geolocation.getCurrentPosition(function(t){if(null!=t&&null!=t.coords){var o=moment();a[n]={latitude:e.utils.getNumber(t.coords.latitude),longitude:e.utils.getNumber(t.coords.longitude),accuracy:e.utils.getNumber(t.coords.accuracy),altitude:e.utils.getNumber(t.coords.altitude),altitudeAccuracy:e.utils.getNumber(t.coords.altitudeAccuracy),heading:e.utils.getNumber(t.coords.heading),speed:e.utils.getNumber(t.coords.speed),time:o.format("YYYY-MM-DDTHH:mm:ss.SSSZ")}}},null,{timeout:6e4})}},getComponent:function(t,o){var i=e.utils.getLookUpKey(o);return(n[i]||{})[t]},getComponents:function(t){var o=e.utils.getLookUpKey(t);return n[o]},setComponent:function(t,o,i,s){var a=e.utils.getLookUpKey(i);n[a][t]=e.utils.extend(n[a][t],o),null!=o&&(n[a][t].objectData=o.objectData),s&&e.collaboration.push(t,o,i)},setComponents:function(t,o){var i=e.utils.getLookUpKey(o);n[i]=t},getPageComponentInputResponseRequests:function(t){var o=e.utils.getLookUpKey(t),i=null;if(null!=n[o]){i=[];for(id in n[o])u.test(id)&&i.push({pageComponentId:id,contentValue:n[o][id].contentValue,objectData:n[o][id].objectData})}return i},setState:function(t,n,i,s){var a=e.utils.getLookUpKey(s);o[a]={id:t,token:n,currentMapElementId:i}},getState:function(t){var n=e.utils.getLookUpKey(t);return o[n]},setOptions:function(t,n){var o=e.utils.getLookUpKey(n);l[o]=t},getOptions:function(t){var n=e.utils.getLookUpKey(t);return l[n]},setLogin:function(t,n){var o=e.utils.getLookUpKey(n);r[o]=t},getLogin:function(t){var n=e.utils.getLookUpKey(t);return r[n]},setAuthenticationToken:function(t,n){var o=e.utils.getLookUpKey(n);i[o]=t},getAuthenticationToken:function(t){var n=e.utils.getLookUpKey(t);return i[n]},getSessionData:function(t){var n=e.utils.getLookUpKey(t);return s[n]},setSessionData:function(t,n,o){var i=e.utils.getLookUpKey(o);s[i]={id:t,url:n}},setComponentLoading:function(t,o,i){var s=e.utils.getLookUpKey(i);n[s]=n[s]||{},n[s][t]=n[s][t]||{},n[s][t].loading=o},setComponentError:function(t,o,i){var s=e.utils.getLookUpKey(i);n[s]=n[s]||{},n[s][t]=n[s][t]||{},null!==o&&"object"==typeof o?(n[s][t].error=o,n[s][t].error.id=t):"string"==typeof o?n[s][t].error={message:o,id:t}:o||(n[s][t].error=null)},remove:function(t){var o=e.utils.getLookUpKey(t);null==n[o],delete n[o]}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.styling=function(e){var t={},n={};return{getClasses:function(o,i,s,a){var r=e.model.getContainer(o,a),l=e.model.getItem(i,a),u=[];if(u.push("mw-"+s.toLowerCase()),r){var p=r.containerType.toLowerCase();n.hasOwnProperty(p)&&(u=u.concat(n[p].call(this,l,r)))}if(l){var c=l.componentType||l.containerType;if(!e.utils.isNullOrWhitespace(c)){var d=c.toLowerCase();t.hasOwnProperty(d)&&("string"==typeof t[d]||t[d]instanceof String?u.push(t[d]):"[object Function]"=={}.toString.call(t[d])?u.push(t[d].call(this,l,r)):Array.isArray(t[d])&&(u=u.concat(t[d])))}}return l.attributes&&!e.utils.isNullOrWhitespace(l.attributes.classes)&&u.push(l.attributes.classes),e.model.isContainer(l)&&u.push("clearfix"),u},registerContainer:function(e,t){n[e.toLowerCase()]=t},registerComponent:function(e,n){t[e.toLowerCase()]=n}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.theming=function(e,t){function n(t){var n=document.getElementById("theme"),o=document.createElement("img");n.setAttribute("href",t),o.onerror=function(){e.log.info("Finished loading theme: "+t)},o.src=t}var o=["cerulean","cosmo","cyborg","darkly","flatly","journal","lumen","paper","readable","sandstone","simplex","slate","spacelab","superhero","united","yeti","sf1"];return{apply:function(t){if(null!=o&&t&&o.indexOf(t)!=-1){e.log.info("Switching theme to: "+t);var i=e.cdnUrl+e.settings.theme("url")+"/mw-"+t+".css";n(i)}else e.log.error(t+" theme cannot be found")},custom:function(t){e.log.info("Switching to custom theme: "+t),n(t)}}}(manywho,jQuery),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
manywho.utils=function(e,t){function n(e,t){return t.forEach(function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function o(e,t){for(var n in t)try{Array.isArray(t[n])?e[n]=i(e[n]||[],t[n]):t[n].constructor==Object?e[n]=o(e[n],t[n]):t.hasOwnProperty(n)&&(e[n]=t[n])}catch(s){e[n]=t[n]}return e}function i(e,t){return t.forEach(function(t){e.push(t)}),e}return{getNumber:function(e){var t=0;return null!=e&&(t=parseFloat(e),!isNaN(t)&&isFinite(e)||(t=0)),t},replaceBrowserUrl:function(t){if(history&&history.replaceState){var n=e.utils.parseQueryString(window.location.search.substring(1)),o=t.joinFlowUri,i=["tenant-id","flow-id","flow-version-id","navigation-element-id","join","initialization","authorization"];for(var s in n)i.indexOf(s)==-1&&(o+="&"+s+"="+n[s]);try{history.replaceState(t.stateToken,"Title",o)}catch(a){e.log.error(a)}}},parseQueryString:function(e){var t,n,o,i,s={};for(t=e.split("&"),o=0,i=t.length;o<i;o++)n=t[o].split("="),s[n[0]]=n[1];return s},extend:function(e,t,i){return e?(t&&(Array.isArray(t)||(t=[t]),2==arguments.length?e=n(e,t):3==arguments.length&&i&&t.forEach(function(t){e=o(e,t)})),e):{}},extendObjectData:function(t,n){if(n){if(!t)return t=[],void t.push(n[0]);n.forEach(function(n){t&&t.length>0&&t.forEach(function(t){e.utils.isEqual(t.developerName,n.developerName,!0)&&(null!=n.contentValue?e.utils.extend(t,n,!0):null!=n.objectData&&(t.objectData=n.objectData))})})}return t},isNullOrWhitespace:function(e){return"undefined"==typeof e||null==e||e.replace(/\s/g,"").length<1},isEqual:function(e,t,n){return!e&&!t||!(!e||!t)&&(n?e.toLowerCase()===t.toLowerCase():e===t)},convertToArray:function(e){var t=null;if(e){t=[];for(prop in e)t.push(e[prop])}return t},contains:function(e,t,n){var o=e.filter(function(e){return e[n]==t});return o&&o.length>0},get:function(e,t,n){var o=e.filter(function(e){return e[n]==t});return o&&o.length>0?o[0]:null},getAll:function(e,t,n){var o=[];for(var i in e)e[i][n]==t&&o.push(e[i]);return o},getFlowKey:function(e,t,n,o,i){var s=Array.prototype.slice.call(arguments);return s.join("_")},getLookUpKey:function(e){return e?[e.split("_")[0],e.split("_")[3]].join("_"):null},extractElement:function(e){return e.split("_")[4]},extractTenantId:function(e){return e.split("_")[0]},extractFlowId:function(e){return e.split("_")[1]},extractFlowVersionId:function(e){return e.split("_")[2]},extractStateId:function(e){return e.split("_")[3]},removeLoadingIndicator:function(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)},isEmbedded:function(){return!document.documentElement.classList.contains("manywho")},isSmallScreen:function(t){var n=e.utils.getLookUpKey(t);return document.getElementById(n).clientWidth<768},getValueByPath:function(e,t){if(!t||""==t)return e;try{for(var n=0,t=t.split("."),o=t.length;n<o;n++){var i=null;for(var s in e)s.toLowerCase()==t[n].toLowerCase()&&(i=s);e=i?e[i]:void 0}return e}catch(a){return}},removeFlowFromDOM:function(t){for(var n=e.utils.getLookUpKey(t),o=document.querySelector(e.settings.global("containerSelector",t,"#manywho")),i=0,s=o.children.length;i<s;i++)o.children[i].id==n&&(ReactDOM.unmountComponentAtNode(o.children[i]),o.removeChild(o.children[i]))},getObjectDataProperty:function(t,n){return t.filter(function(t){return e.utils.isEqual(t.developerName,n,!0)})[0]},setObjectDataProperty:function(t,n,o){var i=t.filter(function(t){return e.utils.isEqual(t.developerName,n,!0)})[0];i&&(i.contentValue=o)},isEmptyObjectData:function(t){return t.objectDataRequest&&t.objectData&&1==t.objectData.length?e.utils.isPlaceholderObjectData(t.objectData):!t.objectData},isPlaceholderObjectData:function(t){if(1==t.length){for(prop in t[0].properties)if(!e.utils.isNullOrWhitespace(t[0].properties[prop].contentValue))return!1;return!0}return!1},debounce:function(e,t,n){var o;return function(){var i=this,s=arguments,a=function(){o=null,n||e.apply(i,s)},r=n&&!o;clearTimeout(o),o=setTimeout(a,t||200),r&&e.apply(i,s)}},removeFlow:function(t){e.model.deleteFlowModel(t),e.utils.removeFlowFromDOM(t),e.settings.remove(t),e.state.remove(t),e.social.remove(t),e.callbacks.remove(t),e.settings.flow("collaboration.isEnabled",t)&&(e.collaboration.leave("Another user",t),e.collaboration.remove(t))}}}(manywho,jQuery),/*!
The MIT License (MIT)

Copyright (c) 2015 Nik Butenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactHeight=t(require("react")):e.ReactHeight=t(e.React)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1)["default"];e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(2),r=o(a),l=n(3),u=r["default"].createClass({displayName:"ReactHeight",propTypes:{children:r["default"].PropTypes.node.isRequired,onHeightReady:r["default"].PropTypes.func.isRequired,hidden:r["default"].PropTypes.bool,dirty:r["default"].PropTypes.bool},getDefaultProps:function(){return{hidden:!1,dirty:!0}},getInitialState:function(){return{height:0,dirty:this.props.dirty}},componentDidMount:function(){var e=this,t=this.wrapper.clientHeight,n=!1;this.setState({height:t,dirty:n},function(){return e.props.onHeightReady(e.state.height)})},componentWillReceiveProps:function(e){var t=e.children,n=e.dirty;(t!==this.props.children||n)&&this.setState({dirty:!0})},shouldComponentUpdate:l.shouldComponentUpdate,componentDidUpdate:function(){var e=this,t=this.wrapper.clientHeight,n=!1;t===this.state.height?this.setState({dirty:n}):this.setState({height:t,dirty:n},function(){return e.props.onHeightReady(e.state.height)})},setWrapperRef:function(e){this.wrapper=e},render:function(){var e=this.props,t=(e.onHeightReady,e.dirty,e.hidden),n=e.children,o=i(e,["onHeightReady","dirty","hidden","children"]),a=this.state.dirty;return t&&!a?null:t?r["default"].createElement("div",{style:{height:0,overflow:"hidden"}},r["default"].createElement("div",s({ref:this.setWrapperRef},o),n)):r["default"].createElement("div",s({ref:this.setWrapperRef},o),n)}});t["default"]=u},function(t,n){t.exports=e},function(e,t,n){"use strict";var o=n(4),i={shouldComponentUpdate:function(e,t){return o(this,e,t)}};e.exports=i},function(e,t,n){"use strict";function o(e,t,n){return!i(e.props,t)||!i(e.state,n)}var i=n(5);e.exports=o},function(e,t){"use strict";function n(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function o(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=0;a<o.length;a++)if(!i.call(t,o[a])||!n(e[o[a]],t[o[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=o}])}),/*!
The MIT License (MIT)

Copyright (c) 2015 React Motion authors

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.ReactMotion=t(require("react")):e.ReactMotion=t(e.React)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="build/",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e["default"]:e}t.__esModule=!0;var i=n(1);t.Motion=o(i);var s=n(10);t.StaggeredMotion=o(s);var a=n(11);t.TransitionMotion=o(a);var r=n(13);t.spring=o(r);var l=n(14);t.presets=o(l);var u=n(15);t.reorderKeys=o(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=n(2),a=o(s),r=n(3),l=o(r),u=n(4),p=o(u),c=n(5),d=o(c),h=n(7),f=o(h),m=n(8),g=o(m),y=n(9),v=o(y),b=1e3/60,w=v["default"].createClass({displayName:"Motion",propTypes:{defaultStyle:y.PropTypes.objectOf(y.PropTypes.number),style:y.PropTypes.objectOf(y.PropTypes.oneOfType([y.PropTypes.number,y.PropTypes.object])).isRequired,children:y.PropTypes.func.isRequired,onRest:y.PropTypes.func},getInitialState:function(){var e=this.props,t=e.defaultStyle,n=e.style,o=t||l["default"](n),i=a["default"](o);return{currentStyle:o,currentVelocity:i,lastIdealStyle:o,lastIdealVelocity:i}},wasAnimating:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyle:null,clearUnreadPropStyle:function(e){var t=!1,n=this.state,o=n.currentStyle,s=n.currentVelocity,a=n.lastIdealStyle,r=n.lastIdealVelocity;for(var l in e)if(e.hasOwnProperty(l)){var u=e[l];"number"==typeof u&&(t||(t=!0,o=i({},o),s=i({},s),a=i({},a),r=i({},r)),o[l]=u,s[l]=0,a[l]=u,r[l]=0)}t&&this.setState({currentStyle:o,currentVelocity:s,lastIdealStyle:a,lastIdealVelocity:r})},startAnimationIfNecessary:function(){var e=this;this.animationID=f["default"](function(){var t=e.props.style;if(g["default"](e.state.currentStyle,t,e.state.currentVelocity))return e.wasAnimating&&e.props.onRest&&e.props.onRest(),e.animationID=null,e.wasAnimating=!1,void(e.accumulatedTime=0);e.wasAnimating=!0;var n=d["default"](),o=n-e.prevTime;if(e.prevTime=n,e.accumulatedTime=e.accumulatedTime+o,e.accumulatedTime>10*b&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();var i=(e.accumulatedTime-Math.floor(e.accumulatedTime/b)*b)/b,s=Math.floor(e.accumulatedTime/b),a={},r={},l={},u={};for(var c in t)if(t.hasOwnProperty(c)){var h=t[c];if("number"==typeof h)l[c]=h,u[c]=0,a[c]=h,r[c]=0;else{for(var f=e.state.lastIdealStyle[c],m=e.state.lastIdealVelocity[c],y=0;y<s;y++){var v=p["default"](b/1e3,f,m,h.val,h.stiffness,h.damping,h.precision);f=v[0],m=v[1]}var w=p["default"](b/1e3,f,m,h.val,h.stiffness,h.damping,h.precision),E=w[0],C=w[1];l[c]=f+(E-f)*i,u[c]=m+(C-m)*i,a[c]=f,r[c]=m}}e.animationID=null,e.accumulatedTime-=s*b,e.setState({currentStyle:l,currentVelocity:u,lastIdealStyle:a,lastIdealVelocity:r}),e.unreadPropStyle=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=d["default"](),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=d["default"](),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(f["default"].cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyle);return e&&v["default"].Children.only(e)}});t["default"]=w,e.exports=t["default"]},function(e,t){"use strict";function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=0);return t}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";function n(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t){"use strict";function n(e,t,n,i,s,a,r){var l=-s*(t-i),u=-a*n,p=l+u,c=n+p*e,d=t+c*e;return Math.abs(c)<r&&Math.abs(d-i)<r?(o[0]=i,o[1]=0,o):(o[0]=d,o[1]=c,o)}t.__esModule=!0,t["default"]=n;var o=[];e.exports=t["default"]},function(e,t,n){(function(t){"use strict";(function(){var n,o,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-i)/1e6},o=t.hrtime,n=function(){var e;return e=o(),1e9*e[0]+e[1]},i=n()):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(void 0)}).call(t,n(6))},function(e,t){"use strict";function n(){u=!1,a.length?l=a.concat(l):p=-1,l.length&&o()}function o(){if(!u){var e=setTimeout(n);u=!0;for(var t=l.length;t;){for(a=l,l=[];++p<t;)a&&a[p].run();p=-1,t=l.length}a=null,u=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function s(){}var a,r=e.exports={},l=[],u=!1,p=-1;r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new i(e,t)),1!==l.length||u||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=s,r.addListener=s,r.once=s,r.off=s,r.removeListener=s,r.removeAllListeners=s,r.emit=s,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){(function(t){"use strict";for(var o=n(5),i="undefined"==typeof window?t:window,s=["moz","webkit"],a="AnimationFrame",r=i["request"+a],l=i["cancel"+a]||i["cancelRequest"+a],u=0;!r&&u<s.length;u++)r=i[s[u]+"Request"+a],l=i[s[u]+"Cancel"+a]||i[s[u]+"CancelRequest"+a];if(!r||!l){var p=0,c=0,d=[],h=1e3/60;r=function(e){if(0===d.length){var t=o(),n=Math.max(0,h-(t-p));p=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(p)}catch(n){setTimeout(function(){throw n},0)}},Math.round(n))}return d.push({handle:++c,callback:e,cancelled:!1}),c},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return r.call(i,e)},e.exports.cancel=function(){l.apply(i,arguments)},e.exports.polyfill=function(){i.requestAnimationFrame=r,i.cancelAnimationFrame=l}}).call(t,function(){return this}())},function(e,t){"use strict";function n(e,t,n){for(var o in t)if(t.hasOwnProperty(o)){if(0!==n[o])return!1;var i="number"==typeof t[o]?t[o]:t[o].val;if(e[o]!==i)return!1}return!0}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){for(var o=0;o<e.length;o++)if(!y["default"](e[o],t[o],n[o]))return!1;return!0}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(2),r=o(a),l=n(3),u=o(l),p=n(4),c=o(p),d=n(5),h=o(d),f=n(7),m=o(f),g=n(8),y=o(g),v=n(9),b=o(v),w=1e3/60,E=b["default"].createClass({displayName:"StaggeredMotion",propTypes:{defaultStyles:v.PropTypes.arrayOf(v.PropTypes.objectOf(v.PropTypes.number)),styles:v.PropTypes.func.isRequired,children:v.PropTypes.func.isRequired},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,o=t||n().map(u["default"]),i=o.map(function(e){return r["default"](e)});return{currentStyles:o,currentVelocities:i,lastIdealStyles:o,lastIdealVelocities:i}},animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=this.state,n=t.currentStyles,o=t.currentVelocities,i=t.lastIdealStyles,a=t.lastIdealVelocities,r=!1,l=0;l<e.length;l++){var u=e[l],p=!1;for(var c in u)if(u.hasOwnProperty(c)){var d=u[c];"number"==typeof d&&(p||(p=!0,r=!0,n[l]=s({},n[l]),o[l]=s({},o[l]),i[l]=s({},i[l]),a[l]=s({},a[l])),n[l][c]=d,o[l][c]=0,i[l][c]=d,a[l][c]=0)}}r&&this.setState({currentStyles:n,currentVelocities:o,lastIdealStyles:i,lastIdealVelocities:a})},startAnimationIfNecessary:function(){var e=this;this.animationID=m["default"](function(){var t=e.props.styles(e.state.lastIdealStyles);if(i(e.state.currentStyles,t,e.state.currentVelocities))return e.animationID=null,void(e.accumulatedTime=0);var n=h["default"](),o=n-e.prevTime;if(e.prevTime=n,e.accumulatedTime=e.accumulatedTime+o,e.accumulatedTime>10*w&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var s=(e.accumulatedTime-Math.floor(e.accumulatedTime/w)*w)/w,a=Math.floor(e.accumulatedTime/w),r=[],l=[],u=[],p=[],d=0;d<t.length;d++){var f=t[d],m={},g={},y={},v={};for(var b in f)if(f.hasOwnProperty(b)){var E=f[b];if("number"==typeof E)m[b]=E,g[b]=0,y[b]=E,v[b]=0;else{for(var C=e.state.lastIdealStyles[d][b],D=e.state.lastIdealVelocities[d][b],R=0;R<a;R++){var T=c["default"](w/1e3,C,D,E.val,E.stiffness,E.damping,E.precision);C=T[0],D=T[1]}var O=c["default"](w/1e3,C,D,E.val,E.stiffness,E.damping,E.precision),x=O[0],S=O[1];m[b]=C+(x-C)*s,g[b]=D+(S-D)*s,y[b]=C,v[b]=D}}u[d]=m,p[d]=g,r[d]=y,l[d]=v}e.animationID=null,e.accumulatedTime-=a*w,e.setState({currentStyles:u,currentVelocities:p,lastIdealStyles:r,lastIdealVelocities:l}),e.unreadPropStyles=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=h["default"](),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=h["default"](),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(m["default"].cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyles);return e&&b["default"].Children.only(e)}});t["default"]=E,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return null==t?e.map(function(e,t){return{key:e.key,data:e.data,style:n[t]}}):e.map(function(e,o){for(var i=0;i<t.length;i++)if(t[i].key===e.key)return{key:t[i].key,data:t[i].data,style:n[o]};return{key:e.key,data:e.data,style:n[o]}})}function s(e,t,n,o){if(o.length!==t.length)return!1;for(var i=0;i<o.length;i++)if(o[i].key!==t[i].key)return!1;for(var i=0;i<o.length;i++)if(!E["default"](e[i],t[i].style,n[i]))return!1;return!0}
//    certainly add c, value of c is willEnter(c)
// loop over merged and construct new current
// dest doesn't change, that's owner's
function a(e,t,n,o,i,s,a,r){for(var l=m["default"](n,o,function(e,n){var o=t(n);return null==o?null:E["default"](i[e],o,s[e])?null:{key:n.key,data:n.data,style:o}}),p=[],c=[],d=[],h=[],f=0;f<l.length;f++){for(var g=l[f],y=null,v=0;v<n.length;v++)if(n[v].key===g.key){y=v;break}if(null==y){var b=e(g);p[f]=b,d[f]=b;var w=u["default"](g.style);c[f]=w,h[f]=w}else p[f]=i[y],d[f]=a[y],c[f]=s[y],h[f]=r[y]}return[l,p,c,d,h]}t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=n(2),u=o(l),p=n(3),c=o(p),d=n(4),h=o(d),f=n(12),m=o(f),g=n(5),y=o(g),v=n(7),b=o(v),w=n(8),E=o(w),C=n(9),D=o(C),R=1e3/60,T=D["default"].createClass({displayName:"TransitionMotion",propTypes:{defaultStyles:C.PropTypes.arrayOf(C.PropTypes.shape({key:C.PropTypes.string.isRequired,data:C.PropTypes.any,style:C.PropTypes.objectOf(C.PropTypes.number).isRequired})),styles:C.PropTypes.oneOfType([C.PropTypes.func,C.PropTypes.arrayOf(C.PropTypes.shape({key:C.PropTypes.string.isRequired,data:C.PropTypes.any,style:C.PropTypes.objectOf(C.PropTypes.oneOfType([C.PropTypes.number,C.PropTypes.object])).isRequired}))]).isRequired,children:C.PropTypes.func.isRequired,willLeave:C.PropTypes.func,willEnter:C.PropTypes.func},getDefaultProps:function(){return{willEnter:function(e){return c["default"](e.style)},willLeave:function(){return null}}},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,o=e.willEnter,i=e.willLeave,s="function"==typeof n?n(t):n,r=void 0;r=null==t?s:t.map(function(e){for(var t=0;t<s.length;t++)if(s[t].key===e.key)return s[t];return e});var l=null==t?s.map(function(e){return c["default"](e.style)}):t.map(function(e){return c["default"](e.style)}),p=null==t?s.map(function(e){return u["default"](e.style)}):t.map(function(e){return u["default"](e.style)}),d=a(o,i,r,s,l,p,l,p),h=d[0],f=d[1],m=d[2],g=d[3],y=d[4];return{currentStyles:f,currentVelocities:m,lastIdealStyles:g,lastIdealVelocities:y,mergedPropsStyles:h}},animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=a(this.props.willEnter,this.props.willLeave,this.state.mergedPropsStyles,e,this.state.currentStyles,this.state.currentVelocities,this.state.lastIdealStyles,this.state.lastIdealVelocities),n=t[0],o=t[1],i=t[2],s=t[3],l=t[4],u=0;u<e.length;u++){var p=e[u].style,c=!1;for(var d in p)if(p.hasOwnProperty(d)){var h=p[d];"number"==typeof h&&(c||(c=!0,o[u]=r({},o[u]),i[u]=r({},i[u]),s[u]=r({},s[u]),l[u]=r({},l[u]),n[u]={key:n[u].key,data:n[u].data,style:r({},n[u].style)}),o[u][d]=h,i[u][d]=0,s[u][d]=h,l[u][d]=0,n[u].style[d]=h)}}this.setState({currentStyles:o,currentVelocities:i,mergedPropsStyles:n,lastIdealStyles:s,lastIdealVelocities:l})},startAnimationIfNecessary:function(){var e=this;this.animationID=b["default"](function(){var t=e.props.styles,n="function"==typeof t?t(i(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):t;if(s(e.state.currentStyles,n,e.state.currentVelocities,e.state.mergedPropsStyles))return e.animationID=null,void(e.accumulatedTime=0);var o=y["default"](),r=o-e.prevTime;if(e.prevTime=o,e.accumulatedTime=e.accumulatedTime+r,e.accumulatedTime>10*R&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var l=(e.accumulatedTime-Math.floor(e.accumulatedTime/R)*R)/R,u=Math.floor(e.accumulatedTime/R),p=a(e.props.willEnter,e.props.willLeave,e.state.mergedPropsStyles,n,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),c=p[0],d=p[1],f=p[2],m=p[3],g=p[4],v=0;v<c.length;v++){var b=c[v].style,w={},E={},C={},D={};for(var T in b)if(b.hasOwnProperty(T)){var O=b[T];if("number"==typeof O)w[T]=O,E[T]=0,C[T]=O,D[T]=0;else{for(var x=m[v][T],S=g[v][T],N=0;N<u;N++){var I=h["default"](R/1e3,x,S,O.val,O.stiffness,O.damping,O.precision);x=I[0],S=I[1]}var k=h["default"](R/1e3,x,S,O.val,O.stiffness,O.damping,O.precision),M=k[0],P=k[1];w[T]=x+(M-x)*l,E[T]=S+(P-S)*l,C[T]=x,D[T]=S}}m[v]=C,g[v]=D,d[v]=w,f[v]=E}e.animationID=null,e.accumulatedTime-=u*R,e.setState({currentStyles:d,currentVelocities:f,lastIdealStyles:m,lastIdealVelocities:g,mergedPropsStyles:c}),e.unreadPropStyles=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=y["default"](),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),"function"==typeof e.styles?this.unreadPropStyles=e.styles(i(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):this.unreadPropStyles=e.styles,null==this.animationID&&(this.prevTime=y["default"](),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(b["default"].cancel(this.animationID),this.animationID=null)},render:function(){var e=i(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&D["default"].Children.only(t)}});t["default"]=T,e.exports=t["default"]},function(e,t){"use strict";function n(e,t,n){for(var o={},i=0;i<e.length;i++)o[e[i].key]=i;for(var s={},i=0;i<t.length;i++)s[t[i].key]=i;for(var a=[],i=0;i<t.length;i++)a[i]=t[i];for(var i=0;i<e.length;i++)if(!s.hasOwnProperty(e[i].key)){var r=n(i,e[i]);null!=r&&a.push(r)}return a.sort(function(e,n){var i=s[e.key],a=s[n.key],r=o[e.key],l=o[n.key];if(null!=i&&null!=a)return s[e.key]-s[n.key];if(null!=r&&null!=l)return o[e.key]-o[n.key];if(null!=i){for(var u=0;u<t.length;u++){var p=t[u].key;if(o.hasOwnProperty(p)){if(i<s[p]&&l>o[p])return-1;if(i>s[p]&&l<o[p])return 1}}return 1}for(var u=0;u<t.length;u++){var p=t[u].key;if(o.hasOwnProperty(p)){if(a<s[p]&&r>o[p])return 1;if(a>s[p]&&r<o[p])return-1}}return-1})}t.__esModule=!0,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return s({},l,t,{val:e})}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t["default"]=i;var a=n(14),r=o(a),l=s({},r["default"].noWobble,{precision:.01});e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t["default"]},function(e,t,n){(function(n){"use strict";function o(){"development"===n.env.NODE_ENV&&(i||(i=!0,console.error("`reorderKeys` has been removed, since it is no longer needed for TransitionMotion's new styles array API.")))}t.__esModule=!0,t["default"]=o;var i=!1;e.exports=t["default"]}).call(t,n(6))}])}),/*!
The MIT License (MIT)

Copyright (c) 2015 Nik Butenko

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-motion"),require("react-height")):"function"==typeof define&&define.amd?define(["react","react-motion","react-height"],t):"object"==typeof exports?exports.ReactCollapse=t(require("react"),require("react-motion"),require("react-height")):e.ReactCollapse=t(e.React,e.ReactMotion,e.ReactHeight)}(this,function(e,t,n){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=n(1)["default"];e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(2),r=o(a),l=n(3),u=n(6),p=n(7),c=o(p),d=.5,h=function(e){return Math.max(0,parseFloat(e)).toFixed(1)},f=r["default"].createClass({displayName:"Collapse",propTypes:{isOpened:r["default"].PropTypes.bool.isRequired,children:r["default"].PropTypes.node.isRequired,fixedHeight:r["default"].PropTypes.number,style:r["default"].PropTypes.object,springConfig:r["default"].PropTypes.objectOf(r["default"].PropTypes.number),keepCollapsedContent:r["default"].PropTypes.bool,onRest:r["default"].PropTypes.func,onHeightReady:r["default"].PropTypes.func},getDefaultProps:function(){return{fixedHeight:-1,style:{},keepCollapsedContent:!1,onHeightReady:function(){}}},getInitialState:function(){return{height:-1,isOpenedChanged:!1}},componentWillMount:function(){this.height=h(0),this.renderStatic=!0},componentWillReceiveProps:function(e){var t=e.isOpened;this.setState({isOpenedChanged:t!==this.props.isOpened})},shouldComponentUpdate:l.shouldComponentUpdate,componentDidUpdate:function(e){var t=e.isOpened;if(t!==this.props.isOpened){var n=this.props.isOpened?this.state.height:0;this.props.onHeightReady(n)}},onHeightReady:function m(e){var t=this.props,n=t.isOpened,o=t.keepCollapsedContent,m=t.onHeightReady;this.renderStatic&&n&&(this.height=h(e)),o?this.setState({height:e}):this.setState({height:n||!this.renderStatic?e:0});var i=n?e:0;this.state.height!==i&&m(i)},getMotionHeight:function(e){var t=this.props,n=t.isOpened,o=t.springConfig,i=this.state.isOpenedChanged,a=n?Math.max(0,parseFloat(e)).toFixed(1):h(0),r=!i&&!n||this.height===a,l=(0,u.spring)(n?Math.max(0,e):0,s({precision:d},o)),p=n?Math.max(0,e):0;return r?p:l},renderFixed:function(){var e=this,t=this.props,n=(t.springConfig,t.onHeightReady,t.onRest,t.isOpened),o=t.style,a=t.children,l=t.fixedHeight,p=t.keepCollapsedContent,c=i(t,["springConfig","onHeightReady","onRest","isOpened","style","children","fixedHeight","keepCollapsedContent"]);if(this.renderStatic){this.renderStatic=!1;var d={overflow:"hidden",height:n?l:0};return p||n?(this.height=h(l),r["default"].createElement("div",s({style:s({},d,o)},c),a)):null}return r["default"].createElement(u.Motion,{defaultStyle:{height:n?0:l},style:{height:this.getMotionHeight(l)}},function(t){var i=t.height;if(e.height=h(i),!p&&!n&&e.height===h(0))return null;var l={overflow:"hidden",height:i};return r["default"].createElement("div",s({style:s({},l,o)},c),a)})},render:function(){var e=this,t=this.props,n=(t.springConfig,t.onHeightReady,t.isOpened),o=t.style,a=t.children,l=t.fixedHeight,p=t.keepCollapsedContent,d=t.onRest,f=i(t,["springConfig","onHeightReady","isOpened","style","children","fixedHeight","keepCollapsedContent","onRest"]);if(l>-1)return this.renderFixed();var m=this.renderStatic,g=this.state.height,y=parseFloat(g).toFixed(1);g>-1&&m&&(this.renderStatic=!1);var v=r["default"].createElement(c["default"],{onHeightReady:this.onHeightReady},a);if(m){var b=n?{height:"auto"}:{overflow:"hidden",height:0};return!n&&g>-1?p?r["default"].createElement("div",s({style:s({height:0,overflow:"hidden"},o)},f),v):null:r["default"].createElement("div",s({style:s({},b,o)},f),v)}return r["default"].createElement(u.Motion,{defaultStyle:{height:Math.max(0,g)},onRest:d,style:{height:this.getMotionHeight(g)}},function(t){if(e.height=h(t.height),!n&&"0.0"===e.height)return p?r["default"].createElement("div",s({style:s({height:0,overflow:"hidden"},o)},f),v):null;var i=n&&e.height===y?{height:"auto"}:{height:t.height,overflow:"hidden"};return r["default"].createElement("div",s({style:s({},i,o)},f),v)})}});t["default"]=f},function(t,n){t.exports=e},function(e,t,n){"use strict";var o=n(4),i={shouldComponentUpdate:function(e,t){return o(this,e,t)}};e.exports=i},function(e,t,n){"use strict";function o(e,t,n){return!i(e.props,t)||!i(e.state,n)}var i=n(5);e.exports=o},function(e,t){"use strict";function n(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function o(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=0;a<o.length;a++)if(!i.call(t,o[a])||!n(e[o[a]],t[o[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;e.exports=o},function(e,n){e.exports=t},function(e,t){e.exports=n}])}),/*!
The MIT License (MIT)

Copyright (c) 2016 Jed Watson

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.AutosizeInput=e()}}(function(){return function e(t,n,o){function i(a,r){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return i(n?n:e)},p,p.exports,e,t,n,o)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){(function(e){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,i={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},s=o.createClass({displayName:"AutosizeInput",propTypes:{className:o.PropTypes.string,defaultValue:o.PropTypes.any,inputClassName:o.PropTypes.string,inputStyle:o.PropTypes.object,minWidth:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string]),onAutosize:o.PropTypes.func,onChange:o.PropTypes.func,placeholder:o.PropTypes.string,placeholderIsMinWidth:o.PropTypes.bool,style:o.PropTypes.object,value:o.PropTypes.any},getDefaultProps:function(){return{minWidth:1}},getInitialState:function(){return{inputWidth:this.props.minWidth}},componentDidMount:function(){this.copyInputStyles(),this.updateInputWidth()},componentDidUpdate:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()},copyInputStyles:function(){if(this.isMounted()&&window.getComputedStyle){var e=window.getComputedStyle(this.refs.input);if(e){var t=this.refs.sizer;if(t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,this.props.placeholder){var n=this.refs.placeholderSizer;n.style.fontSize=e.fontSize,n.style.fontFamily=e.fontFamily,n.style.fontWeight=e.fontWeight,n.style.fontStyle=e.fontStyle,n.style.letterSpacing=e.letterSpacing}}}},updateInputWidth:function(){if(this.isMounted()&&"undefined"!=typeof this.refs.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.refs.sizer.scrollWidth,this.refs.placeholderSizer.scrollWidth)+2:this.refs.sizer.scrollWidth+2,e<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}},getInput:function(){return this.refs.input},focus:function(){this.refs.input.focus()},blur:function(){this.refs.input.blur()},select:function(){this.refs.input.select()},render:function(){var e=[this.props.defaultValue,this.props.value,""].reduce(function(e,t){return null!==e&&void 0!==e?e:t}),t=this.props.style||{};t.display||(t.display="inline-block");var s=n({},this.props.inputStyle);s.width=this.state.inputWidth+"px",s.boxSizing="content-box";var a=n({},this.props);return a.className=this.props.inputClassName,a.style=s,delete a.inputClassName,delete a.inputStyle,delete a.minWidth,delete a.placeholderIsMinWidth,o.createElement("div",{className:this.props.className,style:t},o.createElement("input",n({},a,{ref:"input"})),o.createElement("div",{ref:"sizer",style:i},e),this.props.placeholder?o.createElement("div",{ref:"placeholderSizer",style:i},this.props.placeholder):null)}});t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});/*!
The MIT License (MIT)

Copyright (c) 2015 Felix Rieseberg

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
var Dropzone=React.createClass({displayName:"Dropzone",getDefaultProps:function(){return{supportClick:!0,multiple:!0}},getInitialState:function(){return{isDragActive:!1}},propTypes:{onDrop:React.PropTypes.func.isRequired,onDragOver:React.PropTypes.func,onDragLeave:React.PropTypes.func,size:React.PropTypes.number,width:React.PropTypes.number,height:React.PropTypes.number,style:React.PropTypes.object,supportClick:React.PropTypes.bool,accept:React.PropTypes.string,multiple:React.PropTypes.bool},onDragLeave:function(e){this.setState({isDragActive:!1}),this.props.onDragLeave&&this.props.onDragLeave(e)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy";var t=e.dataTransfer.effectAllowed;"all"!==t&&"uninitialized"!==t||this.setState({isDragActive:!0}),this.props.onDragOver&&this.props.onDragOver(e)},onDrop:function(e){e.preventDefault(),this.setState({isDragActive:!1});var t;e.dataTransfer?t=e.dataTransfer.files:e.target&&(t=e.target.files);for(var n=this.props.multiple?t.length:1,o=0;o<n;o++)t[o].preview=URL.createObjectURL(t[o]);this.props.onDrop&&(t=Array.prototype.slice.call(t,0,n),this.props.onDrop(t,e))},onClick:function(){this.props.supportClick===!0&&this.open()},open:function(){var e=this.refs.fileInput.getDOMNode();e.value=null,e.click()},render:function(){var e=this.props.className||"dropzone";this.state.isDragActive&&(e+=" active");var t={};return this.props.style?t=this.props.style:this.props.className||(t={width:this.props.width||this.props.size||100,height:this.props.height||this.props.size||100,borderStyle:this.state.isDragActive?"solid":"dashed"}),React.createElement("div",{className:e,style:t,onClick:this.onClick,onTouchEnd:this.onClick,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop},React.createElement("input",{style:{display:"none"},type:"file",multiple:this.props.multiple,ref:"fileInput",onChange:this.onDrop,accept:this.props.accept}),this.props.children)}});/*! jquery-textcomplete - v0.5.1 - 2015-06-08 */
if(/*!
  Copyright (c) 2015 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
function(){"use strict";function e(){for(var n="",o=0;o<arguments.length;o++){var i=arguments[o];if(i){var s=typeof i;if("string"===s||"number"===s)n+=" "+i;else if(Array.isArray(i))n+=" "+e.apply(null,i);else if("object"===s)for(var a in i)t.call(i,a)&&i[a]&&(n+=" "+a)}}return n.substr(1)}var t={}.hasOwnProperty;"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",function(){return e}):window.classNames=e}(),/*!
The MIT License (MIT)

Copyright (c) 2016 Jed Watson

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Select=e()}}(function(){return function e(t,n,o){function i(a,r){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return i(n?n:e)},p,p.exports,e,t,n,o)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){t.exports=function(e){var t={},n=arguments[1];if("string"==typeof n){n={};for(var o=1;o<arguments.length;o++)n[arguments[o]]=!0}for(var i in e)n[i]||(t[i]=e[i]);return t}},{}],2:[function(e,t,n){(function(n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e&&"object"!=typeof e&&(e={}),e?e:null}function s(e,t,n){e&&(e[t]=n)}function a(e,t){if(e)for(var n=t.length;n>=0;--n){var o=t.slice(0,n);if(e[o]&&(t===o||e[o].complete))return e[o]}}function r(e,t){if(e&&"function"==typeof e.then)return e.then(function(e){t(null,e)},function(e){t(e)})}var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},u="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,p=o(u),c=e("./Select"),d=o(c),h=e("./utils/stripDiacritics"),f=o(h),m=0,g=p["default"].PropTypes.oneOfType([p["default"].PropTypes.string,p["default"].PropTypes.node]),y=p["default"].createClass({displayName:"Async",propTypes:{cache:p["default"].PropTypes.any,ignoreAccents:p["default"].PropTypes.bool,ignoreCase:p["default"].PropTypes.bool,isLoading:p["default"].PropTypes.bool,loadOptions:p["default"].PropTypes.func.isRequired,loadingPlaceholder:p["default"].PropTypes.string,minimumInput:p["default"].PropTypes.number,noResultsText:g,onInputChange:p["default"].PropTypes.func,placeholder:g,searchPromptText:g,searchingText:p["default"].PropTypes.string},getDefaultProps:function(){return{cache:!0,ignoreAccents:!0,ignoreCase:!0,loadingPlaceholder:"Loading...",minimumInput:0,searchingText:"Searching...",searchPromptText:"Type to search"}},getInitialState:function(){return{cache:i(this.props.cache),isLoading:!1,options:[]}},componentWillMount:function(){this._lastInput=""},componentDidMount:function(){this.loadOptions("")},componentWillReceiveProps:function(e){e.cache!==this.props.cache&&this.setState({cache:i(e.cache)})},focus:function(){this.refs.select.focus()},resetState:function(){this._currentRequestId=-1,this.setState({isLoading:!1,options:[]})},getResponseHandler:function(e){var t=this,n=this._currentRequestId=m++;return function(o,i){if(o)throw o;t.isMounted()&&(s(t.state.cache,e,i),n===t._currentRequestId&&t.setState({isLoading:!1,options:i&&i.options||[]}))}},loadOptions:function(e){if(this.props.onInputChange){var t=this.props.onInputChange(e);null!=t&&(e=""+t)}if(this.props.ignoreAccents&&(e=(0,f["default"])(e)),this.props.ignoreCase&&(e=e.toLowerCase()),this._lastInput=e,e.length<this.props.minimumInput)return this.resetState();var n=a(this.state.cache,e);if(n)return this.setState({options:n.options});this.setState({isLoading:!0});var o=this.getResponseHandler(e),i=r(this.props.loadOptions(e,o),o);return i?i.then(function(){return e}):e},render:function(){var e=this.props.noResultsText,t=this.state,n=t.isLoading,o=t.options;this.props.isLoading&&(n=!0);var i=n?this.props.loadingPlaceholder:this.props.placeholder;return n?e=this.props.searchingText:!o.length&&this._lastInput.length<this.props.minimumInput&&(e=this.props.searchPromptText),p["default"].createElement(d["default"],l({},this.props,{ref:"select",isLoading:n,noResultsText:e,onInputChange:this.loadOptions,options:o,placeholder:i}))}});t.exports=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Select":4,"./utils/stripDiacritics":6}],3:[function(e,t,n){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,i=n(o),s="undefined"!=typeof window?window.classNames:"undefined"!=typeof e?e.classNames:null,a=n(s),r=i["default"].createClass({displayName:"Option",propTypes:{children:i["default"].PropTypes.node,className:i["default"].PropTypes.string,instancePrefix:i["default"].PropTypes.string.isRequired,isDisabled:i["default"].PropTypes.bool,isFocused:i["default"].PropTypes.bool,isSelected:i["default"].PropTypes.bool,onFocus:i["default"].PropTypes.func,onSelect:i["default"].PropTypes.func,onUnfocus:i["default"].PropTypes.func,option:i["default"].PropTypes.object.isRequired,optionIndex:i["default"].PropTypes.number},blockEvent:function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)},handleMouseDown:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)},handleMouseEnter:function(e){this.onFocus(e)},handleMouseMove:function(e){this.onFocus(e)},handleTouchEnd:function(e){this.dragging||this.handleMouseDown(e)},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},onFocus:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)},render:function(){var e=this.props,t=e.option,n=e.instancePrefix,o=e.optionIndex,s=(0,a["default"])(this.props.className,t.className);return t.disabled?i["default"].createElement("div",{className:s,onMouseDown:this.blockEvent,onClick:this.blockEvent},this.props.children):i["default"].createElement("div",{className:s,style:t.style,role:"option",onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,id:n+"-option-"+o,title:t.title},this.props.children)}});t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return"object"==typeof e?JSON.stringify(e):e}Object.defineProperty(n,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l="undefined"!=typeof window?window.React:"undefined"!=typeof o?o.React:null,u=i(l),p="undefined"!=typeof window?window.ReactDOM:"undefined"!=typeof o?o.ReactDOM:null,c=i(p),d="undefined"!=typeof window?window.AutosizeInput:"undefined"!=typeof o?o.AutosizeInput:null,h=i(d),f="undefined"!=typeof window?window.classNames:"undefined"!=typeof o?o.classNames:null,m=i(f),g=e("blacklist"),y=i(g),v=e("./utils/stripDiacritics"),b=i(v),w=e("./Async"),E=i(w),C=e("./Option"),D=i(C),R=e("./Value"),T=i(R),O=u["default"].PropTypes.oneOfType([u["default"].PropTypes.string,u["default"].PropTypes.node]),x=1,S=u["default"].createClass({displayName:"Select",propTypes:{addLabelText:u["default"].PropTypes.string,allowCreate:u["default"].PropTypes.bool,"aria-label":u["default"].PropTypes.string,"aria-labelledby":u["default"].PropTypes.string,autoBlur:u["default"].PropTypes.bool,autofocus:u["default"].PropTypes.bool,autosize:u["default"].PropTypes.bool,backspaceRemoves:u["default"].PropTypes.bool,backspaceToRemoveMessage:u["default"].PropTypes.string,className:u["default"].PropTypes.string,clearAllText:O,clearValueText:O,clearable:u["default"].PropTypes.bool,delimiter:u["default"].PropTypes.string,disabled:u["default"].PropTypes.bool,escapeClearsValue:u["default"].PropTypes.bool,filterOption:u["default"].PropTypes.func,filterOptions:u["default"].PropTypes.any,ignoreAccents:u["default"].PropTypes.bool,ignoreCase:u["default"].PropTypes.bool,inputProps:u["default"].PropTypes.object,inputRenderer:u["default"].PropTypes.func,isLoading:u["default"].PropTypes.bool,joinValues:u["default"].PropTypes.bool,labelKey:u["default"].PropTypes.string,matchPos:u["default"].PropTypes.string,matchProp:u["default"].PropTypes.string,menuBuffer:u["default"].PropTypes.number,menuContainerStyle:u["default"].PropTypes.object,menuRenderer:u["default"].PropTypes.func,menuStyle:u["default"].PropTypes.object,multi:u["default"].PropTypes.bool,name:u["default"].PropTypes.string,newOptionCreator:u["default"].PropTypes.func,noResultsText:O,onBlur:u["default"].PropTypes.func,onBlurResetsInput:u["default"].PropTypes.bool,onChange:u["default"].PropTypes.func,onClose:u["default"].PropTypes.func,onFocus:u["default"].PropTypes.func,onInputChange:u["default"].PropTypes.func,onMenuScrollToBottom:u["default"].PropTypes.func,onOpen:u["default"].PropTypes.func,onValueClick:u["default"].PropTypes.func,openAfterFocus:u["default"].PropTypes.bool,openOnFocus:u["default"].PropTypes.bool,optionClassName:u["default"].PropTypes.string,optionComponent:u["default"].PropTypes.func,optionRenderer:u["default"].PropTypes.func,options:u["default"].PropTypes.array,pageSize:u["default"].PropTypes.number,placeholder:O,required:u["default"].PropTypes.bool,resetValue:u["default"].PropTypes.any,scrollMenuIntoView:u["default"].PropTypes.bool,searchable:u["default"].PropTypes.bool,simpleValue:u["default"].PropTypes.bool,style:u["default"].PropTypes.object,tabIndex:u["default"].PropTypes.string,tabSelectsValue:u["default"].PropTypes.bool,value:u["default"].PropTypes.any,valueComponent:u["default"].PropTypes.func,valueKey:u["default"].PropTypes.string,valueRenderer:u["default"].PropTypes.func,wrapperStyle:u["default"].PropTypes.object},statics:{Async:E["default"]},getDefaultProps:function(){return{addLabelText:'Add "{label}"?',autosize:!0,allowCreate:!1,backspaceRemoves:!0,backspaceToRemoveMessage:"Press backspace to remove {label}",clearable:!0,clearAllText:"Clear all",clearValueText:"Clear value",delimiter:",",disabled:!1,escapeClearsValue:!0,filterOptions:!0,ignoreAccents:!0,ignoreCase:!0,inputProps:{},isLoading:!1,joinValues:!1,labelKey:"label",matchPos:"any",matchProp:"any",menuBuffer:0,multi:!1,noResultsText:"No results found",onBlurResetsInput:!0,openAfterFocus:!1,optionComponent:D["default"],pageSize:5,placeholder:"Select...",required:!1,resetValue:null,scrollMenuIntoView:!0,searchable:!0,simpleValue:!1,tabSelectsValue:!0,valueComponent:T["default"],valueKey:"value"}},getInitialState:function(){return{inputValue:"",isFocused:!1,isLoading:!1,isOpen:!1,isPseudoFocused:!1,required:!1}},componentWillMount:function(){this._instancePrefix="react-select-"+ ++x+"-";var e=this.getValueArray(this.props.value);this.props.required&&this.setState({required:this.handleRequired(e[0],this.props.multi)})},componentDidMount:function(){this.props.autofocus&&this.focus()},componentWillReceiveProps:function(e){var t=this.getValueArray(e.value,e);e.required&&this.setState({required:this.handleRequired(t[0],e.multi)})},componentWillUpdate:function(e,t){if(t.isOpen!==this.state.isOpen){var n=t.isOpen?e.onOpen:e.onClose;n&&n()}},componentDidUpdate:function(e,t){if(this.refs.menu&&this.refs.focused&&this.state.isOpen&&!this.hasScrolledToOption){var n=c["default"].findDOMNode(this.refs.focused),o=c["default"].findDOMNode(this.refs.menu);o.scrollTop=n.offsetTop,this.hasScrolledToOption=!0}else this.state.isOpen||(this.hasScrolledToOption=!1);if(this._scrollToFocusedOptionOnUpdate&&this.refs.focused&&this.refs.menu){this._scrollToFocusedOptionOnUpdate=!1;var i=c["default"].findDOMNode(this.refs.focused),s=c["default"].findDOMNode(this.refs.menu),a=i.getBoundingClientRect(),r=s.getBoundingClientRect();(a.bottom>r.bottom||a.top<r.top)&&(s.scrollTop=i.offsetTop+i.clientHeight-s.offsetHeight)}if(this.props.scrollMenuIntoView&&this.refs.menuContainer){var l=this.refs.menuContainer.getBoundingClientRect();window.innerHeight<l.bottom+this.props.menuBuffer&&window.scrollBy(0,l.bottom+this.props.menuBuffer-window.innerHeight)}e.disabled!==this.props.disabled&&(this.setState({isFocused:!1}),this.closeMenu())},focus:function(){this.refs.input&&(this.refs.input.focus(),this.props.openAfterFocus&&this.setState({isOpen:!0}))},blurInput:function(){this.refs.input&&this.refs.input.blur()},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},handleTouchEnd:function(e){this.dragging||this.handleMouseDown(e)},handleTouchEndClearValue:function(e){this.dragging||this.clearValue(e)},handleMouseDown:function(e){if(!(this.props.disabled||"mousedown"===e.type&&0!==e.button)&&"INPUT"!==e.target.tagName){if(e.stopPropagation(),e.preventDefault(),!this.props.searchable)return this.focus(),this.setState({isOpen:!this.state.isOpen});if(this.state.isFocused){this.focus();var t=this.refs.input;"function"==typeof t.getInput&&(t=t.getInput()),t.value="",this.setState({isOpen:!0,isPseudoFocused:!1})}else this._openAfterFocus=!0,this.focus()}},handleMouseDownOnArrow:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||this.state.isOpen&&(e.stopPropagation(),e.preventDefault(),this.closeMenu())},handleMouseDownOnMenu:function(e){this.props.disabled||"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this._openAfterFocus=!0,this.focus())},closeMenu:function(){this.setState({isOpen:!1,isPseudoFocused:this.state.isFocused&&!this.props.multi,inputValue:""}),this.hasScrolledToOption=!1},handleInputFocus:function(e){var t=this.state.isOpen||this._openAfterFocus||this.props.openOnFocus;this.props.onFocus&&this.props.onFocus(e),this.setState({isFocused:!0,isOpen:t}),this._openAfterFocus=!1},handleInputBlur:function(e){if(this.refs.menu&&(this.refs.menu===document.activeElement||this.refs.menu.contains(document.activeElement)))return void this.focus();this.props.onBlur&&this.props.onBlur(e);var t={isFocused:!1,isOpen:!1,isPseudoFocused:!1};this.props.onBlurResetsInput&&(t.inputValue=""),this.setState(t)},handleInputChange:function(e){var t=e.target.value;if(this.state.inputValue!==e.target.value&&this.props.onInputChange){var n=this.props.onInputChange(t);null!=n&&"object"!=typeof n&&(t=""+n)}this.setState({isOpen:"undefined"==typeof this.props.openOnInputChange||this.props.openOnInputChange,isPseudoFocused:!1,inputValue:t})},handleKeyDown:function(e){if(!this.props.disabled){switch(e.keyCode){case 8:return void(!this.state.inputValue&&this.props.backspaceRemoves&&(e.preventDefault(),this.popValue()));case 9:if(e.shiftKey||!this.state.isOpen||!this.props.tabSelectsValue)return;return void this.selectFocusedOption();case 13:if(!this.state.isOpen)return;e.stopPropagation(),this.selectFocusedOption();break;case 27:this.state.isOpen?(this.closeMenu(),e.stopPropagation()):this.props.clearable&&this.props.escapeClearsValue&&(this.clearValue(e),e.stopPropagation());break;case 38:this.focusPreviousOption();break;case 40:this.focusNextOption();break;case 33:this.focusPageUpOption();break;case 34:this.focusPageDownOption();break;case 35:this.focusEndOption();break;case 36:this.focusStartOption();break;default:return}e.preventDefault()}},handleValueClick:function(e,t){this.props.onValueClick&&this.props.onValueClick(e,t)},handleMenuScroll:function(e){if(this.props.onMenuScrollToBottom){var t=e.target;t.scrollHeight>t.offsetHeight&&!(t.scrollHeight-t.offsetHeight-t.scrollTop)&&this.props.onMenuScrollToBottom()}},handleRequired:function(e,t){return!e||(t?0===e.length:0===Object.keys(e).length)},getOptionLabel:function(e){return e[this.props.labelKey]},getValueArray:function(e,t){var n=this,o="object"==typeof t?t:this.props;if(o.multi){if("string"==typeof e&&(e=e.split(o.delimiter)),!Array.isArray(e)){if(null===e||void 0===e)return[];e=[e]}return e.map(function(e){return n.expandValue(e,o)}).filter(function(e){return e})}var i=this.expandValue(e,o);return i?[i]:[]},expandValue:function(e,t){if("string"!=typeof e&&"number"!=typeof e)return e;var n=t.options,o=t.valueKey;if(n)for(var i=0;i<n.length;i++)if(n[i][o]===e)return n[i]},setValue:function(e){var t=this;if(this.props.autoBlur&&this.blurInput(),this.props.onChange){if(this.props.required){var n=this.handleRequired(e,this.props.multi);this.setState({required:n})}this.props.simpleValue&&e&&(e=this.props.multi?e.map(function(e){return e[t.props.valueKey]}).join(this.props.delimiter):e[this.props.valueKey]),this.props.onChange(e)}},selectValue:function(e){var t=this;this.hasScrolledToOption=!1,this.props.multi?this.setState({inputValue:"",focusedIndex:null},function(){t.addValue(e)}):this.setState({isOpen:!1,inputValue:"",isPseudoFocused:this.state.isFocused},function(){t.setValue(e)})},addValue:function(e){var t=this.getValueArray(this.props.value);this.setValue(t.concat(e))},popValue:function(){var e=this.getValueArray(this.props.value);e.length&&e[e.length-1].clearableValue!==!1&&this.setValue(e.slice(0,e.length-1))},removeValue:function(e){var t=this.getValueArray(this.props.value);this.setValue(t.filter(function(t){return t!==e})),this.focus()},clearValue:function(e){e&&"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.setValue(this.props.resetValue),this.setState({isOpen:!1,inputValue:""},this.focus))},focusOption:function(e){this.setState({focusedOption:e})},focusNextOption:function(){this.focusAdjacentOption("next")},focusPreviousOption:function(){this.focusAdjacentOption("previous")},focusPageUpOption:function(){this.focusAdjacentOption("page_up")},focusPageDownOption:function(){this.focusAdjacentOption("page_down")},focusStartOption:function(){this.focusAdjacentOption("start")},focusEndOption:function(){this.focusAdjacentOption("end")},focusAdjacentOption:function(e){var t=this._visibleOptions.map(function(e,t){return{option:e,index:t}}).filter(function(e){return!e.option.disabled});if(this._scrollToFocusedOptionOnUpdate=!0,!this.state.isOpen)return void this.setState({isOpen:!0,inputValue:"",focusedOption:this._focusedOption||t["next"===e?0:t.length-1].option});if(t.length){for(var n=-1,o=0;o<t.length;o++)if(this._focusedOption===t[o].option){n=o;break}if("next"===e&&n!==-1)n=(n+1)%t.length;else if("previous"===e)n>0?n-=1:n=t.length-1;else if("start"===e)n=0;else if("end"===e)n=t.length-1;else if("page_up"===e){var i=n-this.props.pageSize;n=i<0?0:i}else if("page_down"===e){var i=n+this.props.pageSize;n=i>t.length-1?t.length-1:i}n===-1&&(n=0),this.setState({focusedIndex:t[n].index,focusedOption:t[n].option})}},selectFocusedOption:function(){if(this._focusedOption)return this.selectValue(this._focusedOption)},renderLoading:function(){if(this.props.isLoading)return u["default"].createElement("span",{className:"Select-loading-zone","aria-hidden":"true"},u["default"].createElement("span",{className:"Select-loading"}))},renderValue:function(e,t){var n=this,o=this.props.valueRenderer||this.getOptionLabel,i=this.props.valueComponent;if(!e.length)return this.state.inputValue?null:u["default"].createElement("div",{className:"Select-placeholder"},this.props.placeholder);var s=this.props.onValueClick?this.handleValueClick:null;return this.props.multi?e.map(function(e,t){return u["default"].createElement(i,{id:n._instancePrefix+"-value-"+t,instancePrefix:n._instancePrefix,disabled:n.props.disabled||e.clearableValue===!1,key:"value-"+t+"-"+e[n.props.valueKey],onClick:s,onRemove:n.removeValue,value:e},o(e),u["default"].createElement("span",{className:"Select-aria-only"}," "))}):this.state.inputValue?void 0:(t&&(s=null),u["default"].createElement(i,{id:this._instancePrefix+"-value-item",disabled:this.props.disabled,instancePrefix:this._instancePrefix,onClick:s,value:e[0]},o(e[0])))},renderInput:function(e,t){if(this.props.inputRenderer)return this.props.inputRenderer();var n,o=(0,m["default"])("Select-input",this.props.inputProps.className),i=!!this.state.isOpen,a=(0,m["default"])((n={},s(n,this._instancePrefix+"-list",i),s(n,this._instancePrefix+"-backspace-remove-message",this.props.multi&&!this.props.disabled&&this.state.isFocused&&!this.state.inputValue),n)),l=r({},this.props.inputProps,{role:"combobox","aria-expanded":""+i,"aria-owns":a,"aria-haspopup":""+i,"aria-activedescendant":i?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value","aria-labelledby":this.props["aria-labelledby"],"aria-label":this.props["aria-label"],className:o,tabIndex:this.props.tabIndex,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus,ref:"input",required:this.state.required});if("undefined"==typeof this.props.inputProps.value&&(l.value=this.state.inputValue),this.props.disabled||!this.props.searchable){var p=(0,y["default"])(this.props.inputProps,"inputClassName");return u["default"].createElement("div",r({},p,{role:"combobox","aria-expanded":i,"aria-owns":i?this._instancePrefix+"-list":this._instancePrefix+"-value","aria-activedescendant":i?this._instancePrefix+"-option-"+t:this._instancePrefix+"-value",className:o,tabIndex:this.props.tabIndex||0,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,ref:"input","aria-readonly":""+!!this.props.disabled,style:{border:0,width:1,display:"inline-block"}}))}return this.props.autosize?u["default"].createElement(h["default"],r({},l,{minWidth:"5px"})):u["default"].createElement("div",{className:o},u["default"].createElement("input",l))},renderClear:function(){if(this.props.clearable&&this.props.value&&(!this.props.multi||this.props.value.length)&&!this.props.disabled&&!this.props.isLoading)return u["default"].createElement("span",{className:"Select-clear-zone",title:this.props.multi?this.props.clearAllText:this.props.clearValueText,"aria-label":this.props.multi?this.props.clearAllText:this.props.clearValueText,onMouseDown:this.clearValue,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEndClearValue},u["default"].createElement("span",{className:"Select-clear",dangerouslySetInnerHTML:{__html:"&times;"}}))},renderArrow:function(){return u["default"].createElement("span",{className:"Select-arrow-zone",onMouseDown:this.handleMouseDownOnArrow},u["default"].createElement("span",{className:"Select-arrow",onMouseDown:this.handleMouseDownOnArrow}))},filterOptions:function(e){var t=this,n=this.state.inputValue,o=this.props.options||[];return"function"==typeof this.props.filterOptions?this.props.filterOptions.call(this,o,n,e):this.props.filterOptions?(this.props.ignoreAccents&&(n=(0,b["default"])(n)),this.props.ignoreCase&&(n=n.toLowerCase()),e&&(e=e.map(function(e){return e[t.props.valueKey]})),o.filter(function(o){if(e&&e.indexOf(o[t.props.valueKey])>-1)return!1;if(t.props.filterOption)return t.props.filterOption.call(t,o,n);if(!n)return!0;var i=String(o[t.props.valueKey]),s=String(o[t.props.labelKey]);return t.props.ignoreAccents&&("label"!==t.props.matchProp&&(i=(0,b["default"])(i)),"value"!==t.props.matchProp&&(s=(0,b["default"])(s))),t.props.ignoreCase&&("label"!==t.props.matchProp&&(i=i.toLowerCase()),"value"!==t.props.matchProp&&(s=s.toLowerCase())),"start"===t.props.matchPos?"label"!==t.props.matchProp&&i.substr(0,n.length)===n||"value"!==t.props.matchProp&&s.substr(0,n.length)===n:"label"!==t.props.matchProp&&i.indexOf(n)>=0||"value"!==t.props.matchProp&&s.indexOf(n)>=0})):o},renderMenu:function(e,t,n){var o=this;if(!e||!e.length)return this.props.noResultsText?u["default"].createElement("div",{className:"Select-noresults"},this.props.noResultsText):null;if(this.props.menuRenderer)return this.props.menuRenderer({focusedOption:n,focusOption:this.focusOption,labelKey:this.props.labelKey,options:e,selectValue:this.selectValue,valueArray:t});var i=function(){var i=o.props.optionComponent,s=o.props.optionRenderer||o.getOptionLabel;return{v:e.map(function(e,a){var r=t&&t.indexOf(e)>-1,l=e===n,p=l?"focused":null,c=(0,m["default"])(o.props.optionClassName,{"Select-option":!0,"is-selected":r,"is-focused":l,"is-disabled":e.disabled});return u["default"].createElement(i,{instancePrefix:o._instancePrefix,optionIndex:a,className:c,isDisabled:e.disabled,isFocused:l,key:"option-"+a+"-"+e[o.props.valueKey],onSelect:o.selectValue,onFocus:o.focusOption,option:e,isSelected:r,ref:p},s(e))})}}();return"object"==typeof i?i.v:void 0},renderHiddenField:function(e){var t=this;if(this.props.name){if(this.props.joinValues){var n=e.map(function(e){return a(e[t.props.valueKey])}).join(this.props.delimiter);return u["default"].createElement("input",{type:"hidden",ref:"value",name:this.props.name,value:n,disabled:this.props.disabled})}return e.map(function(e,n){return u["default"].createElement("input",{key:"hidden."+n,type:"hidden",ref:"value"+n,name:t.props.name,value:a(e[t.props.valueKey]),disabled:t.props.disabled})})}},getFocusableOptionIndex:function(e){var t=this._visibleOptions;if(!t.length)return null;var n=this.state.focusedOption||e;if(n&&!n.disabled){var o=t.indexOf(n);if(o!==-1)return o}for(var i=0;i<t.length;i++)if(!t[i].disabled)return i;return null},renderOuter:function(e,t,n){var o=this.renderMenu(e,t,n);return o?u["default"].createElement("div",{ref:"menuContainer",className:"Select-menu-outer",style:this.props.menuContainerStyle},u["default"].createElement("div",{ref:"menu",role:"listbox",className:"Select-menu",id:this._instancePrefix+"-list",style:this.props.menuStyle,onScroll:this.handleMenuScroll,onMouseDown:this.handleMouseDownOnMenu},o)):null},render:function(){var e=this.getValueArray(this.props.value),t=this._visibleOptions=this.filterOptions(this.props.multi?e:null),n=this.state.isOpen;this.props.multi&&!t.length&&e.length&&!this.state.inputValue&&(n=!1);var o=this.getFocusableOptionIndex(e[0]),i=null;i=null!==o?this._focusedOption=this._visibleOptions[o]:this._focusedOption=null;var s=(0,m["default"])("Select",this.props.className,{"Select--multi":this.props.multi,"Select--single":!this.props.multi,"is-disabled":this.props.disabled,"is-focused":this.state.isFocused,"is-loading":this.props.isLoading,"is-open":n,"is-pseudo-focused":this.state.isPseudoFocused,"is-searchable":this.props.searchable,"has-value":e.length}),a=null;return this.props.multi&&!this.props.disabled&&e.length&&!this.state.inputValue&&this.state.isFocused&&this.props.backspaceRemoves&&(a=u["default"].createElement("span",{id:this._instancePrefix+"-backspace-remove-message",className:"Select-aria-only","aria-live":"assertive"},this.props.backspaceToRemoveMessage.replace("{label}",e[e.length-1][this.props.labelKey]))),u["default"].createElement("div",{ref:"wrapper",className:s,style:this.props.wrapperStyle},this.renderHiddenField(e),u["default"].createElement("div",{ref:"control",className:"Select-control",style:this.props.style,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleTouchEnd,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},u["default"].createElement("span",{className:"Select-multi-value-wrapper",id:this._instancePrefix+"-value"},this.renderValue(e,n),this.renderInput(e,o)),a,this.renderLoading(),this.renderClear(),this.renderArrow()),n?this.renderOuter(t,this.props.multi?null:e,i):null)}});n["default"]=S,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Async":2,"./Option":3,"./Value":5,"./utils/stripDiacritics":6,blacklist:1}],5:[function(e,t,n){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o="undefined"!=typeof window?window.React:"undefined"!=typeof e?e.React:null,i=n(o),s="undefined"!=typeof window?window.classNames:"undefined"!=typeof e?e.classNames:null,a=n(s),r=i["default"].createClass({displayName:"Value",propTypes:{children:i["default"].PropTypes.node,disabled:i["default"].PropTypes.bool,id:i["default"].PropTypes.string,onClick:i["default"].PropTypes.func,onRemove:i["default"].PropTypes.func,value:i["default"].PropTypes.object.isRequired},handleMouseDown:function(e){if("mousedown"!==e.type||0===e.button)return this.props.onClick?(e.stopPropagation(),void this.props.onClick(this.props.value,e)):void(this.props.value.href&&e.stopPropagation())},onRemove:function(e){e.preventDefault(),e.stopPropagation(),this.props.onRemove(this.props.value)},handleTouchEndRemove:function(e){this.dragging||this.onRemove(e)},handleTouchMove:function(e){this.dragging=!0},handleTouchStart:function(e){this.dragging=!1},renderRemoveIcon:function(){if(!this.props.disabled&&this.props.onRemove)return i["default"].createElement("span",{className:"Select-value-icon","aria-hidden":"true",onMouseDown:this.onRemove,onTouchEnd:this.handleTouchEndRemove,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove},"×")},renderLabel:function(){var e="Select-value-label";return this.props.onClick||this.props.value.href?i["default"].createElement("a",{className:e,href:this.props.value.href,target:this.props.value.target,onMouseDown:this.handleMouseDown,onTouchEnd:this.handleMouseDown},this.props.children):i["default"].createElement("span",{className:e,role:"option","aria-selected":"true",id:this.props.id},this.props.children)},render:function(){return i["default"].createElement("div",{className:(0,a["default"])("Select-value",this.props.value.className),style:this.props.value.style,title:this.props.value.title},this.renderRemoveIcon(),this.renderLabel())}});t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"use strict";var o=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g
},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];t.exports=function(e){for(var t=0;t<o.length;t++)e=e.replace(o[t].letters,o[t].base);return e}},{}]},{},[4])(4)}),/*! version : 4.7.14
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
!function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else if("object"==typeof exports)e(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){"use strict";if(!t)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var n=function(n,o){var i,s,a,r,l,u={},p=t().startOf("d"),c=p.clone(),d=!0,h=!1,f=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10}],y=["days","months","years"],v=["top","bottom","auto"],b=["left","right","auto"],w=["default","top","bottom"],E={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},C={},D=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==a.indexOf("Y");case"M":return-1!==a.indexOf("M");case"d":return-1!==a.toLowerCase().indexOf("d");case"h":case"H":return-1!==a.toLowerCase().indexOf("h");case"m":return-1!==a.indexOf("m");case"s":return-1!==a.indexOf("s");default:return!1}},R=function(){return D("h")||D("m")||D("s")},T=function(){return D("y")||D("M")||D("d")},O=function(){var t=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(o.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",o.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(o.icons.next)))),n=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",o.calendarWeeks?"8":"7")));return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(t).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(t.clone()).append(n.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(t.clone()).append(n.clone()))]},x=function(){var t=e("<tr>"),n=e("<tr>"),i=e("<tr>");return D("h")&&(t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(o.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr("data-time-component","hours").attr("data-action","showHours"))),i.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(o.icons.down))))),D("m")&&(D("h")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),i.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(o.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr("data-time-component","minutes").attr("data-action","showMinutes"))),i.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(o.icons.down))))),D("s")&&(D("m")&&(t.append(e("<td>").addClass("separator")),n.append(e("<td>").addClass("separator").html(":")),i.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(o.icons.up)))),n.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr("data-time-component","seconds").attr("data-action","showSeconds"))),i.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1"}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(o.icons.down))))),s||(t.append(e("<td>").addClass("separator")),n.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr("data-action","togglePeriod"))),i.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([t,n,i]))},S=function(){var t=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),n=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),o=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),i=[x()];return D("h")&&i.push(t),D("m")&&i.push(n),D("s")&&i.push(o),i},N=function(){var t=[];return o.showTodayButton&&t.push(e("<td>").append(e("<a>").attr("data-action","today").append(e("<span>").addClass(o.icons.today)))),!o.sideBySide&&T()&&R()&&t.push(e("<td>").append(e("<a>").attr("data-action","togglePicker").append(e("<span>").addClass(o.icons.time)))),o.showClear&&t.push(e("<td>").append(e("<a>").attr("data-action","clear").append(e("<span>").addClass(o.icons.clear)))),o.showClose&&t.push(e("<td>").append(e("<a>").attr("data-action","close").append(e("<span>").addClass(o.icons.close)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))},I=function(){var t=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),n=e("<div>").addClass("datepicker").append(O()),i=e("<div>").addClass("timepicker").append(S()),a=e("<ul>").addClass("list-unstyled"),r=e("<li>").addClass("picker-switch"+(o.collapse?" accordion-toggle":"")).append(N());return o.inline&&t.removeClass("dropdown-menu"),s&&t.addClass("usetwentyfour"),o.sideBySide&&T()&&R()?(t.addClass("timepicker-sbs"),t.append(e("<div>").addClass("row").append(n.addClass("col-sm-6")).append(i.addClass("col-sm-6"))),t.append(r),t):("top"===o.toolbarPlacement&&a.append(r),T()&&a.append(e("<li>").addClass(o.collapse&&R()?"collapse in":"").append(n)),"default"===o.toolbarPlacement&&a.append(r),R()&&a.append(e("<li>").addClass(o.collapse&&T()?"collapse":"").append(i)),"bottom"===o.toolbarPlacement&&a.append(r),t.append(a))},k=function(){var t,i={};return t=n.is("input")||o.inline?n.data():n.find("input").data(),t.dateOptions&&t.dateOptions instanceof Object&&(i=e.extend(!0,i,t.dateOptions)),e.each(o,function(e){var n="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==t[n]&&(i[e]=t[n])}),i},M=function(){var t,i=(h||n).position(),s=(h||n).offset(),a=o.widgetPositioning.vertical,r=o.widgetPositioning.horizontal;if(o.widgetParent)t=o.widgetParent.append(f);else if(n.is("input"))t=n.parent().append(f);else{if(o.inline)return void(t=n.append(f));t=n,n.children().first().after(f)}if("auto"===a&&(a=s.top+1.5*f.height()>=e(window).height()+e(window).scrollTop()&&f.height()+n.outerHeight()<s.top?"top":"bottom"),"auto"===r&&(r=t.width()<s.left+f.outerWidth()/2&&s.left+f.outerWidth()>e(window).width()?"right":"left"),"top"===a?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===r?f.addClass("pull-right"):f.removeClass("pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===e(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");f.css({top:"top"===a?"auto":i.top+n.outerHeight(),bottom:"top"===a?i.top+n.outerHeight():"auto",left:"left"===r?t.css("padding-left"):"auto",right:"left"===r?"auto":t.width()-n.outerWidth()})},P=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||n.trigger(e)},K=function(e){f&&(e&&(l=Math.max(m,Math.min(2,l+e))),f.find(".datepicker > div").hide().filter(".datepicker-"+g[l].clsName).show())},F=function(){var t=e("<tr>"),n=c.clone().startOf("w");for(o.calendarWeeks===!0&&t.append(e("<th>").addClass("cw").text("#"));n.isBefore(c.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(n.format("dd"))),n.add(1,"d");f.find(".datepicker-days thead").append(t)},j=function(e){return o.disabledDates[e.format("YYYY-MM-DD")]===!0},A=function(e){return o.enabledDates[e.format("YYYY-MM-DD")]===!0},V=function(e,t){return!!e.isValid()&&((!o.disabledDates||!j(e)||"M"===t)&&(!(o.enabledDates&&!A(e)&&"M"!==t)&&((!o.minDate||!e.isBefore(o.minDate,t))&&((!o.maxDate||!e.isAfter(o.maxDate,t))&&("d"!==t||-1===o.daysOfWeekDisabled.indexOf(e.day()))))))},_=function(){for(var t=[],n=c.clone().startOf("y").hour(12);n.isSame(c,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(n.format("MMM"))),n.add(1,"M");f.find(".datepicker-months td").empty().append(t)},L=function(){var t=f.find(".datepicker-months"),n=t.find("th"),o=t.find("tbody").find("span");t.find(".disabled").removeClass("disabled"),V(c.clone().subtract(1,"y"),"y")||n.eq(0).addClass("disabled"),n.eq(1).text(c.year()),V(c.clone().add(1,"y"),"y")||n.eq(2).addClass("disabled"),o.removeClass("active"),p.isSame(c,"y")&&o.eq(p.month()).addClass("active"),o.each(function(t){V(c.clone().month(t),"M")||e(this).addClass("disabled")})},q=function(){var e=f.find(".datepicker-years"),t=e.find("th"),n=c.clone().subtract(5,"y"),i=c.clone().add(6,"y"),s="";for(e.find(".disabled").removeClass("disabled"),o.minDate&&o.minDate.isAfter(n,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(n.year()+"-"+i.year()),o.maxDate&&o.maxDate.isBefore(i,"y")&&t.eq(2).addClass("disabled");!n.isAfter(i,"y");)s+='<span data-action="selectYear" class="year'+(n.isSame(p,"y")?" active":"")+(V(n,"y")?"":" disabled")+'">'+n.year()+"</span>",n.add(1,"y");e.find("td").html(s)},B=function(){var n,i,s,a=f.find(".datepicker-days"),r=a.find("th"),l=[];if(T()){for(a.find(".disabled").removeClass("disabled"),r.eq(1).text(c.format(o.dayViewHeaderFormat)),V(c.clone().subtract(1,"M"),"M")||r.eq(0).addClass("disabled"),V(c.clone().add(1,"M"),"M")||r.eq(2).addClass("disabled"),n=c.clone().startOf("M").startOf("week");!c.clone().endOf("M").endOf("w").isBefore(n,"d");)0===n.weekday()&&(i=e("<tr>"),o.calendarWeeks&&i.append('<td class="cw">'+n.week()+"</td>"),l.push(i)),s="",n.isBefore(c,"M")&&(s+=" old"),n.isAfter(c,"M")&&(s+=" new"),n.isSame(p,"d")&&!d&&(s+=" active"),V(n,"d")||(s+=" disabled"),n.isSame(t(),"d")&&(s+=" today"),(0===n.day()||6===n.day())&&(s+=" weekend"),i.append('<td data-action="selectDay" class="day'+s+'">'+n.date()+"</td>"),n.add(1,"d");a.find("tbody").empty().append(l),L(),q()}},U=function(){var t=f.find(".timepicker-hours table"),n=c.clone().startOf("d"),o=[],i=e("<tr>");for(c.hour()>11&&!s&&n.hour(12);n.isSame(c,"d")&&(s||c.hour()<12&&n.hour()<12||c.hour()>11);)n.hour()%4===0&&(i=e("<tr>"),o.push(i)),i.append('<td data-action="selectHour" class="hour'+(V(n,"h")?"":" disabled")+'">'+n.format(s?"HH":"hh")+"</td>"),n.add(1,"h");t.empty().append(o)},z=function(){for(var t=f.find(".timepicker-minutes table"),n=c.clone().startOf("h"),i=[],s=e("<tr>"),a=1===o.stepping?5:o.stepping;c.isSame(n,"h");)n.minute()%(4*a)===0&&(s=e("<tr>"),i.push(s)),s.append('<td data-action="selectMinute" class="minute'+(V(n,"m")?"":" disabled")+'">'+n.format("mm")+"</td>"),n.add(a,"m");t.empty().append(i)},W=function(){for(var t=f.find(".timepicker-seconds table"),n=c.clone().startOf("m"),o=[],i=e("<tr>");c.isSame(n,"m");)n.second()%20===0&&(i=e("<tr>"),o.push(i)),i.append('<td data-action="selectSecond" class="second'+(V(n,"s")?"":" disabled")+'">'+n.format("ss")+"</td>"),n.add(5,"s");t.empty().append(o)},H=function(){var e=f.find(".timepicker span[data-time-component]");s||f.find(".timepicker [data-action=togglePeriod]").text(p.format("A")),e.filter("[data-time-component=hours]").text(p.format(s?"HH":"hh")),e.filter("[data-time-component=minutes]").text(p.format("mm")),e.filter("[data-time-component=seconds]").text(p.format("ss")),U(),z(),W()},$=function(){f&&(B(),H())},Y=function(e){var t=d?null:p;return e?(e=e.clone().locale(o.locale),1!==o.stepping&&e.minutes(Math.round(e.minutes()/o.stepping)*o.stepping%60).seconds(0),void(V(e)?(p=e,c=p.clone(),i.val(p.format(a)),n.data("date",p.format(a)),$(),d=!1,P({type:"dp.change",date:p.clone(),oldDate:t})):(o.keepInvalid||i.val(d?"":p.format(a)),P({type:"dp.error",date:e})))):(d=!0,i.val(""),n.data("date",""),P({type:"dp.change",date:null,oldDate:t}),void $())},G=function(){var t=!1;return f?(f.find(".collapse").each(function(){var n=e(this).data("collapse");return!n||!n.transitioning||(t=!0,!1)}),t?u:(h&&h.hasClass("btn")&&h.toggleClass("active"),f.hide(),e(window).off("resize",M),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,P({type:"dp.hide",date:p.clone()}),u)):u},Q=function(){Y(null)},J={next:function(){c.add(g[l].navStep,g[l].navFnc),B()},previous:function(){c.subtract(g[l].navStep,g[l].navFnc),B()},pickerSwitch:function(){K(1)},selectMonth:function(t){var n=e(t.target).closest("tbody").find("span").index(e(t.target));c.month(n),l===m?(Y(p.clone().year(c.year()).month(c.month())),o.inline||G()):(K(-1),B())},selectYear:function(t){var n=parseInt(e(t.target).text(),10)||0;c.year(n),l===m?(Y(p.clone().year(c.year())),o.inline||G()):(K(-1),B())},selectDay:function(t){var n=c.clone();e(t.target).is(".old")&&n.subtract(1,"M"),e(t.target).is(".new")&&n.add(1,"M"),Y(n.date(parseInt(e(t.target).text(),10))),R()||o.keepOpen||o.inline||G()},incrementHours:function(){Y(p.clone().add(1,"h"))},incrementMinutes:function(){Y(p.clone().add(o.stepping,"m"))},incrementSeconds:function(){Y(p.clone().add(1,"s"))},decrementHours:function(){Y(p.clone().subtract(1,"h"))},decrementMinutes:function(){Y(p.clone().subtract(o.stepping,"m"))},decrementSeconds:function(){Y(p.clone().subtract(1,"s"))},togglePeriod:function(){Y(p.clone().add(p.hours()>=12?-12:12,"h"))},togglePicker:function(t){var n,i=e(t.target),s=i.closest("ul"),a=s.find(".in"),r=s.find(".collapse:not(.in)");if(a&&a.length){if(n=a.data("collapse"),n&&n.transitioning)return;a.collapse?(a.collapse("hide"),r.collapse("show")):(a.removeClass("in"),r.addClass("in")),i.is("span")?i.toggleClass(o.icons.time+" "+o.icons.date):i.find("span").toggleClass(o.icons.time+" "+o.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var n=parseInt(e(t.target).text(),10);s||(p.hours()>=12?12!==n&&(n+=12):12===n&&(n=0)),Y(p.clone().hours(n)),J.showPicker.call(u)},selectMinute:function(t){Y(p.clone().minutes(parseInt(e(t.target).text(),10))),J.showPicker.call(u)},selectSecond:function(t){Y(p.clone().seconds(parseInt(e(t.target).text(),10))),J.showPicker.call(u)},clear:Q,today:function(){Y(t())},close:G},Z=function(t){return!e(t.currentTarget).is(".disabled")&&(J[e(t.currentTarget).data("action")].apply(u,arguments),!1)},X=function(){var n,s={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}};return i.prop("disabled")||!o.ignoreReadonly&&i.prop("readonly")||f?u:(o.useCurrent&&d&&(i.is("input")&&0===i.val().trim().length||o.inline)&&(n=t(),"string"==typeof o.useCurrent&&(n=s[o.useCurrent](n)),Y(n)),f=I(),F(),_(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),$(),K(),e(window).on("resize",M),f.on("click","[data-action]",Z),f.on("mousedown",!1),h&&h.hasClass("btn")&&h.toggleClass("active"),f.show(),M(),i.is(":focus")||i.focus(),P({type:"dp.show"}),u)},ee=function(){return f?G():X()},te=function(e){return e=t.isMoment(e)||e instanceof Date?t(e):t(e,r,o.useStrict),e.locale(o.locale),e},ne=function(e){var t,n,i,s,a=null,r=[],l={},p=e.which,c="p";C[p]=c;for(t in C)C.hasOwnProperty(t)&&C[t]===c&&(r.push(t),parseInt(t,10)!==p&&(l[t]=!0));for(t in o.keyBinds)if(o.keyBinds.hasOwnProperty(t)&&"function"==typeof o.keyBinds[t]&&(i=t.split(" "),i.length===r.length&&E[p]===i[i.length-1])){for(s=!0,n=i.length-2;n>=0;n--)if(!(E[i[n]]in l)){s=!1;break}if(s){a=o.keyBinds[t];break}}a&&(a.call(u,f),e.stopPropagation(),e.preventDefault())},oe=function(e){C[e.which]="r",e.stopPropagation(),e.preventDefault()},ie=function(t){var n=e(t.target).val().trim(),o=n?te(n):null;return Y(o),t.stopImmediatePropagation(),!1},se=function(){i.on({change:ie,blur:o.debug?"":G,keydown:ne,keyup:oe}),n.is("input")?i.on({focus:X}):h&&(h.on("click",ee),h.on("mousedown",!1))},ae=function(){i.off({change:ie,blur:G,keydown:ne,keyup:oe}),n.is("input")?i.off({focus:X}):h&&(h.off("click",ee),h.off("mousedown",!1))},re=function(t){var n={};return e.each(t,function(){var e=te(this);e.isValid()&&(n[e.format("YYYY-MM-DD")]=!0)}),!!Object.keys(n).length&&n},le=function(){var e=o.format||"L LT";a=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){var t=p.localeData().longDateFormat(e)||e;return t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return p.localeData().longDateFormat(e)||e})}),r=o.extraFormats?o.extraFormats.slice():[],r.indexOf(e)<0&&r.indexOf(a)<0&&r.push(a),s=a.toLowerCase().indexOf("a")<1&&a.indexOf("h")<1,D("y")&&(m=2),D("M")&&(m=1),D("d")&&(m=0),l=Math.max(m,l),d||Y(p)};if(u.destroy=function(){G(),ae(),n.removeData("DateTimePicker"),n.removeData("date")},u.toggle=ee,u.show=X,u.hide=G,u.disable=function(){return G(),h&&h.hasClass("btn")&&h.addClass("disabled"),i.prop("disabled",!0),u},u.enable=function(){return h&&h.hasClass("btn")&&h.removeClass("disabled"),i.prop("disabled",!1),u},u.ignoreReadonly=function(e){if(0===arguments.length)return o.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return o.ignoreReadonly=e,u},u.options=function(t){if(0===arguments.length)return e.extend(!0,{},o);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,o,t),e.each(o,function(e,t){if(void 0===u[e])throw new TypeError("option "+e+" is not recognized!");u[e](t)}),u},u.date=function(e){if(0===arguments.length)return d?null:p.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return Y(null===e?null:te(e)),u},u.format=function(e){if(0===arguments.length)return o.format;if("string"!=typeof e&&("boolean"!=typeof e||e!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+e);return o.format=e,a&&le(),u},u.dayViewHeaderFormat=function(e){if(0===arguments.length)return o.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return o.dayViewHeaderFormat=e,u},u.extraFormats=function(e){if(0===arguments.length)return o.extraFormats;if(e!==!1&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return o.extraFormats=e,r&&le(),u},u.disabledDates=function(t){if(0===arguments.length)return o.disabledDates?e.extend({},o.disabledDates):o.disabledDates;if(!t)return o.disabledDates=!1,$(),u;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return o.disabledDates=re(t),o.enabledDates=!1,$(),u},u.enabledDates=function(t){if(0===arguments.length)return o.enabledDates?e.extend({},o.enabledDates):o.enabledDates;if(!t)return o.enabledDates=!1,$(),u;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return o.enabledDates=re(t),o.disabledDates=!1,$(),u},u.daysOfWeekDisabled=function(e){if(0===arguments.length)return o.daysOfWeekDisabled.splice(0);if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");return o.daysOfWeekDisabled=e.reduce(function(e,t){return t=parseInt(t,10),t>6||0>t||isNaN(t)?e:(-1===e.indexOf(t)&&e.push(t),e)},[]).sort(),$(),u},u.maxDate=function(e){if(0===arguments.length)return o.maxDate?o.maxDate.clone():o.maxDate;if("boolean"==typeof e&&e===!1)return o.maxDate=!1,$(),u;"string"==typeof e&&("now"===e||"moment"===e)&&(e=t());var n=te(e);if(!n.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(o.minDate&&n.isBefore(o.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+n.format(a));return o.maxDate=n,o.maxDate.isBefore(e)&&Y(o.maxDate),c.isAfter(n)&&(c=n.clone()),$(),u},u.minDate=function(e){if(0===arguments.length)return o.minDate?o.minDate.clone():o.minDate;if("boolean"==typeof e&&e===!1)return o.minDate=!1,$(),u;"string"==typeof e&&("now"===e||"moment"===e)&&(e=t());var n=te(e);if(!n.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(o.maxDate&&n.isAfter(o.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+n.format(a));return o.minDate=n,o.minDate.isAfter(e)&&Y(o.minDate),c.isBefore(n)&&(c=n.clone()),$(),u},u.defaultDate=function(e){if(0===arguments.length)return o.defaultDate?o.defaultDate.clone():o.defaultDate;if(!e)return o.defaultDate=!1,u;"string"==typeof e&&("now"===e||"moment"===e)&&(e=t());var n=te(e);if(!n.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!V(n))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return o.defaultDate=n,o.defaultDate&&""===i.val().trim()&&void 0===i.attr("placeholder")&&Y(o.defaultDate),u},u.locale=function(e){if(0===arguments.length)return o.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return o.locale=e,p.locale(o.locale),c.locale(o.locale),a&&le(),f&&(G(),X()),u},u.stepping=function(e){return 0===arguments.length?o.stepping:(e=parseInt(e,10),(isNaN(e)||1>e)&&(e=1),o.stepping=e,u)},u.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return o.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return o.useCurrent=e,u},u.collapse=function(e){if(0===arguments.length)return o.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return o.collapse===e?u:(o.collapse=e,f&&(G(),X()),u)},u.icons=function(t){if(0===arguments.length)return e.extend({},o.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(o.icons,t),f&&(G(),X()),u},u.useStrict=function(e){if(0===arguments.length)return o.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return o.useStrict=e,u},u.sideBySide=function(e){if(0===arguments.length)return o.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return o.sideBySide=e,f&&(G(),X()),u},u.viewMode=function(e){if(0===arguments.length)return o.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===y.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+y.join(", ")+") value");return o.viewMode=e,l=Math.max(y.indexOf(e),m),K(),u},u.toolbarPlacement=function(e){if(0===arguments.length)return o.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===w.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+w.join(", ")+") value");return o.toolbarPlacement=e,f&&(G(),X()),u},u.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},o.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===b.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+b.join(", ")+")");o.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===v.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+v.join(", ")+")");o.widgetPositioning.vertical=t.vertical}return $(),u},u.calendarWeeks=function(e){if(0===arguments.length)return o.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return o.calendarWeeks=e,$(),u},u.showTodayButton=function(e){if(0===arguments.length)return o.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return o.showTodayButton=e,f&&(G(),X()),u},u.showClear=function(e){if(0===arguments.length)return o.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return o.showClear=e,f&&(G(),X()),u},u.widgetParent=function(t){if(0===arguments.length)return o.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof e))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return o.widgetParent=t,f&&(G(),X()),u},u.keepOpen=function(e){if(0===arguments.length)return o.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return o.keepOpen=e,u},u.inline=function(e){if(0===arguments.length)return o.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return o.inline=e,u},u.clear=function(){return Q(),u},u.keyBinds=function(e){return o.keyBinds=e,u},u.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return o.debug=e,u},u.showClose=function(e){if(0===arguments.length)return o.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return o.showClose=e,u},u.keepInvalid=function(e){if(0===arguments.length)return o.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return o.keepInvalid=e,u},u.datepickerInput=function(e){if(0===arguments.length)return o.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return o.datepickerInput=e,u},n.is("input"))i=n;else if(i=n.find(o.datepickerInput),0===i.size())i=n.find("input");else if(!i.is("input"))throw new Error('CSS class "'+o.datepickerInput+'" cannot be applied to non input element');if(n.hasClass("input-group")&&(h=n.find(0===n.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),!o.inline&&!i.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return e.extend(!0,o,k()),u.options(o),le(),se(),i.prop("disabled")&&u.disable(),i.is("input")&&0!==i.val().trim().length?Y(te(i.val().trim())):o.defaultDate&&void 0===i.attr("placeholder")&&Y(o.defaultDate),o.inline&&X(),u};e.fn.datetimepicker=function(t){return this.each(function(){var o=e(this);o.data("DateTimePicker")||(t=e.extend(!0,{},e.fn.datetimepicker.defaults,t),o.data("DateTimePicker",n(o,t)))})},e.fn.datetimepicker.defaults={format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:t.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:[],calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(e){var n=this.date()||t();this.date(e.find(".datepicker").is(":visible")?n.clone().subtract(7,"d"):n.clone().add(1,"m"))}},down:function(e){if(!e)return void this.show();var n=this.date()||t();this.date(e.find(".datepicker").is(":visible")?n.clone().add(7,"d"):n.clone().subtract(1,"m"))},"control up":function(e){if(e){var n=this.date()||t();this.date(e.find(".datepicker").is(":visible")?n.clone().subtract(1,"y"):n.clone().add(1,"h"))}},"control down":function(e){if(e){var n=this.date()||t();this.date(e.find(".datepicker").is(":visible")?n.clone().add(1,"y"):n.clone().subtract(1,"h"))}},left:function(e){if(e){var n=this.date()||t();e.find(".datepicker").is(":visible")&&this.date(n.clone().subtract(1,"d"))}},right:function(e){if(e){var n=this.date()||t();e.find(".datepicker").is(":visible")&&this.date(n.clone().add(1,"d"))}},pageUp:function(e){if(e){var n=this.date()||t();e.find(".datepicker").is(":visible")&&this.date(n.clone().subtract(1,"M"))}},pageDown:function(e){if(e){var n=this.date()||t();e.find(".datepicker").is(":visible")&&this.date(n.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){e.find(".timepicker").is(":visible")&&e.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(t())},"delete":function(){this.clear()}},debug:!1}}),function(e){e.whenAll=function(t){if(t&&t.length){var n,o,i=e.Deferred(),s=t.length,a=!1;return o=function(){--s||i[a?"reject":"resolve"]()},n=function(){a=!0},t.forEach(function(e){e.fail(n).always(o)}),i}return e.Deferred().resolve()}}(jQuery),"undefined"==typeof jQuery)throw new Error("jQuery.textcomplete requires jQuery");+function(e){"use strict";var t=function(e){console.warn&&console.warn(e)};e.fn.textcomplete=function(n,o){var i=Array.prototype.slice.call(arguments);return this.each(function(){var s=e(this),a=s.data("textComplete");if(a||(a=new e.fn.textcomplete.Completer(this,o||{}),s.data("textComplete",a)),"string"==typeof n){if(!a)return;i.shift(),a[n].apply(a,i),"destroy"===n&&s.removeData("textComplete")}else e.each(n,function(n){e.each(["header","footer","placement","maxCount"],function(e){n[e]&&(a.option[e]=n[e],t(e+"as a strategy param is deprecated. Use option."),delete n[e])})}),a.register(e.fn.textcomplete.Strategy.parse(n))})}}(jQuery),+function(e){"use strict";function t(n,o){if(this.$el=e(n),this.id="textcomplete"+s++,this.strategies=[],this.views=[],this.option=e.extend({},t._getDefaults(),o),!this.$el.is("input[type=text]")&&!this.$el.is("textarea")&&!n.isContentEditable&&"true"!=n.contentEditable)throw new Error("textcomplete must be called on a Textarea or a ContentEditable.");if(n===document.activeElement)this.initialize();else{var i=this;this.$el.one("focus."+this.id,function(){i.initialize()})}}var n=function(e){var t,n;return function(){var o=Array.prototype.slice.call(arguments);if(t)return void(n=o);t=!0;var i=this;o.unshift(function s(){if(n){var o=n;n=void 0,o.unshift(s),e.apply(i,o)}else t=!1}),e.apply(this,o)}},o=function(e){return"[object String]"===Object.prototype.toString.call(e)},i=function(e){return"[object Function]"===Object.prototype.toString.call(e)},s=0;t._getDefaults=function(){
return t.DEFAULTS||(t.DEFAULTS={appendTo:e("body"),zIndex:"100"}),t.DEFAULTS},e.extend(t.prototype,{id:null,option:null,strategies:null,adapter:null,dropdown:null,$el:null,initialize:function(){var t=this.$el.get(0);this.dropdown=new e.fn.textcomplete.Dropdown(t,this,this.option);var n,o;this.option.adapter?n=this.option.adapter:(o=this.$el.is("textarea")||this.$el.is("input[type=text]")?"number"==typeof t.selectionEnd?"Textarea":"IETextarea":"ContentEditable",n=e.fn.textcomplete[o]),this.adapter=new n(t,this,this.option)},destroy:function(){this.$el.off("."+this.id),this.adapter&&this.adapter.destroy(),this.dropdown&&this.dropdown.destroy(),this.$el=this.adapter=this.dropdown=null},trigger:function(e,t){this.dropdown||this.initialize(),null!=e||(e=this.adapter.getTextFromHeadToCaret());var n=this._extractSearchQuery(e);if(n.length){var o=n[1];if(t&&this._term===o)return;this._term=o,this._search.apply(this,n)}else this._term=null,this.dropdown.deactivate()},fire:function(e){var t=Array.prototype.slice.call(arguments,1);return this.$el.trigger(e,t),this},register:function(e){Array.prototype.push.apply(this.strategies,e)},select:function(e,t,n){this.adapter.select(e,t,n),this.fire("change").fire("textComplete:select",e,t),this.adapter.focus()},_clearAtNext:!0,_term:null,_extractSearchQuery:function(e){for(var t=0;t<this.strategies.length;t++){var n=this.strategies[t],s=n.context(e);if(s||""===s){var a=i(n.match)?n.match(e):n.match;o(s)&&(e=s);var r=e.match(a);if(r)return[n,r[n.index],r]}}return[]},_search:n(function(e,t,n,o){var i=this;t.search(n,function(n,o){i.dropdown.shown||(i.dropdown.activate(),i.dropdown.setPosition(i.adapter.getCaretPosition())),i._clearAtNext&&(i.dropdown.clear(),i._clearAtNext=!1),i.dropdown.render(i._zip(n,t)),o||(e(),i._clearAtNext=!0)},o)}),_zip:function(t,n){return e.map(t,function(e){return{value:e,strategy:n}})}}),e.fn.textcomplete.Completer=t}(jQuery),+function(e){"use strict";function t(n,i,s){this.$el=t.findOrCreateElement(s),this.completer=i,this.id=i.id+"dropdown",this._data=[],this.$inputEl=e(n),this.option=s,s.listPosition&&(this.setPosition=s.listPosition),s.height&&this.$el.height(s.height);var a=this;e.each(["maxCount","placement","footer","header","className"],function(e,t){null!=s[t]&&(a[t]=s[t])}),this._bindEvents(n),o[this.id]=this}var n=function(e,t){var n,o,i=t.strategy.idProperty;for(n=0;n<e.length;n++)if(o=e[n],o.strategy===t.strategy)if(i){if(o.value[i]===t.value[i])return!0}else if(o.value===t.value)return!0;return!1},o={};e(document).on("click",function(t){var n=t.originalEvent&&t.originalEvent.keepTextCompleteDropdown;e.each(o,function(e,t){e!==n&&t.deactivate()})});var i={SKIP_DEFAULT:0,KEY_UP:1,KEY_DOWN:2,KEY_ENTER:3,KEY_PAGEUP:4,KEY_PAGEDOWN:5,KEY_ESCAPE:6};e.extend(t,{findOrCreateElement:function(t){var n=t.appendTo;n instanceof e||(n=e(n));var o=n.children(".dropdown-menu");return o.length||(o=e('<ul class="dropdown-menu"></ul>').css({display:"none",left:0,position:"absolute",zIndex:t.zIndex}).appendTo(n)),o}}),e.extend(t.prototype,{$el:null,$inputEl:null,completer:null,footer:null,header:null,id:null,maxCount:10,placement:"",shown:!1,data:[],className:"",destroy:function(){this.deactivate(),this.$el.off("."+this.id),this.$inputEl.off("."+this.id),this.clear(),this.$el=this.$inputEl=this.completer=null,delete o[this.id]},render:function(t){var n=this._buildContents(t),o=e.map(this.data,function(e){return e.value});this.data.length?(this._renderHeader(o),this._renderFooter(o),n&&(this._renderContents(n),this._activateIndexedItem()),this._setScroll()):this.shown&&this.deactivate()},setPosition:function(t){this.$el.css(this._applyPlacement(t));var n="absolute";return this.$inputEl.add(this.$inputEl.parents()).each(function(){return"absolute"!==e(this).css("position")&&("fixed"===e(this).css("position")?(n="fixed",!1):void 0)}),this.$el.css({position:n}),this},clear:function(){this.$el.html(""),this.data=[],this._index=0,this._$header=this._$footer=null},activate:function(){return this.shown||(this.clear(),this.$el.show(),this.className&&this.$el.addClass(this.className),this.completer.fire("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.className&&this.$el.removeClass(this.className),this.completer.fire("textComplete:hide"),this.shown=!1),this},isUp:function(e){return 38===e.keyCode||e.ctrlKey&&80===e.keyCode},isDown:function(e){return 40===e.keyCode||e.ctrlKey&&78===e.keyCode},isEnter:function(e){var t=e.ctrlKey||e.altKey||e.metaKey||e.shiftKey;return!t&&(13===e.keyCode||9===e.keyCode||this.option.completeOnSpace===!0&&32===e.keyCode)},isPageup:function(e){return 33===e.keyCode},isPagedown:function(e){return 34===e.keyCode},isEscape:function(e){return 27===e.keyCode},_data:null,_index:null,_$header:null,_$footer:null,_bindEvents:function(){this.$el.on("mousedown."+this.id,".textcomplete-item",e.proxy(this._onClick,this)),this.$el.on("mouseover."+this.id,".textcomplete-item",e.proxy(this._onMouseover,this)),this.$inputEl.on("keydown."+this.id,e.proxy(this._onKeydown,this))},_onClick:function(t){var n=e(t.target);t.preventDefault(),t.originalEvent.keepTextCompleteDropdown=this.id,n.hasClass("textcomplete-item")||(n=n.closest(".textcomplete-item"));var o=this.data[parseInt(n.data("index"),10)];this.completer.select(o.value,o.strategy,t);var i=this;setTimeout(function(){i.deactivate()},0)},_onMouseover:function(t){var n=e(t.target);t.preventDefault(),n.hasClass("textcomplete-item")||(n=n.closest(".textcomplete-item")),this._index=parseInt(n.data("index"),10),this._activateIndexedItem()},_onKeydown:function(t){if(this.shown){var n;switch(e.isFunction(this.option.onKeydown)&&(n=this.option.onKeydown(t,i)),null==n&&(n=this._defaultKeydown(t)),n){case i.KEY_UP:t.preventDefault(),this._up();break;case i.KEY_DOWN:t.preventDefault(),this._down();break;case i.KEY_ENTER:t.preventDefault(),this._enter(t);break;case i.KEY_PAGEUP:t.preventDefault(),this._pageup();break;case i.KEY_PAGEDOWN:t.preventDefault(),this._pagedown();break;case i.KEY_ESCAPE:t.preventDefault(),this.deactivate()}}},_defaultKeydown:function(e){return this.isUp(e)?i.KEY_UP:this.isDown(e)?i.KEY_DOWN:this.isEnter(e)?i.KEY_ENTER:this.isPageup(e)?i.KEY_PAGEUP:this.isPagedown(e)?i.KEY_PAGEDOWN:this.isEscape(e)?i.KEY_ESCAPE:void 0},_up:function(){0===this._index?this._index=this.data.length-1:this._index-=1,this._activateIndexedItem(),this._setScroll()},_down:function(){this._index===this.data.length-1?this._index=0:this._index+=1,this._activateIndexedItem(),this._setScroll()},_enter:function(e){var t=this.data[parseInt(this._getActiveElement().data("index"),10)];this.completer.select(t.value,t.strategy,e),this.deactivate()},_pageup:function(){var t=0,n=this._getActiveElement().position().top-this.$el.innerHeight();this.$el.children().each(function(o){return e(this).position().top+e(this).outerHeight()>n?(t=o,!1):void 0}),this._index=t,this._activateIndexedItem(),this._setScroll()},_pagedown:function(){var t=this.data.length-1,n=this._getActiveElement().position().top+this.$el.innerHeight();this.$el.children().each(function(o){return e(this).position().top>n?(t=o,!1):void 0}),this._index=t,this._activateIndexedItem(),this._setScroll()},_activateIndexedItem:function(){this.$el.find(".textcomplete-item.active").removeClass("active"),this._getActiveElement().addClass("active")},_getActiveElement:function(){return this.$el.children(".textcomplete-item:nth("+this._index+")")},_setScroll:function(){var e=this._getActiveElement(),t=e.position().top,n=e.outerHeight(),o=this.$el.innerHeight(),i=this.$el.scrollTop();0===this._index||this._index==this.data.length-1||0>t?this.$el.scrollTop(t+i):t+n>o&&this.$el.scrollTop(t+n+i-o)},_buildContents:function(e){var t,o,i,s="";for(o=0;o<e.length&&this.data.length!==this.maxCount;o++)t=e[o],n(this.data,t)||(i=this.data.length,this.data.push(t),s+='<li class="textcomplete-item" data-index="'+i+'"><a>',s+=t.strategy.template(t.value),s+="</a></li>");return s},_renderHeader:function(t){if(this.header){this._$header||(this._$header=e('<li class="textcomplete-header"></li>').prependTo(this.$el));var n=e.isFunction(this.header)?this.header(t):this.header;this._$header.html(n)}},_renderFooter:function(t){if(this.footer){this._$footer||(this._$footer=e('<li class="textcomplete-footer"></li>').appendTo(this.$el));var n=e.isFunction(this.footer)?this.footer(t):this.footer;this._$footer.html(n)}},_renderContents:function(e){this._$footer?this._$footer.before(e):this.$el.append(e)},_applyPlacement:function(e){return-1!==this.placement.indexOf("top")?e={top:"auto",bottom:this.$el.parent().height()-e.top+e.lineHeight,left:e.left}:(e.bottom="auto",delete e.lineHeight),-1!==this.placement.indexOf("absleft")?e.left=0:-1!==this.placement.indexOf("absright")&&(e.right=0,e.left="auto"),e}}),e.fn.textcomplete.Dropdown=t,e.extend(e.fn.textcomplete,i)}(jQuery),+function(e){"use strict";function t(t){e.extend(this,t),this.cache&&(this.search=n(this.search))}var n=function(e){var t={};return function(n,o){t[n]?o(t[n]):e.call(this,n,function(e){t[n]=(t[n]||[]).concat(e),o.apply(null,arguments)})}};t.parse=function(n){return e.map(n,function(e){return new t(e)})},e.extend(t.prototype,{match:null,replace:null,search:null,cache:!1,context:function(){return!0},index:2,template:function(e){return e},idProperty:null}),e.fn.textcomplete.Strategy=t}(jQuery),+function(e){"use strict";function t(){}var n=Date.now||function(){return(new Date).getTime()},o=function(e,t){var o,i,s,a,r,l=function(){var u=n()-a;t>u?o=setTimeout(l,t-u):(o=null,r=e.apply(s,i),s=i=null)};return function(){return s=this,i=arguments,a=n(),o||(o=setTimeout(l,t)),r}};e.extend(t.prototype,{id:null,completer:null,el:null,$el:null,option:null,initialize:function(t,n,i){this.el=t,this.$el=e(t),this.id=n.id+this.constructor.name,this.completer=n,this.option=i,this.option.debounce&&(this._onKeyup=o(this._onKeyup,this.option.debounce)),this._bindEvents()},destroy:function(){this.$el.off("."+this.id),this.$el=this.el=this.completer=null},select:function(){throw new Error("Not implemented")},getCaretPosition:function(){var e=this._getCaretRelativePosition(),t=this.$el.offset();return e.top+=t.top,e.left+=t.left,e},focus:function(){this.$el.focus()},_bindEvents:function(){this.$el.on("keyup."+this.id,e.proxy(this._onKeyup,this))},_onKeyup:function(e){this._skipSearch(e)||this.completer.trigger(this.getTextFromHeadToCaret(),!0)},_skipSearch:function(e){switch(e.keyCode){case 13:case 40:case 38:return!0}if(e.ctrlKey)switch(e.keyCode){case 78:case 80:return!0}}}),e.fn.textcomplete.Adapter=t}(jQuery),+function(e){"use strict";function t(e,t,n){this.initialize(e,t,n)}t.DIV_PROPERTIES={left:-9999,position:"absolute",top:0,whiteSpace:"pre-wrap"},t.COPY_PROPERTIES=["border-width","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","word-spacing","line-height","text-decoration","text-align","width","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left","border-style","box-sizing","tab-size"],e.extend(t.prototype,e.fn.textcomplete.Adapter.prototype,{select:function(t,n,o){var i=this.getTextFromHeadToCaret(),s=this.el.value.substring(this.el.selectionEnd),a=n.replace(t,o);e.isArray(a)&&(s=a[1]+s,a=a[0]),i=i.replace(n.match,a),this.$el.val(i+s),this.el.selectionStart=this.el.selectionEnd=i.length},_getCaretRelativePosition:function(){var t=e("<div></div>").css(this._copyCss()).text(this.getTextFromHeadToCaret()),n=e("<span></span>").text(".").appendTo(t);this.$el.before(t);var o=n.position();return o.top+=n.height()-this.$el.scrollTop(),o.lineHeight=n.height(),t.remove(),o},_copyCss:function(){return e.extend({overflow:this.el.scrollHeight>this.el.offsetHeight?"scroll":"auto"},t.DIV_PROPERTIES,this._getStyles())},_getStyles:function(e){var n=e("<div></div>").css(["color"]).color;return"undefined"!=typeof n?function(){return this.$el.css(t.COPY_PROPERTIES)}:function(){var n=this.$el,o={};return e.each(t.COPY_PROPERTIES,function(e,t){o[t]=n.css(t)}),o}}(e),getTextFromHeadToCaret:function(){return this.el.value.substring(0,this.el.selectionEnd)}}),e.fn.textcomplete.Textarea=t}(jQuery),+function(e){"use strict";function t(t,o,i){this.initialize(t,o,i),e("<span>"+n+"</span>").css({position:"absolute",top:-9999,left:-9999}).insertBefore(t)}var n="吶";e.extend(t.prototype,e.fn.textcomplete.Textarea.prototype,{select:function(t,n,o){var i=this.getTextFromHeadToCaret(),s=this.el.value.substring(i.length),a=n.replace(t,o);e.isArray(a)&&(s=a[1]+s,a=a[0]),i=i.replace(n.match,a),this.$el.val(i+s),this.el.focus();var r=this.el.createTextRange();r.collapse(!0),r.moveEnd("character",i.length),r.moveStart("character",i.length),r.select()},getTextFromHeadToCaret:function(){this.el.focus();var e=document.selection.createRange();e.moveStart("character",-this.el.value.length);var t=e.text.split(n);return 1===t.length?t[0]:t[1]}}),e.fn.textcomplete.IETextarea=t}(jQuery),+function(e){"use strict";function t(e,t,n){this.initialize(e,t,n)}e.extend(t.prototype,e.fn.textcomplete.Adapter.prototype,{select:function(t,n,o){var i=this.getTextFromHeadToCaret(),s=window.getSelection(),a=s.getRangeAt(0),r=a.cloneRange();r.selectNodeContents(a.startContainer);var l=r.toString(),u=l.substring(a.startOffset),p=n.replace(t,o);e.isArray(p)&&(u=p[1]+u,p=p[0]),i=i.replace(n.match,p),a.selectNodeContents(a.startContainer),a.deleteContents();var c=document.createTextNode(i+u);a.insertNode(c),a.setStart(c,i.length),a.collapse(!0),s.removeAllRanges(),s.addRange(a)},_getCaretRelativePosition:function(){var t=window.getSelection().getRangeAt(0).cloneRange(),n=document.createElement("span");t.insertNode(n),t.selectNodeContents(n),t.deleteContents();var o=e(n),i=o.offset();i.left-=this.$el.offset().left,i.top+=o.height()-this.$el.offset().top,i.lineHeight=o.height(),o.remove();var s=this.$el.attr("dir")||this.$el.css("direction");return"rtl"===s&&(i.left-=this.listView.$el.width()),i},getTextFromHeadToCaret:function(){var e=window.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(e.startContainer),t.toString().substring(0,e.startOffset)}}),e.fn.textcomplete.ContentEditable=t}(jQuery),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){e.component.mixins.enterKeyHandler={onEnter:function(t){if(13==t.keyCode&&!t.shiftKey&&t.target.className&&t.target.className.indexOf("feed")==-1&&e.settings.global("shortcuts.progressOnEnter",this.props.flowKey,!0)){var n=e.model.getOutcomes(null,this.props.flowKey).sort(function(e,t){return e.order-t.order}).filter(function(t){return e.utils.isEqual(t.pageActionBindingType,"save",!0)})[0];n&&(t.stopPropagation(),e.engine.move(n,this.props.flowKey))}}},e.component.mixins.collapse={getInitialState:function(){return{isVisible:!0,height:null,icon:"toggle-icon glyphicon glyphicon-triangle-bottom"}},toggleVisibility:function(t){if(t.preventDefault(),e.settings.global("collapsible",this.props.flowKey))if(this.state.isVisible){this.setState({isVisible:!1,height:ReactDOM.findDOMNode(this).clientHeight,icon:"toggle-icon glyphicon glyphicon-triangle-right"});var n=this;requestAnimationFrame(function(){n.setState({height:0})})}else this.setState({isVisible:!0,height:null,icon:"toggle-icon glyphicon glyphicon-triangle-bottom"})},getLabel:function(t,n){if(!e.utils.isNullOrWhitespace(t)){var o=e.settings.global("collapsible",this.props.flowKey)?"container-label clickable-section":"container-label",i=e.settings.global("collapsible",this.props.flowKey)&&t?[React.DOM.i({className:this.state.icon}),t]:[t];return n&&i.push(React.DOM.span({className:"input-required"}," *")),React.DOM.h3({className:o,onClick:this.toggleVisibility},i)}return null}}}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({isCollapsible:function(t){if(t.attributes&&null!=t.attributes.isCollapsible)return e.utils.isEqual(t.attributes.isCollapsible,"true",!0);var n=e.settings.global("collapsible",this.props.flowKey,null);if(null===n)return!1;if("boolean"==typeof n)return n;if("object"==typeof n){var o=n[t.containerType.toLowerCase()]||n["default"];if(o)return o.enabled}return!1},getCollapseGroupKey:function(t){return t+"-"+e.utils.extractTenantId(this.props.flowKey)+"-"+e.utils.extractFlowId(this.props.flowKey)+"-"+e.utils.extractFlowVersionId(this.props.flowKey)},getCollapseGroup:function(t){var n=e.settings.global("collapsible",this.props.flowKey,!1),o=null;return"object"==typeof n&&(o=n[t.containerType.toLowerCase()]||n["default"]),o&&o.group?o.group:t.attributes&&null!=t.attributes.collapseGroup?t.attributes.collapseGroup:null},onToggle:function(t){this.setState({isCollapsed:!this.state.isCollapsed});var n=e.model.getContainer(this.props.id,this.props.flowKey),o=this.getCollapseGroup(n);o&&(localStorage.setItem(this.getCollapseGroupKey(o),JSON.stringify(!this.state.isCollapsed)),e.engine.render(this.props.flowKey))},componentWillMount:function(){var t=e.model.getContainer(this.props.id,this.props.flowKey),n=this.getCollapseGroup(t),o=null;if(n){var i=localStorage.getItem(this.getCollapseGroupKey(n));e.utils.isNullOrWhitespace(i)||(o=JSON.parse(i))}if(null==o&&t.attributes&&null!=t.attributes.isCollapsed&&(o=e.utils.isEqual(t.attributes.isCollapsed,"true",!0)),null==o){var s=e.settings.global("collapsible",this.props.flowKey,!1);if("object"==typeof s){var a=s[t.containerType.toLowerCase()]||s["default"];a&&(o=a.collapsed)}}this.setState({isCollapsed:o})},componentWillReceiveProps:function(t){var n=e.model.getContainer(this.props.id,this.props.flowKey),o=this.getCollapseGroup(n);if(o){var i=localStorage.getItem(this.getCollapseGroupKey(o));e.utils.isNullOrWhitespace(i)||this.setState({isCollapsed:JSON.parse(i)})}},render:function(){var t=this,n=e.model.getContainer(this.props.id,this.props.flowKey);e.log.info("Rendering "+n.containerType+" Container: "+this.props.id+", "+n.developerName);var o=(e.model.getChildren(this.props.id,this.props.flowKey),e.model.getOutcomes(this.props.id,this.props.flowKey)),i=o&&o.map(function(n){return React.createElement(e.component.getByName("outcome"),{id:n.id,flowKey:t.props.flowKey})}),s=this.isCollapsible(n),a=null;if(n.label&&(a=React.createElement("h3",null,n.label),s)){var r=this.state.isCollapsed?"plus":"minus";a=React.createElement("h3",{onClick:this.onToggle},React.createElement("span",{className:"glyphicon glyphicon-"+r})," ",n.label)}var l=e.styling.getClasses(this.props.parentId,this.props.id,n.containerType,this.props.flowKey).join(" ");l+=" mw-container",this.props.isDesignTime||n.isVisible||(l+=" hidden");var u=null;return u=s&&n.label?React.createElement(ReactCollapse,{isOpened:!this.state.isCollapsed,keepCollapsedContent:!0,springConfig:ReactMotion.presets.gentle},React.createElement(e.component.getByName("mw-"+n.containerType),this.props),i):[React.createElement(e.component.getByName("mw-"+n.containerType),this.props),i],React.createElement("div",{className:l,id:this.props.id},a,u)}});e.component.register("mw-container",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e,t){var n=React.createClass({changeInterval:null,skipSetContent:!1,editor:null,initializeEditor:function(){var t=this,n=e.model.getComponent(this.props.id,this.props.flowKey),o=e.settings.global("richtext.custom_plugins",this.props.flowKey,null);o&&Object.keys(o).forEach(function(e){tinymce.PluginManager.add(e,o[e])}),tinymce.init({selector:"textarea#content-"+this.props.id,plugins:e.settings.global("richtext.plugins",this.props.flowKey,[]),external_plugins:e.settings.global("richtext.external_plugins",this.props.flowKey,[]),width:19*n.width,height:16*n.height,readonly:!n.isEditable,menubar:"edit insert view format table tools",toolbar:e.settings.global("richtext.toolbar",this.props.flowKey,[]),content_css:e.settings.global("richtext.content_css",this.props.flowKey,[]),importcss_append:e.settings.global("richtext.importcss_append",this.props.flowKey,!1),importcss_file_filter:e.settings.global("richtext.importcss_file_filter",this.props.flowKey,null),nanospell_server:e.settings.global("richtext.nanospell_server",this.props.flowKey,null),moxiemanager_title:e.settings.global("richtext.moxiemanager_title",this.props.flowKey,null),moxiemanager_fullscreen:e.settings.global("richtext.moxiemanager_fullscreen",this.props.flowKey,null),setup:function(o){t.editor=o,t.props.isDesignTime||(e.settings.global("richtext.imageUploadEnabled",t.props.flowKey,!0)&&o.addButton("mwimage",{title:"Images",icon:"image",onclick:function(){t.setState({isImageUploadOpen:!0}),t.render()}}),o.on("change",t.handleChange),n.hasEvents&&o.on("blur",t.handleEvent)),o.on("init",function(){this.getDoc().body.style.fontSize=e.settings.global("richtext.fontsize",t.props.flowKey,"13px")})}})},statics:{isLoadingTinyMce:!1,loadTinyMce:function(n){e.component.getByName("content").isLoadingTinyMce=!0;var o=document.createElement("script");o.src=e.settings.global("richtext.url"),o.onload=function(){e.component.getByName("content").isLoadingTinyMce=!1,n.apply()},t.document.body.appendChild(o)}},getInitialState:function(){return{isImageUploadOpen:!1}},componentDidMount:function(){var n=this;if(t.tinymce)n.initializeEditor();else{var o=e.component.getByName("content");if(o.isLoadingTinyMce)var i=setInterval(function(){t.tinymce&&(n.initializeEditor(),clearInterval(i))},50);else o.loadTinyMce(function(){n.initializeEditor()})}},componentWillUnmount:function(){t.tinymce&&tinymce.remove("textarea#content-"+this.props.id)},handleChange:function(t){var n=this.editor.getContent();e.state.setComponent(this.props.id,{contentValue:n},this.props.flowKey,!0)},handleEvent:function(t){e.component.handleEvent(this,e.model.getComponent(this.props.id,this.props.flowKey),this.props.flowKey)},renderFileDialog:function(){var t={flowKey:this.props.flowKey,id:this.props.id,selectionEnabled:!0},n={flowKey:this.props.flowKey,id:this.props.id,multiple:!0};return this.props.isDesignTime||(t=e.utils.extend(t,{onRowClicked:this.onFileTableRowClicked}),n=e.utils.extend(t,{uploadComplete:this.onUploadComplete})),React.DOM.div({className:"modal show"},[React.DOM.div({className:"modal-dialog full-screen",onKeyUp:this.onEnter},[React.DOM.div({className:"modal-content full-screen"},[React.DOM.div({className:"modal-body"},[React.DOM.ul({className:"nav nav-tabs"},[React.DOM.li({className:"active"},[React.DOM.a({href:"#files","data-toggle":"tab"},"File List")]),React.DOM.li({className:""},[React.DOM.a({href:"#upload","data-toggle":"tab"},"Direct Upload")])]),React.DOM.div({className:"tab-content"},[React.DOM.div({className:"tab-pane active",id:"files"},[React.createElement(e.component.getByName("table"),t)]),React.DOM.div({className:"tab-pane",id:"upload"},[React.createElement(e.component.getByName("file-upload"),n)])])]),React.DOM.div({className:"modal-footer"},[React.DOM.button({className:"btn btn-default",onClick:this.onFileCancel},"Cancel")])])])])},onUploadComplete:function(t){var n=e.utils.getObjectDataProperty(t.objectData[0].properties,"Download Uri"),o=e.utils.getObjectDataProperty(t.objectData[0].properties,"Name");n&&(tinymce.activeEditor.execCommand("mceInsertContent",!1,'<img src="'+n.contentValue+'" alt="'+o.contentValue+'"/>'),this.setState({isImageUploadOpen:!1}))},onFileCancel:function(e){this.setState({isImageUploadOpen:!1})},onFileTableRowClicked:function(e){var t=e.currentTarget.lastChild.innerText,n=e.currentTarget.firstChild.innerText;null!=t&&t.length>0&&(tinymce.activeEditor.execCommand("mceInsertContent",!1,'<img src="'+t+'" alt="'+n+'"/>'),this.setState({isImageUploadOpen:!1}))},render:function(){e.log.info("Rendering Content: "+this.props.id);var t=e.model.getComponent(this.props.id,this.props.flowKey),n=e.state.getComponent(this.props.id,this.props.flowKey),o=e.model.getOutcomes(this.props.id,this.props.flowKey),i=n?n.contentValue:t.contentValue,s=!0;"undefined"!=typeof t.isValid&&0==t.isValid&&(s=!1);var a={id:"content-"+this.props.id,placeholder:t.hintValue,maxLength:t.maxSize,cols:t.width,rows:t.height,value:i};a["data-flowkey"]=this.props.flowKey,this.props.isDesignTime||(a.defaultValue=i),t.isEnabled||(a.disabled="disabled"),t.isRequired&&(a.required=""),t.isEditable||(a.readOnly="readonly");var r=["form-group",0==t.isVisible?"hidden":"",s?"":"has-error"].concat(e.styling.getClasses(this.props.parentId,this.props.id,"content",this.props.flowKey)).join(" "),l=[React.DOM.label({htmlFor:"content-"+this.props.id},[t.label,t.isRequired?React.DOM.span({className:"input-required"}," *"):null]),React.DOM.textarea(a,null),React.DOM.span({className:"help-block"},t.validationMessage),o&&o.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this)];return this.state.isImageUploadOpen&&l.push(this.renderFileDialog()),React.DOM.div({className:r,id:this.props.id},l)}});e.component.register("content",n)}(manywho,window),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({toggleValue:function(e){e.stopPropagation();var t=this.state.toggle,n=e.currentTarget.getAttribute("data-value-id");t[n]=!t[n],this.setState({toggle:t})},toggleHeader:function(e){var t=this.state.toggle;t[e.currentTarget.id]=!t[e.currentTarget.id],this.setState({toggle:t})},onBreadcrumbClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.state.paths,n=e.currentTarget.getAttribute("data-value-id"),o=Array.prototype.slice.call(e.currentTarget.parentNode.parentNode.childNodes),i=o.indexOf(e.currentTarget.parentNode);i!=-1&&(0==i?t[n]="":t[n]=t[n].split(".").slice(0,i).join(".")),this.setState({paths:t})},onValueViewClick:function(e){var t=this.state.paths,n=e.currentTarget.getAttribute("data-value-id"),o=e.currentTarget.getAttribute("data-path-part");t[n]=((t[n]||"")+"."+o).replace(/^\./gi,""),this.setState({paths:t})},renderValues:function(e,t,n,o,i){var s=this.state.toggle[t]||!1;return n=n||[],React.DOM.div({className:"debug-root"},[React.DOM.div({className:"debug-root-toggle",id:t,onClick:this.toggleHeader},[React.DOM.span({className:"glyphicon glyphicon-triangle-"+(s?"bottom":"right")},null),React.DOM.h5({className:"debug-title"},e),React.DOM.span({className:"label label-info"},n.length)]),React.DOM.ul({className:"list-unstyled debug-values "+(s?"":"hidden")},n.map(function(e){return this.renderValue(this.state.paths[e[i]]||"",e,o,i)},this))])},renderValue:function(t,n,o,i){var s=this.state.toggle[n[i]]||!1,a=e.utils.getValueByPath(n,t);return t=n[o]+"."+t,React.DOM.li({className:"clearfix"},[React.DOM.span({className:"glyphicon debug-value-toggle glyphicon-triangle-"+(s?"bottom":"right"),"data-value-id":n[i],onClick:this.toggleValue},null),React.DOM.div({className:"debug-value"},[React.DOM.ol({className:"breadcrumb debug-value-breadcrumb","data-value-id":n[i],onClick:this.toggleValue},t.split(".").map(function(t){return e.utils.isNullOrWhitespace(t)?null:React.DOM.li(null,React.DOM.a({href:"#",onClick:this.onBreadcrumbClick,"data-value-id":n[i]},t))},this)),React.DOM.table({className:"table table-striped table-bordered debug-value-table "+(s?"":"hidden")},React.DOM.tbody(null,Object.keys(a).map(function(e){var t=a[e],o=e;return"object"==typeof t&&t&&(t.developerName&&(o=t.developerName),t=React.DOM.button({className:"btn btn-primary btn-sm","data-value-id":n[i],"data-path-part":e,onClick:this.onValueViewClick},"View")),React.DOM.tr(null,[React.DOM.td(null,o),React.DOM.td(null,t||"null")])},this)))])])},renderLogEntries:function(t){var n=this.state.toggle.executionlog;return React.DOM.div({className:"debug-root"},[React.DOM.div({className:"debug-root-toggle",id:"executionlog",onClick:this.toggleHeader},[React.DOM.span({className:"glyphicon glyphicon-triangle-"+(n?"bottom":"right")},null),React.DOM.h5({className:"debug-title"},"Execution Log"),React.DOM.span({className:"label label-info"},t.length)]),React.DOM.div({className:n?null:"hidden"},React.DOM.table({className:"table table-striped"},[React.DOM.tr(null,[React.DOM.th(null,"Timestamp"),React.DOM.th(null,"Message"),React.DOM.th(null,"Data")])].concat(e.utils.convertToArray(t).map(function(e){var t=new Date(e.timestamp);return React.DOM.tr(null,[React.DOM.td(null,t.toLocaleString()),React.DOM.td(null,e.message)])}))))])},getInitialState:function(){return{paths:{},toggle:{}}},render:function(){if(e.settings.isDebugEnabled(this.props.flowKey)){e.log.info("Rendering Debug");var t=e.model.getRootFaults(this.props.flowKey)||[],n=e.model.getPreCommitStateValues(this.props.flowKey)||[],o=e.model.getStateValues(this.props.flowKey)||[],i=e.model.getExecutionLog(this.props.flowKey)||{},s=[];for(var a in e.state.getComponents(this.props.flowKey))e.state.getComponents(this.props.flowKey)[a].error&&s.push(e.state.getComponents(this.props.flowKey)[a].error);var r=[this.renderValues("Root Faults","rootfaults",t,"name","name"),this.renderValues("Component Errors","componenterrors",s,"id","id"),this.renderValues("Pre-Commit State Values","precommitstatevalues",n,"developerName","valueElementId"),this.renderValues("State Values","statevalues",o,"developerName","valueElementId"),this.renderLogEntries(i.entries||[])];return React.DOM.div({className:"panel panel-default debug"},[React.DOM.div({className:"panel-heading"},React.DOM.h3({className:"panel-title"},"Debug")),React.DOM.div({className:"panel-body"},r)])}return null}});e.component.register("debug",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({send:function(){var e=null,t=this;this.refs.files&&this.refs.files.state.fileNames.length>0?e=this.refs.files.onUpload():(e=jQuery.Deferred(),e.resolve()),e.done(function(e){return t.props.send(t.refs.textarea.getDOMNode().value,t.props.messageId,t.state.mentionedUsers,e&&e.files)}).then(function(){t.refs.textarea.getDOMNode().value=""})},onKeyPress:function(e){e.stopPropagation(),13!=e.charCode||e.shiftKey||(e.preventDefault(),this.send())},getInitialState:function(){return{mentionedUsers:{}}},componentDidMount:function(){var t=this;$(this.refs.textarea.getDOMNode()).textcomplete([{match:/@([A-Za-z]{2,})$/,index:1,search:function(n,o){e.social.getUsers(t.props.flowKey,n).done(function(e){o(e||[])}).fail(function(e){o([])})},template:function(e){return'<img src="'+e.avatarUrl+'"></img> '+e.fullName},replace:function(e){return t.state.mentionedUsers[e.id]=e,"@["+e.fullName+"] "}}],{appendTo:$(".mw-bs")})},render:function(){var t=null;return this.props.isAttachmentsEnabled&&(t=React.createElement(e.component.getByName("file-upload"),{flowKey:this.props.flowKey,multiple:!0,upload:e.social.attachFiles,smallInputs:!0,isChildComponent:!0,isUploadVisible:!1,id:this.props.id,browseCaption:"Attach Files",ref:"files"})),React.DOM.div({className:"feed-post clearfix"},[React.DOM.div({className:"feed-post-text"},[React.DOM.textarea({className:"form-control feed-message-text",rows:"2",onKeyPress:this.onKeyPress,onChange:this.onChange,defaultValue:"",ref:"textarea"},null),t]),React.DOM.button({className:"btn btn-sm btn-primary feed-post-send",onClick:this.send},this.props.caption)])}}),n=React.createClass({onToggleFollow:function(t){e.social.toggleFollow(this.props.flowKey)},onRefresh:function(t){e.social.refreshMessages(this.props.flowKey)},onGetNextPage:function(t){e.social.getMessages(this.props.flowKey)},onSendMessage:function(t,n,o,i){return e.social.sendMessage(this.props.flowKey,t,n,o,i)},renderThread:function(e,n,o){return e?React.DOM.ul({className:"media-list"},e.map(function(e){var i=new Date(e.createdDate),s=e.attachments||[];return React.DOM.li({className:"media"},[React.DOM.div({className:"media-left"},React.DOM.a({href:"#"},React.DOM.img({className:"media-object",src:e.sender.avatarUrl,width:"32",height:"32"},null))),React.DOM.div({className:"media-body feed-message"},[React.DOM.div({className:"media-heading"},[React.DOM.span({className:"feed-sender"},e.sender.fullName),React.DOM.span({className:"feed-created-date"},i.toLocaleString())]),React.DOM.div({className:"feed-message-text",dangerouslySetInnerHTML:{__html:e.text}},null),React.DOM.div({className:"feed-message-attachments"},s.map(function(e){return React.DOM.a({href:e.downloadUrl,target:"_blank"},e.name)})),this.renderThread(e.comments,!1,!1),n&&React.createElement(t,{caption:"Reply",flowKey:this.props.flowKey,messageId:e.id,send:this.onSendMessage,isAttachmentsEnabled:o},null)])])},this)):null},renderFollowers:function(e){if(e){var t=e.map(function(e){return React.DOM.img({className:"feed-follower",src:e.avatarUrl,title:e.fullName,width:"32",height:"32"})});return React.DOM.div({className:"row"},React.DOM.ul({className:"list-inline"},[React.DOM.span(null,React.DOM.strong(null,"Followers: "))].concat(t)))}return null},render:function(){var n=e.social.getStream(this.props.flowKey);if(n&&n.me){e.log.info("Rendering Feed");var o=n.messages||{},i=e.state.getComponent("feed",this.props.flowKey)||{},s=n.me.isFollower?"Un-Follow":"Follow";o.nextPage&&o.nextPage>1;return React.DOM.div({className:"panel panel-default feed",onKeyUp:this.onEnter},[React.DOM.div({className:"panel-heading clearfix"},[React.DOM.h3({className:"panel-title pull-left"},"Feed"),React.DOM.div({className:"pull-right btn-group"},[React.DOM.button({className:"btn btn-default btn-sm",onClick:this.onToggleFollow},[React.DOM.span({className:"glyphicon glyphicon-pushpin"},null)," "+s]),React.DOM.button({className:"btn btn-default btn-sm",onClick:this.onRefresh},[React.DOM.span({className:"glyphicon glyphicon-refresh"},null)," Refresh"])])]),React.DOM.div({className:"panel-body"},[this.renderFollowers(n.followers),React.createElement(t,{caption:"Post",flowKey:this.props.flowKey,send:this.onSendMessage,isAttachmentsEnabled:!0},null),this.renderThread(o.messages,!0)]),React.DOM.div({className:"hidden"},React.DOM.button({className:"btn btn-default pull-right",onClick:this.onGetNextPage},"More")),React.createElement(e.component.getByName("wait"),{isVisible:null!=i.loading,message:i.loading&&i.loading.message,isSmall:!0},null)])}return null}});e.component.register("feed",n)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({getDefaultProps:function(){return{uploadCaption:"Upload",browseCaption:"Browse",smallInputs:!1,isUploadVisible:!0,uploadComplete:null,upload:function(t,n,o){var i=e.utils.extractTenantId(t),s=e.state.getAuthenticationToken(t);return e.ajax.uploadFile(n,i,s,o)}}},onUpload:function(){if(this.state.fileNames.length>0){this.setState({isUploadDisabled:!0,isProgressVisible:!0,progress:0,error:null});var t=this,n=new FormData;Array.prototype.slice.call(this.state.files).forEach(function(e){n.append("FileData",e)});var o=!e.utils.isNullOrWhitespace(this.props.id)&&e.model.getComponent(this.props.id,this.props.flowKey);return o&&o.fileDataRequest&&n.append("FileDataRequest",JSON.stringify(o.fileDataRequest)),this.props.upload(this.props.flowKey,n,function(e){e.lengthComputable&&t.setState({progress:parseInt(e.loaded/e.total*100)})}).done(function(n){t.setState({isUploadDisabled:!1,isFileSelected:!1,isUploadComplete:!0,fileNames:[],error:null}),setTimeout(function(){t.setState({isUploadComplete:!1,isProgressVisible:!1,progress:100})},2e3),t.refs.upload.getDOMNode().value="",t.props.uploadComplete?t.props.uploadComplete(n):t.props.uploadComplete||!n||e.utils.isNullOrWhitespace(t.props.id)||(e.state.setComponent(t.props.id,{objectData:n.objectData},t.props.flowKey,!0),e.component.handleEvent(t,e.model.getComponent(t.props.id,t.props.flowKey),t.props.flowKey))}).fail(function(e){t.setState({isUploadDisabled:!1,isProgressVisible:!1,progress:0,error:e.statusText})})}},onDrop:function(e){this.props.isDesignTime||this.onFileSelected(e)},onFileSelected:function(t){if(!this.props.isDesignTime){this.setState({fileNames:Array.prototype.slice.call(t).map(function(e){return e.name}),files:t,isFileSelected:!0});var n=!e.utils.isNullOrWhitespace(this.props.id)&&e.model.getComponent(this.props.id,this.props.flowKey);n&&n.attributes&&n.attributes.isAutoUpload&&setTimeout(this.onUpload.bind(this))}},getInitialState:function(){return{isUploadDisabled:!1,isFileSelected:!1,isProgressVisible:!1,isUploadComplete:!1,fileNames:[],error:null}},render:function(){e.log.info("Rendering File Upload "+this.props.id);var t=!e.utils.isNullOrWhitespace(this.props.id)&&e.model.getComponent(this.props.id,this.props.flowKey),n=null;!this.props.isChildComponent&&this.props.id&&(n=e.model.getOutcomes(this.props.id,this.props.flowKey));var o=(this.state.progress||0)+"%",i=!1;t&&(i=t.attributes&&t.attributes.isAutoUpload);var s=["btn","btn-primary"],a=["form-control","filenames"],r=["progress-bar"],l=["file-upload"];this.props.smallInputs&&(s.push("btn-sm"),a.push("input-sm")),this.props.isUploadVisible||s.push("hidden"),this.state.isUploadComplete&&r.push("progress-bar-success"),0==t.isVisible&&l.push("hidden");var u={ref:"upload",multiple:null!=this.props.multiple?this.props.multiple:t.multiple,className:"dropzone"},p={className:s.join(" "),disabled:this.state.isUploadDisabled||!this.state.isFileSelected||this.props.isDesignTime};this.props.isDesignTime||(u=e.utils.extend(u,{onDrop:this.onDrop}),p=e.utils.extend(p,{onClick:this.onUpload}));var c=n&&n.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this);return React.DOM.div({className:l.join(" "),id:this.props.id},[React.DOM.div({className:"clearfix"},[React.createElement(Dropzone,u,[React.DOM.div(null,"Drop files here, or click to select files")]),React.DOM.div({className:"input-group "+(i?"hidden":"")},[React.DOM.input({type:"text",className:a.join(" "),readOnly:!0,value:this.state.fileNames.join(" ")}),React.DOM.span({className:"input-group-btn"},React.DOM.button(p,this.props.uploadCaption))])]),React.DOM.div({className:"progress files-progress "+(this.state.isProgressVisible?"":"hidden")},React.DOM.div({className:r.join(" "),style:{width:o}})),c])}});e.component.register("file-upload",t,["file_upload"])}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({toggleFlip:function(){this.setState({isFlipped:!this.state.isFlipped})},getInitialState:function(){return{isFlipped:!1,animationStyle:"rotateY"}},render:function(){var t=(e.model.getContainer(this.props.id,this.props.flowKey),e.model.getChildren(this.props.id,this.props.flowKey)),n=e.component.getChildComponents(t,this.props.id,this.props.flowKey),o="flip-container clearfix";return this.state.isFlipped&&(o+=" "+this.state.animationStyle),React.createElement("div",{className:o},React.createElement("div",{className:"flipper",onTouchEnd:this.toggleFlip,onClick:this.toggleFlip},React.createElement("div",{className:"front front-"+this.state.animationStyle},n[0]),React.createElement("div",{className:"back back-"+this.state.animationStyle},n[1])))}});e.component.registerContainer("flip",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){if(this.props.children){e.log.info("Rendering Footer");var t="mw-footer";return t+=e.settings.global("isFullWidth",this.props.flowKey,!1)?" container-fluid":" container",React.createElement("div",{className:t},this.props.children)}return null}});e.component.register("footer",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){function t(n,o){if(!e.model.isContainer(n)&&!n.isValid)return!0;for(var i=e.model.getChildren(n.id,o),s=0;s<i.length;s++)if(t(i[s],o))return!0;return!1}function n(e){for(var t=0;t<e.children.length;t++)for(var n=e.children[t],o=0;o<n.children.length;o++)n.children[o].classList.remove("active")}var o=React.createClass({componentDidMount:function(){!this.props.isDesignTime&&this.refs.group.children[0].children&&this.refs.group.children[0].children.length>0&&(n(this.refs.group),this.refs.group.children[0].children[this.state.activeTabIndex].classList.add("active"),this.refs.group.children[1].children[this.state.activeTabIndex].classList.add("active"))},componentDidUpdate:function(){!this.props.isDesignTime&&this.refs.group.children[0].children&&this.refs.group.children[0].children.length>0&&(n(this.refs.group),this.refs.group.children[0].children[this.state.activeTabIndex].classList.add("active"),this.refs.group.children[1].children[this.state.activeTabIndex].classList.add("active"))},getInitialState:function(){return{activeTabIndex:0}},onTabSelected:function(e){this.setState({activeTabIndex:e}),$(this.refs.tabs.children[e].querySelector("a")).tab("show")},render:function(){var n=this,o=e.model.getChildren(this.props.id,this.props.flowKey),i=o.map(function(e,o){var i=null;return!n.props.isDesignTime&&t(e,n.props.flowKey)&&(i+="has-error"),React.createElement("li",{className:i},React.createElement("a",{href:"#"+e.id,className:"control-label",onClick:n.onTabSelected.bind(null,o),"data-toggle":"tab"},e.label))});return this.props.isDesignTime?React.createElement("div",{className:"clearfix"},this.props.children||e.component.getChildComponents(o,this.props.id,this.props.flowKey)):React.createElement("div",{ref:"group"},React.createElement("ul",{className:"nav nav-tabs",ref:"tabs"},i),React.createElement("div",{className:"tab-content"},this.props.children||e.component.getChildComponents(o,this.props.id,this.props.flowKey)))}});e.component.registerContainer("group",o),e.styling.registerContainer("group",function(e,t){return["tab-pane","label-hidden"]})}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){return e.log.info("Rendering Hidden: "+this.props.id),null}});e.component.register("hidden",t)}(manywho),/*!
 Copyright 2015 ManyWho, Inc.
 Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
 file except in compliance with the License.
 You may obtain a copy of the License at: http://manywho.com/sharedsource
 Unless required by applicable law or agreed to in writing, software distributed under
 the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the specific language governing
 permissions and limitations under the License.
 */
function(e){var t=React.createClass({onClick:function(t){e.model.popHistory(t.currentTarget.id,this.props.flowKey),e.engine.navigate(this.props.id,null,t.currentTarget.id,this.props.flowKey)},renderOutcome:function(e,t,n){var o="outcome-info alert ";return e.id==t&&(o+=" selected-outcome"),React.DOM.div({className:o,style:{width:n}},[React.DOM.p({align:"center"},e.label)])},renderSteps:function(e){var t=this;return e.map(function(n,o){if(o<e.length-1&&n.name){var i=n.outcomes||[],s=Math.floor(100/i.length)-2+"%";return React.DOM.div({className:"history-row"},[React.DOM.div({id:n.id,className:"step bg-primary",onClick:t.onClick},[React.DOM.div({className:"step-title"},n.label||n.name),React.DOM.div({className:"step-content",dangerouslySetInnerHTML:{__html:n.content||""}})]),i.map(function(e){return this.renderOutcome(e,n.selectedOutcome,s)},this)])}},this)},render:function(){if(e.settings.global("history",this.props.flowKey)&&!e.settings.isDebugEnabled(this.props.flowKey)){var t=e.model.getHistory(this.props.flowKey);return React.DOM.div({className:"panel panel-default history-view"},[React.DOM.div({className:"panel-heading"},React.DOM.h3({className:"panel-title"},"History")),React.DOM.div({className:"panel-body"},this.renderSteps(t))])}return null}});e.component.register("history",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){var t=e.model.getChildren(this.props.id,this.props.flowKey);return React.createElement("div",{className:"row clearfix"},this.props.children||e.component.getChildComponents(t,this.props.id,this.props.flowKey))}});e.component.registerContainer("horizontal_flow",t),e.styling.registerContainer("horizontal_flow",function(e,t){var n=Math.floor(12/Math.max(1,t.childCount));return["col-sm-"+n]})}(manywho),/*!
 Copyright 2015 ManyWho, Inc.
 Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
 file except in compliance with the License.
 You may obtain a copy of the License at: http://manywho.com/sharedsource
 Unless required by applicable law or agreed to in writing, software distributed under
 the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the specific language governing
 permissions and limitations under the License.
 */
function(e){var t=React.createClass({render:function(){e.log.info("Rendering iframe: "+this.props.id);var t=e.styling.getClasses(this.props.parentId,this.props.id,"iframe",this.props.flowKey),n=e.model.getComponent(this.props.id,this.props.flowKey),o=e.model.getOutcomes(this.props.id,this.props.flowKey),i=o&&o.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this);return React.DOM.div({className:t.join(" "),id:this.props.id},[React.DOM.iframe({src:n.imageUri,width:n.width,height:n.height,id:this.props.id,frameBorder:0},null),i])}});e.component.register("iframe",t)}(manywho),/*!
 Copyright 2015 ManyWho, Inc.
 Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
 file except in compliance with the License.
 You may obtain a copy of the License at: http://manywho.com/sharedsource
 Unless required by applicable law or agreed to in writing, software distributed under
 the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the specific language governing
 permissions and limitations under the License.
 */
function(e){var t=React.createClass({render:function(){var t=e.styling.getClasses(this.props.parentId,this.props.id,"image",this.props.flowKey),n=e.model.getComponent(this.props.id,this.props.flowKey),o=e.model.getOutcomes(this.props.id,this.props.flowKey),i=o&&o.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this);return 0==n.isVisible&&t.push("hidden"),React.DOM.div({className:t.join(" "),id:this.props.id},[React.DOM.img({className:"img-responsive",src:n.imageUri,alt:n.developerName,id:this.props.id},null),i])}});e.component.register("image",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){var t=e.model.getChildren(this.props.id,this.props.flowKey);return React.createElement("div",{className:"clearfix"},this.props.children||e.component.getChildComponents(t,this.props.id,this.props.flowKey))}});e.component.registerContainer("inline_flow",t),e.styling.registerContainer("inline_flow",function(e,t){return["pull-left"]})}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){function t(t){switch(t.toUpperCase()){case e.component.contentTypes.string:return"text";case e.component.contentTypes.number:return"number";case e.component.contentTypes["boolean"]:return"checkbox";case e.component.contentTypes.password:return"password";case e.component.contentTypes.datetime:return"datetime";default:return"text"}}function n(e){return null==e||e.indexOf("01/01/0001")!=-1||e.indexOf("1/1/0001")!=-1||e.indexOf("0001-01-01")!=-1}var o=React.createClass({componentDidMount:function(){var t=e.model.getComponent(this.props.id,this.props.flowKey),o=e.state.getComponent(this.props.id,this.props.flowKey);if(e.utils.isEqual(t.contentType,e.component.contentTypes.datetime,!0)){var i=null,s=this.refs.datepicker.getDOMNode();$(s).datetimepicker({locale:t.attributes.dateTimeLocale||"en-us",format:t.attributes.dateTimeFormat||"MM/DD/YYYY"}).on("dp.change",this.handleChange),n(o.contentValue)?e.state.setComponent(this.props.id,{contentValue:null},this.props.flowKey,!0):(i=moment(o.contentValue,["MM/DD/YYYY hh:mm:ss A ZZ",moment.ISO_8601]),e.state.setComponent(this.props.id,{contentValue:i.format()},this.props.flowKey,!0),$(s).data("DateTimePicker").date(i))}else e.utils.isEqual(t.contentType,e.component.contentTypes.number,!0)&&this.setState({value:o&&null!=o.contentValue?o.contentValue:t.contentValue})},componentWillUnmount:function(){this.refs.datepicker&&$(this.refs.datepicker.getDOMNode()).data("DateTimePicker").destroy()},getInitialState:function(){return{value:null}},parseNumberInput:function(t,n){if(null!=t){if(t=t.replace(/^\s+|\s+$/g,""),e.utils.isNullOrWhitespace(t))return isNaN(t);var o=Math.pow(10,n)-1,i=Math.pow(10,n)*-1+1,s=parseFloat(t);return s=Math.min(s,o),s=Math.max(s,i)}},handleChange:function(t){var n=e.model.getComponent(this.props.id,this.props.flowKey);if(e.utils.isEqual(n.contentType,e.component.contentTypes["boolean"],!0))e.state.setComponent(this.props.id,{contentValue:t.target.checked},this.props.flowKey,!0);else if(e.utils.isEqual(n.contentType,e.component.contentTypes.number,!0)){var o=this.parseNumberInput(t.target.value,n.maxSize);null!==o&&""!==o&&(e.state.setComponent(this.props.id,{contentValue:o},this.props.flowKey,!0),this.setState({value:o}))}else if(e.utils.isEqual(n.contentType,e.component.contentTypes.datetime,!0)){var i=[moment.ISO_8601,"MM/DD/YYYY hh:mm:ss A ZZ"];n.attributes&&n.attributes.dateTimeFormat&&i.push(n.attributes.dateTimeFormat);var s=moment(t.target.value,i);s.isValid()?e.state.setComponent(this.props.id,{contentValue:s.format()},this.props.flowKey,!0):e.state.setComponent(this.props.id,{contentValue:t.target.value},this.props.flowKey,!0),this.setState({value:t.target.value})}else e.state.setComponent(this.props.id,{contentValue:t.target.value},this.props.flowKey,!0);n.contentType.toUpperCase()==e.component.contentTypes["boolean"]&&this.handleEvent(t),this.forceUpdate()},handleEvent:function(t){var n=null,o=t.relatedTarget;o&&(o.classList.contains("outcome")||o.classList.contains("control-label"))&&(n=function(){o.click()}),e.component.handleEvent(this,e.model.getComponent(this.props.id,this.props.flowKey),this.props.flowKey,n)},render:function(){e.log.info("Rendering Input: "+this.props.id);var n=e.model.getComponent(this.props.id,this.props.flowKey),o=e.state.getComponent(this.props.id,this.props.flowKey),i=e.model.getOutcomes(this.props.id,this.props.flowKey),s=!0,a=n.contentType||n.valueElementValueBindingReferenceId&&n.valueElementValueBindingReferenceId.contentType||"ContentString",r=o&&null!=o.contentValue?o.contentValue:n.contentValue,l={type:this.props.isDesignTime?"text":t(a),placeholder:n.hintValue,value:r,id:this.props.id,maxLength:n.maxSize,size:n.size};n.isEditable||(l.readOnly="readonly"),this.props.isDesignTime?n.isEnabled||(l.disabled="disabled"):l=e.utils.extend(l,{onChange:this.handleChange}),n.isRequired&&(l.required=""),"undefined"!=typeof n.isValid&&0==n.isValid&&(s=!1);var u=[s?"":"has-error",0==n.isVisible?"hidden":"",e.utils.isEqual(a,"ContentDateTime",!0)?"datetime-container":"",i?"has-outcomes":""].concat(e.styling.getClasses(this.props.parentId,this.props.id,"input",this.props.flowKey)).join(" "),p=i&&i.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this);return a.toUpperCase()==e.component.contentTypes["boolean"]?(("string"==typeof r&&e.utils.isEqual(r,"true",!0)||r===!0)&&(l.checked="checked"),n.isEditable||(l.disabled="disabled"),React.DOM.div({className:u},[React.DOM.div({className:"checkbox "},React.DOM.label(null,[React.DOM.input(l,null),n.label])),React.DOM.span({className:"help-block"},n.validationMessage),React.DOM.span({className:"help-block"},n.helpInfo),p])):(n.hasEvents&&!this.props.isDesignTime&&(l.onBlur=this.handleEvent),l.className="form-control ",a.toUpperCase()==e.component.contentTypes.datetime?(l.className+="datepicker",l.ref="datepicker",l.value=this.state.value):e.utils.isEqual(a,e.component.contentTypes.number,!0)&&(l.style={width:30+15*n.size+"px !important"},l.max=Math.pow(10,Math.min(n.maxSize,17))-1,l.min=Math.pow(10,Math.min(n.maxSize,17))*-1+1,l.value=this.state.value),React.DOM.div({className:"form-group "+u},[React.DOM.label({htmlFor:this.props.id},[n.label,n.isRequired?React.DOM.span({className:"input-required"}," *"):null]),React.DOM.input(l,null),React.DOM.span({className:"help-block"},n.validationMessage),React.DOM.span({className:"help-block"},n.helpInfo),p]))}});e.component.register("input",o,["checkbox"])}(manywho);/*!
Copyright 2016 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ItemsContainer=function(e){function t(t){e.call(this,t),this.state={search:null},this.onOutcome=this.onOutcome.bind(this),this.load=this.load.bind(this),this.search=this.search.bind(this),this.refresh=this.refresh.bind(this),this.select=this.select.bind(this),this.selectAll=this.selectAll.bind(this),this.clearSelection=this.clearSelection.bind(this),this.onNext=this.onNext.bind(this),this.onPrev=this.onPrev.bind(this)}return __extends(t,e),t.prototype.areBulkActionsDefined=function(e){return!!e&&e.filter(function(e){return e.isBulkAction}).length>0},t.prototype.onOutcome=function(e,t){var n=this;if(!this.props.isDesignTime){var o=manywho.model.getComponent(this.props.id,this.props.flowKey),i=manywho.component.getSelectedRows(o,[e]);this.updateState(i,!1);var s=manywho.model.getOutcome(t,this.props.flowKey);if(s.attributes){if(s.attributes.uri)return void window.open(s.attributes.uri,"_blank");if(s.attributes.uriTypeElementPropertyId){var a=i[0].properties.filter(function(e){return manywho.utils.isEqual(e.typeElementPropertyId,s.attributes.uriTypeElementPropertyId,!0)})[0];if(a)return void window.open(a.contentValue,"_blank")}}manywho.engine.move(s,this.props.flowKey).then(function(){s.isOut&&manywho.engine.flowOut(s,n.props.flowKey)})}},t.prototype.updateState=function(e,t){var n={objectData:e};t&&(n.search=null),manywho.state.setComponent(this.props.id,n,this.props.flowKey,!0)},t.prototype.load=function(e,t){var n=manywho.settings.global("paging."+e.componentType.toLowerCase()),o=parseInt(e.attributes.paginationSize);isNaN(o)||(n=o),e.objectDataRequest?manywho.engine.objectDataRequest(this.props.id,e.objectDataRequest,this.props.flowKey,n,t.search,null,null,t.page):e.fileDataRequest?manywho.engine.fileDataRequest(this.props.id,e.fileDataRequest,this.props.flowKey,n,t.search,null,null,t.page):(manywho.state.setComponent(this.props.id,t,this.props.flowKey,!0),this.forceUpdate())},t.prototype.search=function(e,t){var n=manywho.model.getComponent(this.props.id,this.props.flowKey),o=manywho.state.getComponent(this.props.id,this.props.flowKey);t&&this.clearSelection(!1),o.search=e,o.page=1,this.load(n,o)},t.prototype.refresh=function(){this.search(null,!0)},t.prototype.select=function(e,t){var n=manywho.model.getComponent(this.props.id,this.props.flowKey),o=manywho.state.getComponent(this.props.id,this.props.flowKey),i=(o.objectData||[]).map(function(e){return e}),s=null;"string"==typeof e?s=n.objectData.filter(function(t){return manywho.utils.isEqual(t.externalId,e,!0)})[0]:"object"==typeof e&&(s=e);var a=s.externalId;s.isSelected=!s.isSelected,n.isMultiSelect?s.isSelected?i.push(s):i=i.filter(function(e){return!manywho.utils.isEqual(e.externalId,s.externalId,!0)}):(n.objectData.filter(function(e){return!manywho.utils.isEqual(e.externalId,a,!0)}).forEach(function(e){e.isSelected=!1}),i=s.isSelected?[s]:[]),this.updateState(i,t),manywho.component.handleEvent(this,manywho.model.getComponent(this.props.id,this.props.flowKey),this.props.flowKey)},t.prototype.selectAll=function(e,t){var n=manywho.model.getComponent(this.props.id,this.props.flowKey),o=manywho.state.getComponent(this.props.id,this.props.flowKey);if(o.objectData&&o.objectData.length>0)this.clearSelection(t);else{var i=n.objectData.map(function(e){return e.isSelected=!0,e});this.updateState(i,t),manywho.component.handleEvent(this,manywho.model.getComponent(this.props.id,this.props.flowKey),this.props.flowKey)}},t.prototype.clearSelection=function(e){var t=manywho.model.getComponent(this.props.id,this.props.flowKey);t.objectData&&t.objectData.forEach(function(e){e.isSelected=!1}),this.updateState([],e),manywho.component.handleEvent(this,manywho.model.getComponent(this.props.id,this.props.flowKey),this.props.flowKey)},t.prototype.onNext=function(){var e=manywho.model.getComponent(this.props.id,this.props.flowKey),t=manywho.state.getComponent(this.props.id,this.props.flowKey);t.page||(t.page=1),t.page++,manywho.state.setComponent(this.props.id,t,this.props.flowKey,!0),e.objectDataRequest||e.fileDataRequest?this.load(e,t):e.attributes.pagination&&manywho.utils.isEqual(e.attributes.pagination,"true",!0)&&this.forceUpdate()},t.prototype.onPrev=function(){var e=manywho.model.getComponent(this.props.id,this.props.flowKey),t=manywho.state.getComponent(this.props.id,this.props.flowKey);t.page--,manywho.state.setComponent(this.props.id,t,this.props.flowKey,!0),e.objectDataRequest||e.fileDataRequest?this.load(e,t):e.attributes.pagination&&manywho.utils.isEqual(e.attributes.pagination,"true",!0)&&this.forceUpdate()},t.prototype.render=function(){var e=manywho.model.getComponent(this.props.id,this.props.flowKey),t=this.props.isDesignTime?{error:null,loading:!1}:manywho.state.getComponent(this.props.id,this.props.flowKey)||{},n=manywho.model.getOutcomes(this.props.id,this.props.flowKey),o=manywho.component.getDisplayColumns(e.columns)||[],i=e.objectDataRequest&&e.objectDataRequest.hasMoreResults||e.fileDataRequest&&e.fileDataRequest.hasMoreResults,s=null,a=0;if(e.objectDataRequest||e.fileDataRequest)(e.objectDataRequest||e.fileDataRequest)&&(s=e.objectData,a=parseInt(manywho.settings.flow("paging."+e.componentType.toLowerCase(),this.props.flowKey)||10));else if(s=manywho.utils.isNullOrWhitespace(t.search)?e.objectData:e.objectData.filter(function(e){return e.properties.filter(function(e){var n=o.filter(function(t){return t.typeElementPropertyId===e.typeElementPropertyId&&t.isDisplayValue});return!!(n&&n.length>0)&&e.contentValue.toLowerCase().indexOf(t.search.toLowerCase())!=-1}).length>0}),e.attributes.pagination&&manywho.utils.isEqual(e.attributes.pagination,"true",!0)&&s){var r=t.page-1||0,l=parseInt(e.attributes.paginationSize);a=parseInt(manywho.settings.flow("paging."+e.componentType.toLowerCase(),this.props.flowKey)||10),isNaN(l)||(a=l),a>0&&(i=r*a+a+1<=s.length,s=s.slice(r*a,r*a+a))}var u=null;t.error&&(u=React.createElement("div",{className:"mw-items-error"},React.createElement("p",{className:"lead"},t.error.message),React.createElement("button",{className:"btn btn-danger",onClick:this.search},"Retry"))),0==o.length&&(u=React.createElement("div",{className:"mw-items-error"},React.createElement("p",{className:"lead"},"No display columns have been defined"))),t.loading||s&&0!=s.length||(u=React.createElement("div",{className:"mw-items-empty"},React.createElement("p",{className:"lead"},manywho.settings.global("localization.noResults",this.props.flowKey))));var p={id:this.props.id,parentId:this.props.parentId,flowKey:this.props.flowKey,isDesignTime:this.props.isDesignTime,contentElement:u,hasMoreResults:i,onOutcome:this.onOutcome,select:this.select,selectAll:this.selectAll,clearSelection:this.clearSelection,objectData:s,onSearch:this.search,outcomes:n,refresh:this.refresh,onNext:this.onNext,onPrev:this.onPrev,page:t.page||1,limit:a,isLoading:null!==t.loading&&"undefined"!=typeof t.loading};switch(e.componentType.toUpperCase()){case"TABLE":case"FILES":return React.createElement(manywho.component.getByName("mw-table"),p);case"TILES":return React.createElement(manywho.component.getByName("mw-tiles"),p);case"SELECT":case"SHARED_ELEMENT_SELECTOR":return React.createElement(manywho.component.getByName("mw-select"),p)}return null},t}(React.Component);manywho.component.register("mw-items-container",ItemsContainer,["table","files","tiles","select"]);/*!
Copyright 2016 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ItemsHeader=function(e){function t(t){e.call(this,t),this.state={search:null},this.onSearchChanged=this.onSearchChanged.bind(this),this.onSearchEnter=this.onSearchEnter.bind(this),this.onSearch=this.onSearch.bind(this)}return __extends(t,e),t.prototype.onSearchChanged=function(e){this.setState({search:e.currentTarget.value})},t.prototype.onSearchEnter=function(e){13==e.keyCode&&(e.stopPropagation(),this.props.onSearch(this.state.search,!0))},t.prototype.onSearch=function(e){this.props.onSearch(this.state.search,!0)},t.prototype.render=function(){var e=this,t=null,n=null,o=null;return this.props.isSearchable&&(t=React.createElement("div",{className:"mw-items-header-search input-group"},React.createElement("input",{className:"form-control",value:this.state.search,onChange:this.onSearchChanged,onKeyUp:this.onSearchEnter,placeholder:"Search"}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{className:"btn btn-default",onClick:this.onSearch},React.createElement("span",{className:"glyphicon glyphicon-search"}))))),this.props.outcomes&&(n=React.createElement("div",{className:"mw-items-header-outcomes"},this.props.outcomes.filter(function(e){return e.isBulkAction}).map(function(t){return React.createElement(manywho.component.getByName("outcome"),{id:t.id,flowKey:e.props.flowKey})}))),this.props.isRefreshable&&(o=React.createElement("button",{className:"btn btn-sm btn-default",onClick:this.props.refresh},React.createElement("span",{className:"glyphicon glyphicon-refresh"}))),React.createElement("div",{className:"mw-items-header"},t,o,n)},t}(React.Component);manywho.component.register("mw-items-header",ItemsHeader),/*!
 Copyright 2015 ManyWho, Inc.
 Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
 file except in compliance with the License.
 You may obtain a copy of the License at: http://manywho.com/sharedsource
 Unless required by applicable law or agreed to in writing, software distributed under
 the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the specific language governing
 permissions and limitations under the License.
 */
function(e){var t=React.createClass({render:function(){var t=e.styling.getClasses(this.props.parentId,this.props.id,"list",this.props.flowKey),n=e.model.getComponent(this.props.id,this.props.flowKey),o=e.state.getComponent(this.props.id,this.props.flowKey)||{},i=e.model.getOutcomes(this.props.id,this.props.flowKey),s=e.component.getDisplayColumns(n.columns)[0].typeElementPropertyId;if(0==n.isVisible&&t.push("hidden"),n.objectData)var a=n.objectData.map(function(t){var n=t.properties.filter(function(t){return e.utils.isEqual(t.typeElementPropertyId,s,!0)})[0].contentValue;return React.DOM.li({id:t.externalId},n)});var r=React.DOM.ul(null,a||null);n.attributes.ordered&&!e.utils.isEqual(n.attributes.ordered,"false",!0)&&(r=React.DOM.ol(null,a||null));var l=i&&i.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this);return React.DOM.div({className:t.join(" "),id:this.props.id},[React.DOM.label(null,n.label),r,l,React.createElement(e.component.getByName("wait"),{isVisible:o.loading,message:o.loading&&o.loading.message,isSmall:!0},null)])}});e.component.register("list",t)}(manywho),/*!
 Copyright 2015 ManyWho, Inc.
 Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
 file except in compliance with the License.
 You may obtain a copy of the License at: http://manywho.com/sharedsource
 Unless required by applicable law or agreed to in writing, software distributed under
 the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the specific language governing
 permissions and limitations under the License.
 */
function(e){var t=React.createClass({getInitialState:function(){return{username:this.props.username||"",password:"",usernameError:"",passwordError:"",loading:null,faults:null}},handleChange:function(e,t){var n=this.state;n[e]=t.target.value,this.setState(n)},onEnter:function(e){e.keyCode&&13==e.keyCode&&this.onSubmit()},dismiss:function(e){this.setState({faults:null})},onSubmit:function(){var t=this.state;if(e.utils.isNullOrWhitespace(this.state.username)||e.utils.isNullOrWhitespace(this.state.password))t.usernameError="",t.passwordError="",e.utils.isNullOrWhitespace(this.state.username)&&(t.usernameError="This field is required."),e.utils.isNullOrWhitespace(this.state.password)&&(t.passwordError="This field is required.");else{t.loading={message:""},t.usernameError="",t.passwordError="";var n=this;if(e.utils.isEqual(this.props.api,"run",!0))e.ajax.login(this.props.loginUrl,this.state.username,this.state.password,null,null,this.props.stateId,e.utils.extractTenantId(this.props.flowKey)).then(function(t){var o=n.state;o.loading=null,e.state.setLogin(null,n.props.flowKey),e.authorization.setAuthenticationToken(t,n.props.flowKey),n.props.callback&&n.props.callback.execute.apply(void 0,[n.props.callback].concat(n.props.callback.args)),n.setState(o)}).fail(function(e){var t=n.state;t.loading=null,t.password="",t.faults=e.responseText,n.setState(t)});else if(e.utils.isEqual(this.props.api,"draw",!0)){var o={loginUrl:this.props.loginUrl,username:this.state.username,password:this.state.password};e.ajax.builderLogin(o).then(function(e){var t=n.state;t.loading=null,n.props.callback&&n.props.callback.call(this,e),localStorage.setItem("manywho-draw-login-username",n.state.username),this._isMounted&&n.setState(newstate)}).fail(function(e){var t=n.state;t.loading=null,t.password="",n.refs.password.value="",t.faults=e.responseText,n.setState(t)})}}this.setState(t)},componentDidMount:function(){this.refs.username&&(this.refs.username.focus(),this.props.username&&this.refs.username.setSelectionRange(0,this.props.username.length)),this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},renderForm:function(){var t=["form-group","has-outcomes","pull-left","mw-input"],n=["form-group","has-outcomes","pull-left","mw-input"];return e.utils.isNullOrWhitespace(this.state.usernameError)||t.push("has-error"),e.utils.isNullOrWhitespace(this.state.passwordError)||n.push("has-error"),React.DOM.div({className:"mw-vertical_flow mw-container clearfix"},[React.DOM.div({className:"mw-inline_flow mw-container clearfix"},React.DOM.div({className:"pull-left mw-presentation"},React.DOM.span({},["Directory: ",React.DOM.strong({},this.props.directoryName)]))),React.DOM.div({className:"mw-inline_flow mw-container clearfix"},React.DOM.div({className:"clearfix"},React.DOM.div({className:t.join(" ")},[React.DOM.label({htmlFor:"mw-username"},[React.DOM.span({},"Username"),React.DOM.span({className:"input-required"}," *")]),React.DOM.input({type:"text",id:"mw-username",defaultValue:this.state.username,maxLength:"255",size:"60",className:"form-control",ref:"username",onChange:this.handleChange.bind(null,"username")}),React.DOM.span({className:"help-block"},this.state.usernameError)]))),React.DOM.div({className:"mw-inline_flow mw-container clearfix"},[React.DOM.div({className:"clearfix"},[React.DOM.div({className:n.join(" ")},[React.DOM.label({htmlFor:"mw-password"},[React.DOM.span({},"Password"),React.DOM.span({className:"input-required"}," *")]),React.DOM.input({type:"password",id:"mw-password",defaultValue:this.state.password,maxLength:"255",size:"25",className:"form-control",ref:"password",onChange:this.handleChange.bind(null,"password")}),React.DOM.span({className:"help-block"},this.state.passwordError)])])])])},renderModal:function(){var t=this.state.faults&&React.DOM.ul({className:"center-notifications notifications"},[React.DOM.li({},[React.DOM.div({className:"alert notification alert-danger"},[React.DOM.button({className:"close",onClick:this.dismiss},React.DOM.span(null,"×")),React.DOM.span(null,this.state.faults)])])]);return React.DOM.div({className:"modal show"},[React.DOM.div({className:"modal-dialog",onKeyUp:this.onEnter},[React.DOM.div({className:"modal-content"},[React.DOM.div({className:"modal-header"},React.DOM.h4({className:"modal-title"},"Login")),React.DOM.div({className:"modal-body"},[this.renderForm()]),React.DOM.div({className:"modal-footer"},React.DOM.button({className:"btn btn-primary",onClick:this.onSubmit},"Login")),React.createElement(e.component.getByName("wait"),{isVisible:this.state.loading,message:this.state.loading&&this.state.loading.message},null),t])])])},renderBackdrop:function(e){return React.DOM.div(null,[React.DOM.div({className:"modal-backdrop full-height"},null),e])},render:function(){return e.log.info("Rendering Login"),this.renderBackdrop(this.renderModal())}});e.component.register("mw-login",t,["mw_login"])}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({mixins:[e.component.mixins.enterKeyHandler],componentDidMount:function(){var t=this;e.utils.removeLoadingIndicator("loader"),e.settings.global("syncOnUnload",this.props.flowKey,!0)&&window.addEventListener("beforeunload",function(n){e.engine.sync(t.props.flowKey)})},render:function(){e.log.info("Rendering Main");var t=e.model.getChildren("root",this.props.flowKey),n=e.model.getOutcomes("root",this.props.flowKey),o=e.state.getComponent("main",this.props.flowKey)||{},i=e.model.getAttributes(this.props.flowKey),s=e.component.getChildComponents(t,this.props.id,this.props.flowKey),a=e.settings.global("navigation.isFixed",this.props.flowKey,!0),r=e.settings.global("outcomes.isFixed",this.props.flowKey,!1),l=React.createElement(e.component.getByName("navigation"),{id:e.model.getDefaultNavigationId(this.props.flowKey),flowKey:this.props.flowKey,isFixed:a,isFullWidth:e.settings.global("isFullWidth",this.props.flowKey,!1)});o&&null==o.loading&&!e.utils.isEqual(e.model.getInvokeType(this.props.flowKey),"sync",!0)&&e.component.focusInput(this.props.flowKey);var u=e.component.getOutcomes(n,this.props.flowKey),p=null;null!=i&&"undefined"!=typeof i.outcomes&&(r=e.utils.isEqual(i.outcomes,"fixed",!1)),r&&(p=React.createElement(e.component.getByName("footer"),{flowKey:this.props.flowKey},u),u=null);var c="main";return c+=e.settings.global("isFullWidth",this.props.flowKey,!1)?" container-fluid full-width":" container",(e.settings.isDebugEnabled(this.props.flowKey)||e.settings.global("history",this.props.flowKey))&&(c+=" auto-width"),React.createElement("div",{className:"main-container"},React.createElement("div",{className:"main-container-inner"},a?l:null,React.createElement("div",{className:"main-scroller"},a?null:l,React.createElement("div",{className:c,onKeyUp:this.onEnter,ref:"main"},React.createElement("h2",{className:"page-label"},e.model.getLabel(this.props.flowKey)),s,u,React.createElement(e.component.getByName("status"),{flowKey:this.props.flowKey}),React.createElement(e.component.getByName("voting"),{flowKey:this.props.flowKey}),React.createElement(e.component.getByName("feed"),{flowKey:this.props.flowKey}))),r?p:null,React.createElement(e.component.getByName("notifications"),{flowKey:this.props.flowKey,position:"left"}),React.createElement(e.component.getByName("notifications"),{flowKey:this.props.flowKey,position:"center"}),React.createElement(e.component.getByName("notifications"),{flowKey:this.props.flowKey,position:"right"}),React.createElement(e.component.getByName("wait"),{isVisible:o.loading,message:o.loading&&o.loading.message},null)),React.createElement(e.component.getByName("debug"),{flowKey:this.props.flowKey}),React.createElement(e.component.getByName("history"),{flowKey:this.props.flowKey}))}});e.component.register("main",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({mixins:[e.component.mixins.enterKeyHandler],renderModal:function(){var t=e.model.getChildren("root",this.props.flowKey),n=e.model.getOutcomes("root",this.props.flowKey),o=e.state.getComponent(e.utils.extractElement(this.props.flowKey),this.props.flowKey)||{};return o&&null==o.loading&&!e.utils.isEqual(e.model.getInvokeType(this.props.flowKey),"sync",!0)&&e.component.focusInput(this.props.flowKey),React.DOM.div({className:"modal show"},[React.DOM.div({className:"modal-dialog",onKeyUp:this.onEnter},[React.DOM.div({className:"modal-content"},[React.DOM.div({className:"modal-header"},[React.DOM.h4({className:"modal-title"},e.model.getLabel(this.props.flowKey))]),React.DOM.div({className:"modal-body"},[e.component.getChildComponents(t,this.props.id,this.props.flowKey)]),React.DOM.div({className:"modal-footer"},[e.component.getOutcomes(n,this.props.flowKey)]),React.createElement(e.component.getByName("notifications"),{flowKey:this.props.flowKey,position:"left"}),React.createElement(e.component.getByName("notifications"),{flowKey:this.props.flowKey,position:"center"}),React.createElement(e.component.getByName("notifications"),{flowKey:this.props.flowKey,position:"right"}),React.createElement(e.component.getByName("wait"),{isVisible:o.loading,message:o.loading&&o.loading.message},null)])])])},renderBackdrop:function(e){return React.DOM.div(null,[React.DOM.div({className:"modal-backdrop full-height"},null),e])},render:function(){return e.log.info("Rendering Modal"),this.props.container&&this.props.container.classList.remove("hidden"),this.renderBackdrop(this.renderModal())}});e.component.register("modal",t,["modal-standalone"])}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({getItem:function(e,t){for(var n in e){if(n===t)return e[t];var o=e[n];if(o.items){var i=this.getItem(o.items,t);if(i)return i}}},getHeaderElement:function(e,t){var n=[React.createElement("button",{className:"navbar-toggle collapsed","data-toggle":"collapse","data-target":"#"+e,ref:"toggle"},React.createElement("span",{className:"sr-only"},"Toggle Navigation"),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}),React.createElement("span",{className:"icon-bar"}))];return null!=t.label&&t.label.trim().length>0&&n.push(React.createElement("a",{className:"navbar-brand",href:"#"},t.label)),React.createElement("div",{className:"navbar-header"},n)},getNavElements:function(e,t){var n=[];for(var o in e){var i=e[o],s=null,a=[i.isCurrent?"active":"",0==i.isVisible?"hidden":"",i.isEnabled?"":"disabled",t?"top-nav-element":""];null!=i.items?(a.push("dropdown"),s=React.createElement("li",{className:a.join(" ")},React.createElement("a",{href:"#",id:i.id,"data-toggle":"dropdown"},i.label,React.createElement("span",{className:"caret"})),React.createElement("ul",{className:"dropdown-menu"},this.getNavElements(i.items,!1)))):s=React.createElement("li",{className:a.join(" ")},React.createElement("a",{href:"#",onClick:this.onClick,id:i.id},i.label)),n.push(s)}return n},onClick:function(t){t.preventDefault();var n=e.model.getNavigation(this.props.id,this.props.flowKey),o=this.getItem(n.items,t.target.id);return!!o.isEnabled&&(e.utils.isEqual(window.getComputedStyle(this.refs.toggle).display,"none",!0)||this.refs.toggle.click(),void e.engine.navigate(this.props.id,t.target.id,null,this.props.flowKey))},render:function(){var t=e.model.getNavigation(this.props.id,this.props.flowKey);if(t&&t.isVisible){e.log.info("Rendering Navigation");var n=this.getNavElements(t.items,!0);n=n.concat(e.settings.global("navigation.components")||[]),n=n.concat(e.settings.flow("navigation.components",this.props.flowKey)||[]);var o=t.returnToParent||null,i="navbar navbar-default";e.settings.global("navigation.isWizard",this.props.flowKey,!0)&&(i+=" navbar-wizard");var s="";return this.props.isFullWidth||(s+=" container"),React.createElement("nav",{className:i,ref:"navigationBar"},React.createElement("div",{className:s},this.getHeaderElement(this.props.id,t),React.createElement("div",{className:"collapse navbar-collapse",id:this.props.id,ref:"container"},React.createElement("ul",{className:"nav navbar-nav"},n),o)))}return null}});e.component.register("navigation",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){var t=e.model.getNotifications(this.props.flowKey,this.props.position),n=e.component.getByName("notification"),o=t.length>0?"20px":null;return React.DOM.ul({className:this.props.position+"-notifications notifications",style:{padding:o}},t.map(function(e){return React.DOM.li(null,React.createElement(n,{model:e,flowKey:this.props.flowKey}))},this))}});e.component.register("notifications",t);var n=React.createClass({dismiss:function(){e.model.removeNotification(this.props.flowKey,this.props.model)},componentDidMount:function(){if(this.props.model.timeout&&this.props.model.timeout>0){var e=this;this.timeout=setTimeout(function(){clearTimeout(e.timeout),e.dismiss()},this.props.model.timeout)}},render:function(){e.log.info("Rendering Notification");var t=["alert notification","alert-"+this.props.model.type,this.props.model.dismissible?"alert-dismissible":null].join(" ");return React.DOM.div({className:t},[this.props.model.dismissible?React.DOM.button({className:"close",onClick:this.dismiss},React.DOM.span(null,"×")):null,React.DOM.span(null,this.props.model.message)])}});e.component.register("notification",n)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){function t(t){if(t.attributes&&t.attributes.type)return"btn-"+t.attributes.type;var n=t.pageActionType||t.pageActionBindingType;if(!e.utils.isNullOrWhitespace(n))switch(n.toLowerCase()){case"save":case"new":case"apply":case"submit":case"insert":return"btn-primary";case"add":case"import":case"update":case"upsert":return"btn-success";case"edit":case"escalate":case"query":return"btn-info";case"delete":case"cancel":case"reject":case"remove":return"btn-danger";default:return"btn-default"}return"btn-default"}function n(t){if(t.attributes&&t.attributes.icon)return"glyphicon-"+t.attributes.icon;var n=t.pageActionType||t.pageActionBindingType;if(!e.utils.isNullOrWhitespace(n))switch(n.toLowerCase()){case"save":return"glyphicon-floppy-disk";case"new":return"glyphicon-new-window";case"apply":return"glyphicon-ok";case"submit":return"glyphicon-circle-arrow-down";case"insert":return"glyphicon-log-in";case"add":return"glyphicon-plus";case"import":return"glyphicon-import";case"update":return"glyphicon-edit";case"upsert":return"glyphicon-chevron-up";case"edit":return"glyphicon-pencil";case"escalate":return"glyphicon-hand-up";case"query":return"glyphicon-console";case"delete":return"glyphicon-trash";case"cancel":return"glyphicon-arrow-left";case"reject":return"glyphicon-thumbs-down";case"remove":return"glyphicon-remove";default:return"glyphicon-plus"}return null}var o=React.createClass({getContent:function(e,t){if(!t)return e.label;switch(t.toUpperCase()){case"ICON":case"ICONS":return React.createElement("span",{className:"glyphicon "+n(e)});case"ICONNOBACKGROUND":return React.createElement("span",{className:"glyphicon "+n(e)});case"ICONANDTEXT":return[React.createElement("span",{className:"glyphicon "+n(e)}),e.label];default:return e.label}},getSize:function(t){if(this.props.size)return"btn-"+this.props.size;if(t.attributes&&t.attributes.size)return"btn-"+t.attributes.size;if(!e.utils.isNullOrWhitespace(t.pageObjectBindingId)){var n=e.model.getComponent(t.pageObjectBindingId,this.props.flowKey);if(n)return"btn-sm"}return""},onClick:function(t){var n=this;t.preventDefault(),t.stopPropagation();var o=e.model.getOutcome(this.props.id,this.props.flowKey);this.props.onClick?this.props.onClick(t,o,this.props.flowKey):e.engine.move(o,this.props.flowKey).then(function(){o.isOut&&e.engine.flowOut(o,n.props.flowKey)})},shouldComponentUpdate:function(e,t){return this.props.id!=e.id},render:function(){e.log.info("Rendering Outcome: "+this.props.id);var n=e.model.getOutcome(this.props.id,this.props.flowKey),o="outcome btn "+t(n)+" "+this.getSize(n),i=this.getContent(n,e.settings.global("outcomes.display",this.props.flowKey)),s=null;return n.attributes&&(n.attributes.classes&&(o+=" "+n.attributes.classes),n.attributes.display&&(i=this.getContent(n,n.attributes.display)),e.utils.isEqual(n.attributes.display,"ICONNOBACKGROUND",!0)&&(o+=" btn-nobackground"),n.attributes.uri&&(s=n.attributes.uri)),e.utils.isNullOrWhitespace(this.props.display)||(i=this.getContent(n,this.props.display)),s?React.createElement("a",{id:this.props.id,className:o,title:n.label,href:s,target:"_blank"},i):React.createElement("button",{id:this.props.id,className:o,onClick:this.onClick,title:n.label},i)}});e.component.register("outcome",o)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){return e.log.info("Rendering Pagination"),React.createElement("div",{className:"mw-pagination"},React.createElement("button",{className:"btn btn-default",onClick:this.props.onPrev,disabled:this.props.pageIndex<=1||this.props.isDesignTime},React.createElement("span",{className:"glyphicon glyphicon-chevron-left"})),React.createElement("span",{className:"page-counter"},this.props.pageIndex),React.createElement("button",{className:"btn btn-default",onClick:this.props.onNext,disabled:!this.props.hasMoreResults||this.props.isDesignTime},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"})))}});e.component.register("mw-pagination",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({replaceContent:function(){e.log.info("Rendering Presentation: "+this.props.id);var t=e.model.getComponent(this.props.id,this.props.flowKey).content.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),n=ReactDOM.findDOMNode(this.refs.content);n.innerHTML=t;var o=n.querySelectorAll("img");if(o&&o.length>0)for(var i=0;i<o.length;i++)o[i].className+=" img-responsive"},componentDidUpdate:function(){this.replaceContent()},componentDidMount:function(){this.replaceContent()},render:function(){var t=e.styling.getClasses(this.props.parentId,this.props.id,"presentation",this.props.flowKey).join(" "),n=e.model.getComponent(this.props.id,this.props.flowKey),o=e.model.getOutcomes(this.props.id,this.props.flowKey);0==n.isVisible&&(t+=" hidden");var i=o&&o.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this);return React.DOM.div({className:t,id:this.props.id},[React.DOM.div({ref:"content"},null),i])}});e.component.register("presentation",t)}(manywho),/*!
 Copyright 2015 ManyWho, Inc.
 Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
 file except in compliance with the License.
 You may obtain a copy of the License at: http://manywho.com/sharedsource
 Unless required by applicable law or agreed to in writing, software distributed under
 the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, either express or implied. See the License for the specific language governing
 permissions and limitations under the License.
 */
function(e){function t(t,n,o,i,s){var a={};if(t.properties){var r=t.properties.filter(function(t){return e.utils.isEqual(t.typeElementPropertyId,o,!0)},this)[0],l=n.multiSelect?"checkbox":"radio";if(e.utils.extend(a,[n,{type:l,name:i,value:t.externalId}]),n.multiSelect){var u=s.filter(function(e){return t.externalId==e}).length>0;a.checked=u?"checked":""}else n.value==t.externalId&&(a.checked="checked");return React.DOM.label({className:l},[React.DOM.input(a),r.contentValue])}return null}function n(t){if(t.objectDataRequest&&t.objectData&&1==t.objectData.length){for(prop in t.objectData[0].properties)if(!e.utils.isNullOrWhitespace(t.objectData[0].properties[prop].contentValue))return!1}else if(t.objectData)return!1;return!0}var o=React.createClass({handleChange:function(t){var n=e.model.getComponent(this.props.id,this.props.flowKey),o=e.state.getComponent(this.props.id,this.props.flowKey),i=null;e.utils.isEmptyObjectData(n)||(i=o&&o.objectData?o.objectData.filter(function(e){return e.isSelected}):n.objectData.filter(function(e){return e.isSelected})),n.objectData=n.objectData.map(function(e){return e.isSelected=!1,e}),n.isMultiSelect?(i=i.filter(function(e){return e.externalId!=t.target.value}),t.target.checked&&i.push(n.objectData.filter(function(e){return t.target.value==e.externalId})[0])):i=n.objectData.filter(function(e){return t.target.value==e.externalId}),i=i.map(function(e){return e.isSelected=!0,e}),e.state.setComponent(this.props.id,{objectData:i},this.props.flowKey,!0),e.component.handleEvent(this,n,this.props.flowKey)},render:function(){e.log.info("Rendering Radio Buttons: "+this.props.id);var o=[],i=e.model.getComponent(this.props.id,this.props.flowKey),s=this.props.isDesignTime?{error:null,loading:!1}:e.state.getComponent(this.props.id,this.props.flowKey),a=e.model.getOutcomes(this.props.id,this.props.flowKey),r={required:i.isRequired&&"required",disabled:(!i.isEnabled||!i.isEditable)&&"disabled",multiSelect:i.isMultiSelect};if(this.props.isDesignTime){var l=r.multiSelect?"checkbox":"radio";o=[];for(var u=1;u<4;u++)o.push(React.DOM.label({className:l},[React.DOM.input({type:l}),"Radio "+u]))}else{var p=e.component.getDisplayColumns(i.columns)[0].typeElementPropertyId;if(e.utils.extend(r,{onClick:this.handleChange}),!n(i)){var c=null;c=s&&s.objectData?s.objectData.map(function(e){return e.externalId}):i.objectData.filter(function(e){return e.isSelected}).map(function(e){return e.externalId}),c&&!i.isMultiSelect&&(r.value=c[0]),o=i.objectData.map(function(e){return t(e,r,p,i.developerName,c)})}}var d=["form-group"];("undefined"!=typeof i.isValid&&0==i.isValid||s.error)&&d.push("has-error"),0==i.isVisible&&d.push("hidden"),d=d.concat(e.styling.getClasses(this.props.parentId,this.props.id,"radio",this.props.flowKey));var h=["select-loading-icon"];s.loading&&!s.error||h.push("hidden");var f=a&&a.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this);return React.DOM.div({className:d.join(" "),id:this.props.id},[React.DOM.label({"for":this.props.id},[i.label,i.isRequired?React.DOM.span({className:"input-required"}," *"):null]),React.DOM.div({className:"radio-group"},[o]),React.DOM.div({className:h.join(" ")},React.DOM.span({className:"glyphicon glyphicon-refresh spin"},null)),React.DOM.span({className:"help-block"},s.error&&s.error.message),React.DOM.span({className:"help-block"},i.helpInfo),f])}});e.component.register("radio",o)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({onClick:function(){e.engine.returnToParent(this.props.flowKey,this.props.parentStateId)},render:function(){return e.utils.isNullOrWhitespace(this.props.parentStateId)?null:(e.log.info("Rendering Return To Parent"),React.DOM.button({className:"btn btn-info navbar-btn return-to-parent",onClick:this.onClick},e.settings.global("localization.returnToParent",this.props.flowKey)))}});e.component.register("returnToParent",t)}(manywho);/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},DropDown=function(e){function t(t){e.call(this,t),this.debouncedOnSearch=null,this.state={options:[],search:null,isFocused:!1},this.getOptions=this.getOptions.bind(this),this.updateOptions=this.updateOptions.bind(this),this.onChange=this.onChange.bind(this),this.onInputChange=this.onInputChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.isScrollLimit=this.isScrollLimit.bind(this),this.onSearch=this.onSearch.bind(this),this.debouncedOnSearch=manywho.utils.debounce(this.onSearch,800)}return __extends(t,e),t.prototype.getOptions=function(e){var t=manywho.model.getComponent(this.props.id,this.props.flowKey),n=manywho.component.getDisplayColumns(t.columns)[0].typeElementPropertyId;return e.map(function(e){var t=e.properties.filter(function(e){return manywho.utils.isEqual(e.typeElementPropertyId,n,!0)})[0];return{value:e,label:t.contentValue}})},t.prototype.updateOptions=function(e,t,n,o){e&&!o&&(n>1&&this.state.options.length<t*n?this.setState({options:this.state.options.concat(this.getOptions(e)),search:this.state.search,isFocused:this.state.isFocused}):this.setState({options:this.getOptions(e),search:this.state.search,isFocused:this.state.isFocused}))},t.prototype.onChange=function(e){var t=this,n=manywho.model.getComponent(this.props.id,this.props.flowKey);n.isMultiSelect&&e&&e.length>0?this.props.select(e[e.length-1].value,!0):!n.isMultiSelect&&e?this.props.select(e.value,!0):this.props.clearSelection(!0),manywho.component.handleEvent(this,n,this.props.flowKey),setTimeout(function(){t.setState({search:null,options:t.state.options,isFocused:t.state.isFocused}),(!manywho.utils.isNullOrWhitespace(t.state.search)||n.objectDataRequest||n.fileDataRequest)&&t.props.onSearch(null,!1)})},t.prototype.onInputChange=function(e){var t=this;this.setState({options:this.state.options,search:e,isFocused:this.state.isFocused});var n=manywho.model.getComponent(this.props.id,this.props.flowKey);n.objectDataRequest||n.fileDataRequest?this.debouncedOnSearch(e):setTimeout(function(){return t.onSearch(e)})},t.prototype.onSearch=function(e){this.props.onSearch(e,!1)},t.prototype.onFocus=function(e){var t=this;this.setState({options:this.state.options,search:this.state.search,isFocused:!0}),setTimeout(function(){var e=ReactDOM.findDOMNode(t.refs.select).querySelector(".Select-menu");e&&(e.removeEventListener("scroll",t.isScrollLimit),e.addEventListener("scroll",t.isScrollLimit))})},t.prototype.onBlur=function(e){var t=this;this.setState({options:this.state.options,search:this.state.search,isFocused:!1}),setTimeout(function(){return t.refs.select.setState({isOpen:!1})})},t.prototype.isScrollLimit=function(e){e.target.offsetHeight+e.target.scrollTop>=e.target.scrollHeight&&this.props.hasMoreResults&&(this.props.onNext(),this.refs.select.setState({isOpen:!0}))},t.prototype.componentWillReceiveProps=function(e){var t=this,n=manywho.model.getComponent(this.props.id,this.props.flowKey),o=manywho.state.getComponent(this.props.id,this.props.flowKey);n.objectDataRequest||n.fileDataRequest||this.updateOptions(e.objectData,e.limit,e.page,e.isDesignTime),this.props.isLoading&&!e.isLoading&&(this.updateOptions(e.objectData,e.limit,e.page,e.isDesignTime),manywho.utils.isNullOrWhitespace(this.state.search)||setTimeout(function(){t.refs.select.setState({isOpen:!0});var e=ReactDOM.findDOMNode(t.refs.select).querySelector("input");e.setSelectionRange(t.state.search.length,t.state.search.length)}),!this.state.isFocused||!o||o.objectData&&0!==o.objectData.length||setTimeout(function(){return t.refs.select.setState({isOpen:!0})}),this.state.isFocused&&setTimeout(function(){t.refs.select.focus()}))},t.prototype.componentWillMount=function(){this.props.objectData&&!this.props.isDesignTime&&this.setState({options:this.getOptions(this.props.objectData),search:this.state.search,isFocused:this.state.isFocused})},t.prototype.render=function(){var e=this,t=manywho.model.getComponent(this.props.id,this.props.flowKey);manywho.log.info("Rendering Select: "+this.props.id+", "+t.developerName);var n=this.props.isDesignTime?{error:null,loading:!1}:manywho.state.getComponent(this.props.id,this.props.flowKey),o=null,i=null,s={multi:t.isMultiSelect,disabled:!t.isEnabled||!t.isEditable||n&&n.loading||this.props.isDesignTime,placeholder:"Please select an option"};manywho.utils.isNullOrWhitespace(t.hintValue)||(s.placeholder=t.hintValue),this.state.search&&(s.placeholder=null),this.props.objectData&&!this.props.isDesignTime&&(s.onChange=this.onChange,s.onFocus=this.onFocus,s.onBlur=this.onBlur,s.isLoading=n&&null!==n.loading&&"undefined"!=typeof n.loading,s.onInputChange=this.onInputChange,s.filterOptions=!1,s.inputProps={value:this.state.search},s.openOnFocus=!1,o=n&&n.objectData&&n.objectData.length>0?this.getOptions(n.objectData):this.getOptions(this.props.objectData.filter(function(e){return e.isSelected})),o&&o.length>0?t.isMultiSelect||(o=o[0]):o=null,s.options=this.state.options,s.value=o,(t.objectDataRequest||t.fileDataRequest)&&(s.openOnInputChange=!1));var a=this.props.outcomes&&this.props.outcomes.map(function(t){return React.createElement(manywho.component.getByName("outcome"),{id:t.id,flowKey:e.props.flowKey})}),r=manywho.styling.getClasses(this.props.parentId,this.props.id,"select",this.props.flowKey).join(" ");r+=" form-group",t.isVisible===!1&&(r+=" hidden"),("undefined"!=typeof t.isValid&&0==t.isValid||n.error)&&(r+=" has-error");var l="select-wrapper";if(t.objectDataRequest||t.fileDataRequest){l+=" input-group";var u="glyphicon glyphicon-refresh";n.loading&&!n.error&&(u+=" spin"),i=React.createElement("button",{className:"btn btn-default refresh-button",onClick:this.props.refresh,disabled:!!n.loading},React.createElement("span",{className:u}))}var p={};return t.width&&t.width>0&&(p.width=t.width+"px",p.minWidth=p.width),React.createElement("div",{className:r,id:this.props.id},React.createElement("label",null,t.label,t.isRequired?React.createElement("span",{className:"input-required"}," *"):null),React.createElement("div",{className:l,style:p},React.createElement(Select,__assign({},s,{ref:"select"})),i),React.createElement("span",{className:"help-block"},n.error&&n.error.message),React.createElement("span",{className:"help-block"},t.helpInfo),a)},t}(React.Component);manywho.component.register("mw-select",DropDown),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){var t=e.utils.isEqual(e.model.getInvokeType(this.props.flowKey),"wait",!0)||e.utils.isEqual(e.model.getInvokeType(this.props.flowKey),"status",!0);if(t){e.log.info("Rendering Status");var n=e.settings.global("localization.status",this.props.flowKey,null)||e.model.getWaitMessage(this.props.flowKey),o=React.createElement("p",{className:"lead status-message status-content"},n);return n.indexOf("<")!=-1&&n.indexOf(">")!=-1&&(o=React.createElement("div",{className:"status-content",dangerouslySetInnerHTML:{__html:n}})),React.createElement("div",{className:"status"},React.createElement("div",{className:"wait-spinner"}),o)}return null}});e.component.register("status",t)}(manywho),/*!
Copyright 2016 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){function t(t,n){var o=e.component.getDisplayColumns(t)||[];return n.filter(function(e){return!e.isBulkAction}).length>0&&o.unshift("mw-outcomes"),o}function n(t,n,o,i,s){return t>1||n?React.createElement(e.component.getByName("mw-pagination"),{pageIndex:t,hasMoreResults:n,onNext:o,onPrev:i,isDesignTime:s}):null}var o=React.createClass({mixins:[e.component.mixins.collapse],onHeaderClick:function(t){var n=e.model.getComponent(this.props.id,this.props.flowKey),o=e.state.getComponent(this.props.id,this.props.flowKey),i=n.objectDataRequest;if(i){var s;s=e.utils.isEqual(this.state.lastSortedBy,t.currentTarget.id,!0)&&e.utils.isEqual(this.state.sortByOrder,"ASC",!0)?"DESC":"ASC",e.engine.objectDataRequest(this.props.id,i,this.props.flowKey,e.settings.global("paging.table"),o.search,t.currentTarget.id,s,o.page),this.setState({sortByOrder:s,lastSortedBy:t.currentTarget.id})}else e.log.error("ObjectDataRequest is null for table: "+n.developerName+". A request object is required to search")},onRowClicked:function(e){this.props.select(e.currentTarget.id)},handleResize:function(){(this.state.windowWidth<=768&&window.innerWidth>768||this.state.windowWidth>768&&window.innerWidth<=768)&&this.setState({windowWidth:window.innerWidth})},uploadFile:function(t,n,o){var i=e.model.getComponent(this.props.id,this.props.flowKey);n.append("FileDataRequest",JSON.stringify(i.fileDataRequest));var s=e.utils.extractTenantId(this.props.flowKey),a=e.state.getAuthenticationToken(this.props.flowKey);return e.ajax.uploadFile(n,s,a,o)},uploadComplete:function(){var t=e.model.getComponent(this.props.id,this.props.flowKey),n=e.state.getComponent(this.props.id,this.props.flowKey);e.engine.fileDataRequest(this.props.id,t.fileDataRequest,this.props.flowKey,e.settings.global("paging.table"),n.search,null,null,n.page)},getInitialState:function(){return{windowWidth:window.innerWidth,sortByOrder:"ASC",lastOrderBy:"",objectData:null}},componentDidMount:function(){this.handleResizeDebounced=e.utils.debounce(this.handleResize,200),window.addEventListener("resize",this.handleResizeDebounced)},componentWillUnmount:function(){window.removeEventListener("resize",this.handleResizeDebounced)},render:function(){e.log.info("Rendering Table: "+this.props.id);var o=!0,i=e.model.getComponent(this.props.id,this.props.flowKey),s=this.props.isDesignTime?{error:null,loading:!1}:e.state.getComponent(this.props.id,this.props.flowKey)||{},a=e.model.getOutcomes(this.props.id,this.props.flowKey),r={id:this.props.id,model:i,objectData:this.props.objectData,totalObjectData:!i.objectDataRequest&&i.objectData?i.objectData.length:null,outcomes:a.filter(function(e){return!e.isBulkAction}),displayColumns:t(i.columns,a),selectedRows:s.objectData||[],flowKey:this.props.flowKey,lastSortedBy:this.state.lastSortedBy,sortByOrder:this.state.sortByOrder,isFiles:e.utils.isEqual(i.componentType,"files",!0),isValid:o,isDesignTime:this.props.isDesignTime};this.props.isDesignTime||(r=e.utils.extend(r,{onOutcome:this.props.onOutcome,onRowClicked:this.onRowClicked,selectAll:this.props.selectAll,onHeaderClick:this.onHeaderClick}));var l=this.props.contentElement;l||(l=React.createElement(this.state.windowWidth<=768?e.component.getByName("mw-table-small"):e.component.getByName("mw-table-large"),r));var u=null;i.fileDataRequest&&(u=React.createElement(e.component.getByName("file-upload"),{flowKey:this.props.flowKey,id:this.props.id,fileDataRequest:i.fileDataRequest,uploadComplete:this.uploadComplete,upload:this.uploadFile,isChildComponent:!0},null));var p="table-container clear-fix";this.state.windowWidth<=768&&(p+=" table-container-small"),0==i.isVisible&&(p+=" hidden"),p+=" "+e.styling.getClasses(this.props.parentId,this.props.id,"table",this.props.flowKey).join(" "),i.attributes&&i.attributes.classes&&(p+=" "+i.attributes.classes);var c=null;e.utils.isNullOrWhitespace(i.label)||(c=React.createElement("label",null,i.label));var d=null;"undefined"!=typeof i.isValid&&0==i.isValid&&(d=React.createElement("div",{className:"has-error"},React.createElement("span",{className:"help-block"},i.validationMessage)));var h=React.createElement(e.component.getByName("mw-items-header"),{flowKey:this.props.flowKey,isSearchable:i.isSearchable,isRefreshable:i.objectDataRequest||i.fileDataRequest,onSearch:this.props.onSearch,outcomes:e.model.getOutcomes(this.props.id,this.props.flowKey),refresh:this.props.refresh});return React.createElement("div",{className:p,id:this.props.id},c,d,React.createElement("div",{className:"clearfix"+(this.state.isVisible?"":" hidden")},u,h,l,n(this.props.page,this.props.hasMoreResults,this.props.onNext,this.props.onPrev,this.props.isDesignTime),React.createElement(e.component.getByName("wait"),{isVisible:s.loading,message:s.loading&&s.loading.message,isSmall:!0},null)))}});e.component.register("mw-table",o)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({getInputType:function(t){switch(t.toUpperCase()){case e.component.contentTypes.string:return"text";case e.component.contentTypes.number:return"number";case e.component.contentTypes["boolean"]:return"checkbox";case e.component.contentTypes.password:return"password";case e.component.contentTypes.datetime:return"datetime";default:return"text"}},isEmptyDate:function(e){return null==e||e.indexOf("01/01/0001")!=-1||e.indexOf("1/1/0001")!=-1||e.indexOf("0001-01-01")!=-1},onChange:function(e){this.setState({value:e.currentTarget.value})},onKeyUp:function(e){13!=e.keyCode||this.props.isDesignTime||e.shiftKey||(e.preventDefault(),e.stopPropagation(),this.onCommit())},onFocus:function(e){this.setState({isFocused:!0})},onBlur:function(){this.setState({isFocused:!1}),this.props.isDesignTime||this.onCommit()},onClick:function(e){e.stopPropagation()},onCommit:function(){if(e.utils.isEqual(this.props.contentType,e.component.contentTypes.datetime,!0)&&!this.isEmptyDate(this.state.value)){var t=moment(this.state.value,["MM/DD/YYYY hh:mm:ss A ZZ",moment.ISO_8601,this.props.contentFormat||""]);this.props.onCommitted(this.props.id,this.props.propertyId,t.format())}else this.props.onCommitted(this.props.id,this.props.propertyId,this.state.value)},componentWillMount:function(){this.setState({value:this.props.value})},componentDidMount:function(){if(e.utils.isEqual(this.props.contentType,e.component.contentTypes.datetime,!0)){var t=ReactDOM.findDOMNode(this.refs.input);if($(t).datetimepicker({locale:"en-us",format:this.props.contentFormat||"MM/DD/YYYY"}).on("dp.change",this.onChange),!this.isEmptyDate(this.state.value)){var n=moment(this.state.value,["MM/DD/YYYY hh:mm:ss A ZZ",moment.ISO_8601,this.props.contentFormat||""]);$(t).data("DateTimePicker").date(n)}}},render:function(){e.log.info("Rendering Table Input: "+this.props.id);var t=["input-sm"];this.state.isFocused||t.push("table-input-display"),e.utils.isEqual(this.props.contentType,e.component.contentTypes["boolean"],!0)||t.push("form-control");var n={className:t.join(" "),onClick:this.onClick,onChange:this.onChange,onKeyUp:this.onKeyUp,value:this.state.value,onFocus:this.onFocus,onBlur:this.onBlur,ref:"input"};return e.utils.isEqual(this.props.contentType,e.component.contentTypes.string,!0)?(n.rows=1,React.DOM.textarea(n)):(n.type=this.getInputType(this.props.contentType),React.DOM.input(n))}});e.component.register("table-input",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){function t(t,n,o,i){return t.map(function(t){return t.properties=t.properties.map(function(s){return e.utils.isEqual(s.typeElementPropertyId,o,!0)&&e.utils.isEqual(t.externalId,n,!0)&&(Array.isArray(i)?s.objectData=i:s.contentValue=i),s}),t})}var n=React.createClass({renderHeaderRow:function(t){var n=this,o=[];if(n.props.model.isMultiSelect&&this.props.objectData){var i={type:"checkbox",onChange:n.props.selectAll,ref:"selectAll"};i.checked=this.props.selectedRows.length==this.props.totalObjectData?"checked":"",o.push(React.DOM.th({className:"checkbox-cell"},[React.DOM.input(i)]))}else e.utils.isEqual(n.props.model.attributes.radio,"true",!0)&&o.push(React.DOM.th({}));return o=o.concat(t.map(function(t){if("mw-outcomes"==t)return React.DOM.th({className:"table-outcome-column",key:"actions"},"Actions");var o={id:t.developerName,key:"header-"+t.developerName};n.props.onHeaderClick&&(o.onClick=n.props.onHeaderClick);var i=[t.label];if(!e.utils.isNullOrWhitespace(n.props.lastSortedBy)&&n.props.lastSortedBy==t.developerName){var s="table-header-icon glyphicon ";s+="ASC"==n.props.sortByOrder?"glyphicon-menu-down":"glyphicon-menu-up",i.push(React.DOM.span({className:s}))}return React.DOM.th(o,i)})),React.DOM.tr(null,o)},onOutcomeClick:function(e,t){var n=e.currentTarget.parentElement.getAttribute("data-item");this.props.onOutcome(n,t.id)},onCellEditCommitted:function(n,o,i){var s=t(this.props.objectData,n,o,i);e.state.setComponent(this.props.id,{objectData:s},this.props.flowKey,!1)},renderRows:function(t,n,o,i,s,a,r){var l=e.component.getByName("outcome");return n.map(function(n){var u=s.filter(function(t){return e.utils.isEqual(n.externalId,t.externalId,!0)}).length>0,p=[u?"info":""],c=[];if(this.props.model.isMultiSelect){var d=u?"checked":"";c.push(React.DOM.td({className:"checkbox-cell"},[React.DOM.input({id:n.externalId,type:"checkbox",checked:d})]))}else if(e.utils.isEqual(this.props.model.attributes.radio,"true",!0)){var d=u?"checked":"";c.push(React.DOM.td({className:"checkbox-cell"},[React.DOM.input({id:n.externalId,value:n.externalId,type:"radio",checked:d})]))}return c=c.concat(i.map(function(i){if("mw-outcomes"==i)return React.DOM.td({className:"table-outcome-column","data-item":n.externalId,key:n.externalId+i},o.map(function(e){return React.createElement(l,{id:e.id,key:e.id,onClick:this.onOutcomeClick,flowKey:t,display:r.outcomes},null)},this));var s=n.properties.filter(function(e){return e.typeElementPropertyId==i.typeElementPropertyId})[0];if(e.utils.isNullOrWhitespace(i.typeElementPropertyToDisplayId)||null!=s&&null!=s.objectData&&(s=s.objectData[0].properties.filter(function(e){return e.typeElementPropertyId==i.typeElementPropertyToDisplayId})[0]),s){if(this.props.isFiles&&(e.utils.isEqual(s.typeElementPropertyId,e.settings.global("files.downloadUriPropertyId"),!0)||e.utils.isEqual(s.developerName,e.settings.global("files.downloadUriPropertyName"),!0))){var a={href:s.contentValue,target:"_blank"},u=["btn","btn-sm"];return e.utils.isNullOrWhitespace(s.contentValue)?(u.push("btn-default"),a.disabled="disabled"):u.push("btn-info"),a.className=u.join(" "),React.DOM.td(null,React.DOM.a(a,"Download"))}return e.utils.isNullOrWhitespace(i.componentType)?i.isEditable?React.DOM.td({id:i.typeElementPropertyId,key:i.typeElementPropertyId,className:"editable"},React.createElement(e.component.getByName("table-input"),{id:n.externalId,propertyId:i.typeElementPropertyId,value:s.contentValue,contentType:i.contentType,contentFormat:i.contentFormat,onCommitted:this.onCellEditCommitted})):React.DOM.td({id:i.typeElementPropertyId,key:i.typeElementPropertyId,onClick:i.isEditable&&this.onCellClick},React.DOM.span(null,s.contentValue)):React.DOM.td({id:i.typeElementPropertyId,key:i.typeElementPropertyId},React.createElement(e.component.getByName(i.componentType),{id:n.externalId,propertyId:i.typeElementPropertyId,contentValue:s.contentValue,objectData:s.objectData,onCommitted:this.onCellEditCommitted,flowKey:this.props.flowKey,isEditable:i.isEditable,contentType:i.contentType,contentFormat:i.contentFormat}))}return React.DOM.td({key:i.typeElementPropertyId},"")},this)),React.DOM.tr({className:p,id:n.externalId,key:n.externalId,onClick:a},c)},this)},getInitialState:function(){return{}},componentDidUpdate:function(){var e=ReactDOM.findDOMNode(this.refs.selectAll);e&&(e.indeterminate=this.props.selectedRows.length>0&&this.props.selectedRows.length!==this.props.totalObjectData)},render:function(){e.log.info("Rendering Table-Large");var t=void 0!==this.props.model.isValid?this.props.model.isValid:this.props.isDesignTime&&!0,n=["table",this.props.model.attributes.borderless&&e.utils.isEqual(this.props.model.attributes.borderless,"true",!0)?"":"table-bordered",this.props.model.attributes.striped&&e.utils.isEqual(this.props.model.attributes.striped,"true",!0)?"table-striped":"",this.props.isSelectionEnabled?"table-hover":"",t?"":"table-invalid"].join(" "),o=[this.renderHeaderRow(this.props.displayColumns)];return o=o.concat(this.renderRows(this.props.flowKey,this.props.objectData||[],this.props.outcomes,this.props.displayColumns,this.props.selectedRows,this.props.onRowClicked,this.props.model.attributes)),React.DOM.div({className:"table-responsive"},React.DOM.table({className:n},React.DOM.tbody(null,o)))}});e.component.register("mw-table-large",n)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){function t(){for(var e=document.querySelectorAll(".table-small-chevron"),t=0;t<e.length;t++){var n=$(e[t]),o=n.parent().height();n.css("margin-top",o/2-n.height()/2+"px")}}var n=React.createClass({onOutcomeClick:function(e,t){var n=e.target.parentElement.getAttribute("data-item");this.props.onOutcome(n,t.id)},onItemClick:function(e){if(!this.props.isDesignTime){e.preventDefault();var t=e.currentTarget.getAttribute("data-item"),n=e.currentTarget.getAttribute("data-outcome");this.props.onOutcome(t,n)}},componentDidUpdate:t,componentDidMount:t,renderRows:function(t,n,o){var i=e.model.getComponent(this.props.id,this.props.flowKey),s=e.component.getByName("outcome");return t.map(function(t){var a=["list-group-item","clearfix"],r=this.props.selectedRows.filter(function(n){return e.utils.isEqual(t.externalId,n.externalId,!0)}).length>0;r&&a.push("active");var l={className:a.join(" "),href:"#",id:t.externalId,"data-item":t.externalId},u=n.filter(function(t){return e.utils.isEqual(t.pageActionBindingType,"remove",!0)||e.utils.isEqual(t.pageActionBindingType,"delete",!0)}).length>0,p=null;return 1!=n.length||u||(l["data-outcome"]=n[0].id,l.onClick=this.onItemClick,p=React.DOM.span({className:"glyphicon glyphicon-chevron-right table-small-chevron"},null)),1!=n.length&&(l.onClick=this.props.onRowClicked),React.DOM.a(l,[React.DOM.table({className:"table table-small-item"},React.DOM.tbody(null,o.map(function(o){if("mw-outcomes"==o){if(n.length>1||u)return React.DOM.tr(null,[React.DOM.th({className:"table-small-column table-small-label"},"Actions"),React.DOM.td({className:"table-small-column","data-item":t.externalId,"data-model":i.id},n.map(function(e){return React.createElement(s,{id:e.id,onClick:this.onOutcomeClick,flowKey:this.props.flowKey},null)},this))])}else{var a=t.properties.filter(function(e){return e.typeElementPropertyId==o.typeElementPropertyId})[0];if(e.utils.isNullOrWhitespace(o.typeElementPropertyToDisplayId)||null!=a&&null!=a.objectData&&(a=a.objectData[0].properties.filter(function(e){return e.typeElementPropertyId==o.typeElementPropertyToDisplayId})[0]),a){var r=React.DOM.span(null,a.contentValue);return this.props.isFiles&&(e.utils.isEqual(a.typeElementPropertyId,e.settings.global("files.downloadUriPropertyId"),!0)||e.utils.isEqual(a.developerName,e.settings.global("files.downloadUriPropertyName"),!0))&&(r=React.DOM.a({href:a.contentValue,className:"btn btn-info",target:"_blank"},"Download")),React.DOM.tr(null,[React.DOM.th({className:"table-small-column table-small-label"},o.label),React.DOM.td({className:"table-small-column"},r)])}}},this))),p])},this)},render:function(){e.log.info("Rendering Table-Small");var t=void 0!==this.props.model.isValid?this.props.model.isValid:this.props.isDesignTime&&!0,n=["list-group",t?"":"table-invalid"].join(" "),o=this.renderRows(this.props.objectData||[],this.props.outcomes,this.props.displayColumns);return React.DOM.div({className:n},o)}});e.component.register("mw-table-small",n)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({handleChange:function(t){e.state.setComponent(this.props.id,{contentValue:t.target.value},this.props.flowKey,!0),this.forceUpdate()},handleEvent:function(){e.component.handleEvent(this,e.model.getComponent(this.props.id,this.props.flowKey),this.props.flowKey)},render:function(){e.log.info("Rendering Textarea: "+this.props.id);var t=e.model.getComponent(this.props.id,this.props.flowKey),n=this.props.isDesignTime?{contentValue:""}:e.state.getComponent(this.props.id,this.props.flowKey),o=e.model.getOutcomes(this.props.id,this.props.flowKey),i=!0,s={id:this.props.id,placeholder:t.hintValue,value:n&&n.contentValue||"",maxLength:t.maxSize,cols:t.width,rows:t.height,className:"form-control"};t.isEnabled||(s.disabled="disabled"),t.isRequired&&(s.required=""),t.isEditable||(s.readOnly="readonly"),this.props.isDesignTime||(s=e.utils.extend(s,{onChange:this.handleChange}),t.hasEvents&&(s.onBlur=this.handleEvent)),"undefined"!=typeof t.isValid&&0==t.isValid&&(i=!1);var a=["form-group",0==t.isVisible?"hidden":"",i?"":"has-error"].concat(e.styling.getClasses(this.props.parentId,this.props.id,"textarea",this.props.flowKey)).join(" "),r=o&&o.map(function(t){return React.createElement(e.component.getByName("outcome"),{id:t.id,flowKey:this.props.flowKey})},this);return React.DOM.div({className:a},[React.DOM.label({htmlFor:this.props.id},[t.label,t.isRequired?React.DOM.span({className:"input-required"}," *"):null]),React.DOM.textarea(s,null),React.DOM.span({className:"help-block"},t.validationMessage),React.DOM.span({className:"help-block"},t.helpInfo),r])}});e.component.register("textarea",t)}(manywho);var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Tiles=function(e){function t(t){e.call(this,t),this.onSelect=this.onSelect.bind(this),this.onOutcome=this.onOutcome.bind(this),this.onNext=this.onNext.bind(this),this.onPrev=this.onPrev.bind(this),this.renderItem=this.renderItem.bind(this),this.onSearch=this.onSearch.bind(this)}return __extends(t,e),t.prototype.onSelect=function(e){this.props.select(e.currentTarget.id)},t.prototype.onOutcome=function(e){this.props.onOutcome(e.currentTarget.parentElement.parentElement.id,e.currentTarget.id)},t.prototype.onPrev=function(){var e=this;this.props.onPrev(),setTimeout(function(){return e.refs.container.scrollIntoView(!0)})},t.prototype.onNext=function(){var e=this;this.props.onNext(),setTimeout(function(){return e.refs.container.scrollIntoView(!0)})},t.prototype.onSearch=function(e,t){this.props.onSearch(e,t)},t.prototype.renderItem=function(e,t,n,o){if("next"===e.type)return React.createElement("div",{className:"mw-tiles-next",onClick:this.onNext},React.createElement("span",{className:"glyphicon glyphicon-arrow-right"}));if("prev"===e.type)return React.createElement("div",{className:"mw-tiles-prev",onClick:this.onPrev},React.createElement("span",{className:"glyphicon glyphicon-arrow-left"}));var i="mw-tiles-item";e.isSelected&&(i+=" bg-info");var s=e.properties.find(function(e){return e.typeElementPropertyId==t[0].typeElementPropertyId}).contentValue,a=null;o&&(a=React.createElement(manywho.component.getByName("outcome"),{id:o.id,flowKey:this.props.flowKey,onClick:this.onOutcome,size:"sm"}));var r=null;t.length>1&&(r=e.properties.find(function(e){return e.typeElementPropertyId==t[1].typeElementPropertyId}).contentValue);var l=null;return t.length>2&&(l=t.map(function(t,n){if(n>1){var o=e.properties.find(function(e){return e.typeElementPropertyId==t.typeElementPropertyId});return React.createElement("li",null,React.createElement("strong",null,o.developerName),": ",o.contentValue)}})),React.createElement("div",{className:i,onClick:this.onSelect,id:e.externalId},React.createElement("div",{className:"mw-tiles-item-header"},React.createElement("h3",null,s),a),React.createElement("div",{className:"mw-tiles-item-content"},r),React.createElement("ul",{className:"mw-tiles-item-footer list-unstyled"},l),React.createElement("div",{className:"mw-tiles-item-outcomes"},n))},t.prototype.render=function(){var e=this;if(manywho.log.info("Rendering Tiles: "+this.props.id),this.props.isDesignTime)return null;var t=manywho.model.getComponent(this.props.id,this.props.flowKey),n=this.props.isDesignTime?{error:null,loading:!1}:manywho.state.getComponent(this.props.id,this.props.flowKey)||{},o=manywho.model.getOutcomes(this.props.id,this.props.flowKey),i=manywho.component.getDisplayColumns(t.columns)||[],s=manywho.styling.getClasses(this.props.parentId,this.props.id,"tiles",this.props.flowKey).join(" ");0==t.isVisible&&(s+=" hidden");var a=null;manywho.utils.isNullOrWhitespace(t.label)||(a=React.createElement("label",null,t.label));var r=React.createElement(manywho.component.getByName("mw-items-header"),{flowKey:this.props.flowKey,isSearchable:t.isSearchable,isRefreshable:t.objectDataRequest||t.fileDataRequest,onSearch:this.onSearch,outcomes:manywho.model.getOutcomes(this.props.id,this.props.flowKey),refresh:this.props.refresh}),l=o&&o.filter(function(e){return!manywho.utils.isEqual(e.pageActionType,"Delete",!0)&&!e.isBulkAction}).map(function(t){return React.createElement(manywho.component.getByName("outcome"),{id:t.id,flowKey:e.props.flowKey,onClick:e.onOutcome,size:"default"})}),u=o&&o.filter(function(e){return manywho.utils.isEqual(e.pageActionType,"Delete",!0)&&!e.isBulkAction})[0],p=null,c=[];return this.props.objectData&&!manywho.utils.isPlaceholderObjectData(this.props.objectData)&&(c=this.props.objectData.map(function(e){return e}),this.props.page>1&&c.unshift({type:"prev"}),this.props.hasMoreResults===!0&&(c=c.concat([{type:"next"}]))),p=this.props.contentElement?this.props.contentElement:React.createElement("div",{className:"mw-tiles-items"},c.map(function(t,n){var o=e.props.page.toString()+"-"+n;return React.createElement("div",{className:"mw-tiles-item-container",key:o,ref:"items"},React.createElement(ReactMotion.Motion,{defaultStyle:{rotate:0},style:{rotate:ReactMotion.spring(180,{stiffness:65,damping:9.5})}},function(n){var o="rotateY("+n.rotate+"deg)";return React.createElement("div",{style:{transform:o}},React.createElement("div",{className:"front"}),React.createElement("div",{className:"back"},e.renderItem(t,i,l,u)))}))})),React.createElement("div",{className:s,id:this.props.id,ref:"container"},a,r,p,React.createElement(manywho.component.getByName("wait"),{isVisible:n.loading,message:n.loading&&n.loading.message},null))},t}(React.Component);manywho.component.register("mw-tiles",Tiles);var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},__assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Toggle=function(e){function t(t){e.call(this,t),this.handleChange=this.handleChange.bind(this)}return __extends(t,e),t.prototype.handleChange=function(e){manywho.state.setComponent(this.props.id,{contentValue:e.target.checked},this.props.flowKey,!0),this.handleEvent(null),this.forceUpdate()},t.prototype.handleEvent=function(e){manywho.component.handleEvent(this,manywho.model.getComponent(this.props.id,this.props.flowKey),this.props.flowKey)},t.prototype.render=function(){var e=this,t=manywho.model.getComponent(this.props.id,this.props.flowKey);manywho.log.info("Rendering Toggle: "+this.props.id+", "+t.developerName);var n=manywho.state.getComponent(this.props.id,this.props.flowKey)||{},o=manywho.model.getOutcomes(this.props.id,this.props.flowKey),i=o&&o.map(function(t){return React.createElement(manywho.component.getByName("outcome"),{id:t.id,flowKey:e.props.flowKey})}),s=manywho.styling.getClasses(this.props.parentId,this.props.id,"toggle",this.props.flowKey).join(" ");"undefined"!=typeof t.isValid&&0==t.isValid&&(s+="has-error"),t.isVisible||(s+="hidden");var a=n&&null!=n.contentValue?n.contentValue:t.contentValue,r={type:"checkbox",readOnly:!t.isEditable,required:t.isRequired,disabled:!t.isEnabled,checked:"string"==typeof a&&manywho.utils.isEqual(a,"true",!0)||a===!0};this.props.isDesignTime||(r.onChange=this.handleChange,r.onBlur=this.handleEvent);var l=[null,"success","info","warning","danger"],u=manywho.settings.global("toggle.shape",this.props.flowKey,null),p=manywho.settings.global("toggle.background",this.props.flowKey,null);t.attributes&&("undefined"!=typeof t.attributes.shape&&(u=t.attributes.shape),"undefined"!=typeof t.attributes.background&&(p=t.attributes.background));var c=u+" "+(p?p:""),d=null;return l.indexOf(p)==-1&&(d={background:p}),React.createElement("div",{className:s,id:this.props.id},React.createElement("label",null,t.label),React.createElement("div",null,React.createElement("label",null,React.createElement("input",__assign({},r)),React.createElement("div",{className:c,style:d}))),React.createElement("span",{className:"help-block"},t.validationMessage),React.createElement("span",{className:"help-block"},t.helpInfo),i)},t}(React.Component);manywho.component.register("toggle",Toggle),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){var t=e.model.getChildren(this.props.id,this.props.flowKey);return React.createElement("div",{className:"clearfix"},this.props.children||e.component.getChildComponents(t,this.props.id,this.props.flowKey))}});e.component.registerContainer("vertical_flow",t),e.styling.registerContainer("vertical_flow",function(t,n){var o=[];return e.utils.isEqual(t.componentType,"input",!0)&&0==t.size&&(e.utils.isEqual(t.contentType,e.component.contentTypes.string,!0)||e.utils.isEqual(t.contentType,e.component.contentTypes.password,!0)||e.utils.isEqual(t.contentType,e.component.contentTypes.number,!0))&&o.push("auto-width"),o})}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({render:function(){var t=e.utils.isEqual(e.model.getInvokeType(this.props.flowKey),"waiting_on_votes",!0);return t?(e.log.info("Rendering Voting"),React.DOM.div({className:"voting"},React.DOM.span({className:"glyphicon glyphicon-refresh status-icon spin","aria-hidden":"true"}),React.DOM.p({className:"lead"},"Waiting on Votes"))):null}});e.component.register("voting",t)}(manywho),/*!
Copyright 2015 ManyWho, Inc.
Licensed under the ManyWho License, Version 1.0 (the "License"); you may not use this
file except in compliance with the License.
You may obtain a copy of the License at: http://manywho.com/sharedsource
Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied. See the License for the specific language governing
permissions and limitations under the License.
*/
function(e){var t=React.createClass({componentDidUpdate:function(){if(this.refs.wait){var e=this.refs.wait;e.clientHeight>window.innerHeight&&(e.children[0].style.top="calc(40% + "+window.scrollY+")")}},getDefaultProps:function(){return{isVisible:!1,isSmall:!1,message:null}},render:function(){if(this.props.isVisible){e.log.info("Rendering Wait");var t=["wait-spinner"];return this.props.isSmall&&t.push("wait-spinner-small"),React.DOM.div({className:"wait-container",ref:"wait"},[React.DOM.div({className:t.join(" ")},null),React.DOM.span({className:"wait-message"},this.props.message)])}return null}});e.component.register("wait",t)}(manywho);
//# sourceMappingURL=compiled-87d52ba693.js.map
